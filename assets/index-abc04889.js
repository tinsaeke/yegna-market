var Gf=Object.defineProperty;var Jf=(e,t,r)=>t in e?Gf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var lc=(e,t,r)=>(Jf(e,typeof t!="symbol"?t+"":t,r),r);function Qf(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Yf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rd={exports:{}},Yi={},nd={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=Symbol.for("react.element"),Xf=Symbol.for("react.portal"),Zf=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),tm=Symbol.for("react.profiler"),rm=Symbol.for("react.provider"),nm=Symbol.for("react.context"),sm=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),am=Symbol.for("react.memo"),om=Symbol.for("react.lazy"),cc=Symbol.iterator;function lm(e){return e===null||typeof e!="object"?null:(e=cc&&e[cc]||e["@@iterator"],typeof e=="function"?e:null)}var sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},id=Object.assign,ad={};function En(e,t,r){this.props=e,this.context=t,this.refs=ad,this.updater=r||sd}En.prototype.isReactComponent={};En.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};En.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function od(){}od.prototype=En.prototype;function ol(e,t,r){this.props=e,this.context=t,this.refs=ad,this.updater=r||sd}var ll=ol.prototype=new od;ll.constructor=ol;id(ll,En.prototype);ll.isPureReactComponent=!0;var uc=Array.isArray,ld=Object.prototype.hasOwnProperty,cl={current:null},cd={key:!0,ref:!0,__self:!0,__source:!0};function ud(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)ld.call(t,n)&&!cd.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:As,type:e,key:i,ref:o,props:s,_owner:cl.current}}function cm(e,t){return{$$typeof:As,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ul(e){return typeof e=="object"&&e!==null&&e.$$typeof===As}function um(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var dc=/\/+/g;function va(e,t){return typeof e=="object"&&e!==null&&e.key!=null?um(""+e.key):t.toString(36)}function ui(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case As:case Xf:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+va(o,0):n,uc(s)?(r="",e!=null&&(r=e.replace(dc,"$&/")+"/"),ui(s,t,r,"",function(u){return u})):s!=null&&(ul(s)&&(s=cm(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(dc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",uc(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+va(i,l);o+=ui(i,t,r,c,s)}else if(c=lm(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+va(i,l++),o+=ui(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Bs(e,t,r){if(e==null)return e;var n=[],s=0;return ui(e,n,"","",function(i){return t.call(r,i,s++)}),n}function dm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Me={current:null},di={transition:null},hm={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:di,ReactCurrentOwner:cl};function dd(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Bs,forEach:function(e,t,r){Bs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Bs(e,function(){t++}),t},toArray:function(e){return Bs(e,function(t){return t})||[]},only:function(e){if(!ul(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};H.Component=En;H.Fragment=Zf;H.Profiler=tm;H.PureComponent=ol;H.StrictMode=em;H.Suspense=im;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hm;H.act=dd;H.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=id({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=cl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ld.call(t,c)&&!cd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:As,type:e.type,key:s,ref:i,props:n,_owner:o}};H.createContext=function(e){return e={$$typeof:nm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rm,_context:e},e.Consumer=e};H.createElement=ud;H.createFactory=function(e){var t=ud.bind(null,e);return t.type=e,t};H.createRef=function(){return{current:null}};H.forwardRef=function(e){return{$$typeof:sm,render:e}};H.isValidElement=ul;H.lazy=function(e){return{$$typeof:om,_payload:{_status:-1,_result:e},_init:dm}};H.memo=function(e,t){return{$$typeof:am,type:e,compare:t===void 0?null:t}};H.startTransition=function(e){var t=di.transition;di.transition={};try{e()}finally{di.transition=t}};H.unstable_act=dd;H.useCallback=function(e,t){return Me.current.useCallback(e,t)};H.useContext=function(e){return Me.current.useContext(e)};H.useDebugValue=function(){};H.useDeferredValue=function(e){return Me.current.useDeferredValue(e)};H.useEffect=function(e,t){return Me.current.useEffect(e,t)};H.useId=function(){return Me.current.useId()};H.useImperativeHandle=function(e,t,r){return Me.current.useImperativeHandle(e,t,r)};H.useInsertionEffect=function(e,t){return Me.current.useInsertionEffect(e,t)};H.useLayoutEffect=function(e,t){return Me.current.useLayoutEffect(e,t)};H.useMemo=function(e,t){return Me.current.useMemo(e,t)};H.useReducer=function(e,t,r){return Me.current.useReducer(e,t,r)};H.useRef=function(e){return Me.current.useRef(e)};H.useState=function(e){return Me.current.useState(e)};H.useSyncExternalStore=function(e,t,r){return Me.current.useSyncExternalStore(e,t,r)};H.useTransition=function(){return Me.current.useTransition()};H.version="18.3.1";nd.exports=H;var w=nd.exports;const Xi=Yf(w),fm=Qf({__proto__:null,default:Xi},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=w,pm=Symbol.for("react.element"),gm=Symbol.for("react.fragment"),xm=Object.prototype.hasOwnProperty,ym=mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vm={key:!0,ref:!0,__self:!0,__source:!0};function hd(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)xm.call(t,n)&&!vm.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:pm,type:e,key:i,ref:o,props:s,_owner:ym.current}}Yi.Fragment=gm;Yi.jsx=hd;Yi.jsxs=hd;rd.exports=Yi;var a=rd.exports,Za={},fd={exports:{}},tt={},md={exports:{}},pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,M){var q=R.length;R.push(M);e:for(;0<q;){var ne=q-1>>>1,ue=R[ne];if(0<s(ue,M))R[ne]=M,R[q]=ue,q=ne;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var M=R[0],q=R.pop();if(q!==M){R[0]=q;e:for(var ne=0,ue=R.length,Rt=ue>>>1;ne<Rt;){var P=2*(ne+1)-1,me=R[P],K=P+1,jt=R[K];if(0>s(me,q))K<ue&&0>s(jt,me)?(R[ne]=jt,R[K]=q,ne=K):(R[ne]=me,R[P]=q,ne=P);else if(K<ue&&0>s(jt,q))R[ne]=jt,R[K]=q,ne=K;else break e}}return M}function s(R,M){var q=R.sortIndex-M.sortIndex;return q!==0?q:R.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,x=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var M=r(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=R)n(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=r(u)}}function j(R){if(v=!1,g(R),!y)if(r(c)!==null)y=!0,Le(k);else{var M=r(u);M!==null&&Ht(j,M.startTime-R)}}function k(R,M){y=!1,v&&(v=!1,m(_),_=-1),x=!0;var q=f;try{for(g(M),h=r(c);h!==null&&(!(h.expirationTime>M)||R&&!B());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var ue=ne(h.expirationTime<=M);M=e.unstable_now(),typeof ue=="function"?h.callback=ue:h===r(c)&&n(c),g(M)}else n(c);h=r(c)}if(h!==null)var Rt=!0;else{var P=r(u);P!==null&&Ht(j,P.startTime-M),Rt=!1}return Rt}finally{h=null,f=q,x=!1}}var S=!1,E=null,_=-1,C=5,O=-1;function B(){return!(e.unstable_now()-O<C)}function J(){if(E!==null){var R=e.unstable_now();O=R;var M=!0;try{M=E(!0,R)}finally{M?z():(S=!1,E=null)}}else S=!1}var z;if(typeof p=="function")z=function(){p(J)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,re=W.port2;W.port1.onmessage=J,z=function(){re.postMessage(null)}}else z=function(){b(J,0)};function Le(R){E=R,S||(S=!0,z())}function Ht(R,M){_=b(function(){R(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,Le(k))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var q=f;f=M;try{return R()}finally{f=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,M){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var q=f;f=R;try{return M()}finally{f=q}},e.unstable_scheduleCallback=function(R,M,q){var ne=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ne+q:ne):q=ne,R){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=q+ue,R={id:d++,callback:M,priorityLevel:R,startTime:q,expirationTime:ue,sortIndex:-1},q>ne?(R.sortIndex=q,t(u,R),r(c)===null&&R===r(u)&&(v?(m(_),_=-1):v=!0,Ht(j,q-ne))):(R.sortIndex=ue,t(c,R),y||x||(y=!0,Le(k))),R},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(R){var M=f;return function(){var q=f;f=M;try{return R.apply(this,arguments)}finally{f=q}}}})(pd);md.exports=pd;var wm=md.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm=w,et=wm;function T(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,os={};function Dr(e,t){wn(e,t),wn(e+"Capture",t)}function wn(e,t){for(os[e]=t,e=0;e<t.length;e++)gd.add(t[e])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eo=Object.prototype.hasOwnProperty,_m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hc={},fc={};function jm(e){return eo.call(fc,e)?!0:eo.call(hc,e)?!1:_m.test(e)?fc[e]=!0:(hc[e]=!0,!1)}function Nm(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sm(e,t,r,n){if(t===null||typeof t>"u"||Nm(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ze(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oe[e]=new ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oe[t]=new ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oe[e]=new ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oe[e]=new ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oe[e]=new ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oe[e]=new ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oe[e]=new ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oe[e]=new ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oe[e]=new ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var dl=/[\-:]([a-z])/g;function hl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dl,hl);Oe[t]=new ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dl,hl);Oe[t]=new ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dl,hl);Oe[t]=new ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oe[e]=new ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oe[e]=new ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function fl(e,t,r,n){var s=Oe.hasOwnProperty(t)?Oe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Sm(t,r,s,n)&&(r=null),n||s===null?jm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Wt=bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ms=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),ml=Symbol.for("react.strict_mode"),to=Symbol.for("react.profiler"),xd=Symbol.for("react.provider"),yd=Symbol.for("react.context"),pl=Symbol.for("react.forward_ref"),ro=Symbol.for("react.suspense"),no=Symbol.for("react.suspense_list"),gl=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),vd=Symbol.for("react.offscreen"),mc=Symbol.iterator;function In(e){return e===null||typeof e!="object"?null:(e=mc&&e[mc]||e["@@iterator"],typeof e=="function"?e:null)}var ce=Object.assign,wa;function qn(e){if(wa===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);wa=t&&t[1]||""}return`
`+wa+e}var ba=!1;function _a(e,t){if(!e||ba)return"";ba=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{ba=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?qn(e):""}function km(e){switch(e.tag){case 5:return qn(e.type);case 16:return qn("Lazy");case 13:return qn("Suspense");case 19:return qn("SuspenseList");case 0:case 2:case 15:return e=_a(e.type,!1),e;case 11:return e=_a(e.type.render,!1),e;case 1:return e=_a(e.type,!0),e;default:return""}}function so(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zr:return"Fragment";case Xr:return"Portal";case to:return"Profiler";case ml:return"StrictMode";case ro:return"Suspense";case no:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yd:return(e.displayName||"Context")+".Consumer";case xd:return(e._context.displayName||"Context")+".Provider";case pl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gl:return t=e.displayName||null,t!==null?t:so(e.type)||"Memo";case Jt:t=e._payload,e=e._init;try{return so(e(t))}catch{}}return null}function Em(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return so(t);case 8:return t===ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Cm(e){var t=wd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zs(e){e._valueTracker||(e._valueTracker=Cm(e))}function bd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=wd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function _i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function io(e,t){var r=t.checked;return ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function pc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=mr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _d(e,t){t=t.checked,t!=null&&fl(e,"checked",t,!1)}function ao(e,t){_d(e,t);var r=mr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?oo(e,t.type,r):t.hasOwnProperty("defaultValue")&&oo(e,t.type,mr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function oo(e,t,r){(t!=="number"||_i(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Wn=Array.isArray;function hn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+mr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function lo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(T(91));return ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(T(92));if(Wn(r)){if(1<r.length)throw Error(T(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:mr(r)}}function jd(e,t){var r=mr(t.value),n=mr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function yc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function co(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qs,Sd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qs=qs||document.createElement("div"),qs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ls(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pm=["Webkit","ms","Moz","O"];Object.keys(Qn).forEach(function(e){Pm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qn[t]=Qn[e]})});function kd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Qn.hasOwnProperty(e)&&Qn[e]?(""+t).trim():t+"px"}function Ed(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=kd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Tm=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uo(e,t){if(t){if(Tm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(T(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(T(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(T(61))}if(t.style!=null&&typeof t.style!="object")throw Error(T(62))}}function ho(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=null;function xl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mo=null,fn=null,mn=null;function vc(e){if(e=Ls(e)){if(typeof mo!="function")throw Error(T(280));var t=e.stateNode;t&&(t=na(t),mo(e.stateNode,e.type,t))}}function Cd(e){fn?mn?mn.push(e):mn=[e]:fn=e}function Pd(){if(fn){var e=fn,t=mn;if(mn=fn=null,vc(e),t)for(e=0;e<t.length;e++)vc(t[e])}}function Td(e,t){return e(t)}function Od(){}var ja=!1;function Rd(e,t,r){if(ja)return e(t,r);ja=!0;try{return Td(e,t,r)}finally{ja=!1,(fn!==null||mn!==null)&&(Od(),Pd())}}function cs(e,t){var r=e.stateNode;if(r===null)return null;var n=na(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(T(231,t,typeof r));return r}var po=!1;if(Bt)try{var $n={};Object.defineProperty($n,"passive",{get:function(){po=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{po=!1}function Om(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Yn=!1,ji=null,Ni=!1,go=null,Rm={onError:function(e){Yn=!0,ji=e}};function Am(e,t,r,n,s,i,o,l,c){Yn=!1,ji=null,Om.apply(Rm,arguments)}function Im(e,t,r,n,s,i,o,l,c){if(Am.apply(this,arguments),Yn){if(Yn){var u=ji;Yn=!1,ji=null}else throw Error(T(198));Ni||(Ni=!0,go=u)}}function Fr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wc(e){if(Fr(e)!==e)throw Error(T(188))}function $m(e){var t=e.alternate;if(!t){if(t=Fr(e),t===null)throw Error(T(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return wc(s),e;if(i===n)return wc(s),t;i=i.sibling}throw Error(T(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(T(189))}}if(r.alternate!==n)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?e:t}function Id(e){return e=$m(e),e!==null?$d(e):null}function $d(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$d(e);if(t!==null)return t;e=e.sibling}return null}var Ld=et.unstable_scheduleCallback,bc=et.unstable_cancelCallback,Lm=et.unstable_shouldYield,Um=et.unstable_requestPaint,pe=et.unstable_now,Dm=et.unstable_getCurrentPriorityLevel,yl=et.unstable_ImmediatePriority,Ud=et.unstable_UserBlockingPriority,Si=et.unstable_NormalPriority,Fm=et.unstable_LowPriority,Dd=et.unstable_IdlePriority,Zi=null,Ct=null;function Bm(e){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(Zi,e,void 0,(e.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:qm,Mm=Math.log,zm=Math.LN2;function qm(e){return e>>>=0,e===0?32:31-(Mm(e)/zm|0)|0}var Ws=64,Vs=4194304;function Vn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ki(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Vn(l):(i&=o,i!==0&&(n=Vn(i)))}else o=r&~s,o!==0?n=Vn(o):i!==0&&(n=Vn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-wt(t),s=1<<r,n|=e[r],t&=~s;return n}function Wm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-wt(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=Wm(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function xo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fd(){var e=Ws;return Ws<<=1,!(Ws&4194240)&&(Ws=64),e}function Na(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Is(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wt(t),e[t]=r}function Hm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-wt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function vl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-wt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var X=0;function Bd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Md,wl,zd,qd,Wd,yo=!1,Hs=[],ir=null,ar=null,or=null,us=new Map,ds=new Map,Xt=[],Km="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _c(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":us.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(t.pointerId)}}function Ln(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ls(t),t!==null&&wl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Gm(e,t,r,n,s){switch(t){case"focusin":return ir=Ln(ir,e,t,r,n,s),!0;case"dragenter":return ar=Ln(ar,e,t,r,n,s),!0;case"mouseover":return or=Ln(or,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return us.set(i,Ln(us.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ds.set(i,Ln(ds.get(i)||null,e,t,r,n,s)),!0}return!1}function Vd(e){var t=Er(e.target);if(t!==null){var r=Fr(t);if(r!==null){if(t=r.tag,t===13){if(t=Ad(r),t!==null){e.blockedOn=t,Wd(e.priority,function(){zd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);fo=n,r.target.dispatchEvent(n),fo=null}else return t=Ls(r),t!==null&&wl(t),e.blockedOn=r,!1;t.shift()}return!0}function jc(e,t,r){hi(e)&&r.delete(t)}function Jm(){yo=!1,ir!==null&&hi(ir)&&(ir=null),ar!==null&&hi(ar)&&(ar=null),or!==null&&hi(or)&&(or=null),us.forEach(jc),ds.forEach(jc)}function Un(e,t){e.blockedOn===t&&(e.blockedOn=null,yo||(yo=!0,et.unstable_scheduleCallback(et.unstable_NormalPriority,Jm)))}function hs(e){function t(s){return Un(s,e)}if(0<Hs.length){Un(Hs[0],e);for(var r=1;r<Hs.length;r++){var n=Hs[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ir!==null&&Un(ir,e),ar!==null&&Un(ar,e),or!==null&&Un(or,e),us.forEach(t),ds.forEach(t),r=0;r<Xt.length;r++)n=Xt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Xt.length&&(r=Xt[0],r.blockedOn===null);)Vd(r),r.blockedOn===null&&Xt.shift()}var pn=Wt.ReactCurrentBatchConfig,Ei=!0;function Qm(e,t,r,n){var s=X,i=pn.transition;pn.transition=null;try{X=1,bl(e,t,r,n)}finally{X=s,pn.transition=i}}function Ym(e,t,r,n){var s=X,i=pn.transition;pn.transition=null;try{X=4,bl(e,t,r,n)}finally{X=s,pn.transition=i}}function bl(e,t,r,n){if(Ei){var s=vo(e,t,r,n);if(s===null)Ia(e,t,n,Ci,r),_c(e,n);else if(Gm(s,e,t,r,n))n.stopPropagation();else if(_c(e,n),t&4&&-1<Km.indexOf(e)){for(;s!==null;){var i=Ls(s);if(i!==null&&Md(i),i=vo(e,t,r,n),i===null&&Ia(e,t,n,Ci,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ia(e,t,n,null,r)}}var Ci=null;function vo(e,t,r,n){if(Ci=null,e=xl(n),e=Er(e),e!==null)if(t=Fr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ad(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ci=e,null}function Hd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dm()){case yl:return 1;case Ud:return 4;case Si:case Fm:return 16;case Dd:return 536870912;default:return 16}default:return 16}}var rr=null,_l=null,fi=null;function Kd(){if(fi)return fi;var e,t=_l,r=t.length,n,s="value"in rr?rr.value:rr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return fi=s.slice(e,1<n?1-n:void 0)}function mi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ks(){return!0}function Nc(){return!1}function rt(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ks:Nc,this.isPropagationStopped=Nc,this}return ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),t}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jl=rt(Cn),$s=ce({},Cn,{view:0,detail:0}),Xm=rt($s),Sa,ka,Dn,ea=ce({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dn&&(Dn&&e.type==="mousemove"?(Sa=e.screenX-Dn.screenX,ka=e.screenY-Dn.screenY):ka=Sa=0,Dn=e),Sa)},movementY:function(e){return"movementY"in e?e.movementY:ka}}),Sc=rt(ea),Zm=ce({},ea,{dataTransfer:0}),ep=rt(Zm),tp=ce({},$s,{relatedTarget:0}),Ea=rt(tp),rp=ce({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),np=rt(rp),sp=ce({},Cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ip=rt(sp),ap=ce({},Cn,{data:0}),kc=rt(ap),op={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function up(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cp[e])?!!t[e]:!1}function Nl(){return up}var dp=ce({},$s,{key:function(e){if(e.key){var t=op[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nl,charCode:function(e){return e.type==="keypress"?mi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hp=rt(dp),fp=ce({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ec=rt(fp),mp=ce({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nl}),pp=rt(mp),gp=ce({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),xp=rt(gp),yp=ce({},ea,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vp=rt(yp),wp=[9,13,27,32],Sl=Bt&&"CompositionEvent"in window,Xn=null;Bt&&"documentMode"in document&&(Xn=document.documentMode);var bp=Bt&&"TextEvent"in window&&!Xn,Gd=Bt&&(!Sl||Xn&&8<Xn&&11>=Xn),Cc=String.fromCharCode(32),Pc=!1;function Jd(e,t){switch(e){case"keyup":return wp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var en=!1;function _p(e,t){switch(e){case"compositionend":return Qd(t);case"keypress":return t.which!==32?null:(Pc=!0,Cc);case"textInput":return e=t.data,e===Cc&&Pc?null:e;default:return null}}function jp(e,t){if(en)return e==="compositionend"||!Sl&&Jd(e,t)?(e=Kd(),fi=_l=rr=null,en=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gd&&t.locale!=="ko"?null:t.data;default:return null}}var Np={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Np[e.type]:t==="textarea"}function Yd(e,t,r,n){Cd(n),t=Pi(t,"onChange"),0<t.length&&(r=new jl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zn=null,fs=null;function Sp(e){lh(e,0)}function ta(e){var t=nn(e);if(bd(t))return e}function kp(e,t){if(e==="change")return t}var Xd=!1;if(Bt){var Ca;if(Bt){var Pa="oninput"in document;if(!Pa){var Oc=document.createElement("div");Oc.setAttribute("oninput","return;"),Pa=typeof Oc.oninput=="function"}Ca=Pa}else Ca=!1;Xd=Ca&&(!document.documentMode||9<document.documentMode)}function Rc(){Zn&&(Zn.detachEvent("onpropertychange",Zd),fs=Zn=null)}function Zd(e){if(e.propertyName==="value"&&ta(fs)){var t=[];Yd(t,fs,e,xl(e)),Rd(Sp,t)}}function Ep(e,t,r){e==="focusin"?(Rc(),Zn=t,fs=r,Zn.attachEvent("onpropertychange",Zd)):e==="focusout"&&Rc()}function Cp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ta(fs)}function Pp(e,t){if(e==="click")return ta(t)}function Tp(e,t){if(e==="input"||e==="change")return ta(t)}function Op(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:Op;function ms(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!eo.call(t,s)||!_t(e[s],t[s]))return!1}return!0}function Ac(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ic(e,t){var r=Ac(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ac(r)}}function eh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function th(){for(var e=window,t=_i();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=_i(e.document)}return t}function kl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rp(e){var t=th(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&eh(r.ownerDocument.documentElement,r)){if(n!==null&&kl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Ic(r,i);var o=Ic(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ap=Bt&&"documentMode"in document&&11>=document.documentMode,tn=null,wo=null,es=null,bo=!1;function $c(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bo||tn==null||tn!==_i(n)||(n=tn,"selectionStart"in n&&kl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),es&&ms(es,n)||(es=n,n=Pi(wo,"onSelect"),0<n.length&&(t=new jl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=tn)))}function Gs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var rn={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionend:Gs("Transition","TransitionEnd")},Ta={},rh={};Bt&&(rh=document.createElement("div").style,"AnimationEvent"in window||(delete rn.animationend.animation,delete rn.animationiteration.animation,delete rn.animationstart.animation),"TransitionEvent"in window||delete rn.transitionend.transition);function ra(e){if(Ta[e])return Ta[e];if(!rn[e])return e;var t=rn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in rh)return Ta[e]=t[r];return e}var nh=ra("animationend"),sh=ra("animationiteration"),ih=ra("animationstart"),ah=ra("transitionend"),oh=new Map,Lc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(e,t){oh.set(e,t),Dr(t,[e])}for(var Oa=0;Oa<Lc.length;Oa++){var Ra=Lc[Oa],Ip=Ra.toLowerCase(),$p=Ra[0].toUpperCase()+Ra.slice(1);gr(Ip,"on"+$p)}gr(nh,"onAnimationEnd");gr(sh,"onAnimationIteration");gr(ih,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(ah,"onTransitionEnd");wn("onMouseEnter",["mouseout","mouseover"]);wn("onMouseLeave",["mouseout","mouseover"]);wn("onPointerEnter",["pointerout","pointerover"]);wn("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hn));function Uc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Im(n,t,void 0,e),e.currentTarget=null}function lh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Uc(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Uc(s,l,u),i=c}}}if(Ni)throw e=go,Ni=!1,go=null,e}function se(e,t){var r=t[ko];r===void 0&&(r=t[ko]=new Set);var n=e+"__bubble";r.has(n)||(ch(t,e,2,!1),r.add(n))}function Aa(e,t,r){var n=0;t&&(n|=4),ch(r,e,n,t)}var Js="_reactListening"+Math.random().toString(36).slice(2);function ps(e){if(!e[Js]){e[Js]=!0,gd.forEach(function(r){r!=="selectionchange"&&(Lp.has(r)||Aa(r,!1,e),Aa(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Js]||(t[Js]=!0,Aa("selectionchange",!1,t))}}function ch(e,t,r,n){switch(Hd(t)){case 1:var s=Qm;break;case 4:s=Ym;break;default:s=bl}r=s.bind(null,t,r,e),s=void 0,!po||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ia(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Er(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Rd(function(){var u=i,d=xl(r),h=[];e:{var f=oh.get(e);if(f!==void 0){var x=jl,y=e;switch(e){case"keypress":if(mi(r)===0)break e;case"keydown":case"keyup":x=hp;break;case"focusin":y="focus",x=Ea;break;case"focusout":y="blur",x=Ea;break;case"beforeblur":case"afterblur":x=Ea;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=ep;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=pp;break;case nh:case sh:case ih:x=np;break;case ah:x=xp;break;case"scroll":x=Xm;break;case"wheel":x=vp;break;case"copy":case"cut":case"paste":x=ip;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Ec}var v=(t&4)!==0,b=!v&&e==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var p=u,g;p!==null;){g=p;var j=g.stateNode;if(g.tag===5&&j!==null&&(g=j,m!==null&&(j=cs(p,m),j!=null&&v.push(gs(p,j,g)))),b)break;p=p.return}0<v.length&&(f=new x(f,y,null,r,d),h.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",f&&r!==fo&&(y=r.relatedTarget||r.fromElement)&&(Er(y)||y[Mt]))break e;if((x||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,x?(y=r.relatedTarget||r.toElement,x=u,y=y?Er(y):null,y!==null&&(b=Fr(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(v=Sc,j="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(v=Ec,j="onPointerLeave",m="onPointerEnter",p="pointer"),b=x==null?f:nn(x),g=y==null?f:nn(y),f=new v(j,p+"leave",x,r,d),f.target=b,f.relatedTarget=g,j=null,Er(d)===u&&(v=new v(m,p+"enter",y,r,d),v.target=g,v.relatedTarget=b,j=v),b=j,x&&y)t:{for(v=x,m=y,p=0,g=v;g;g=zr(g))p++;for(g=0,j=m;j;j=zr(j))g++;for(;0<p-g;)v=zr(v),p--;for(;0<g-p;)m=zr(m),g--;for(;p--;){if(v===m||m!==null&&v===m.alternate)break t;v=zr(v),m=zr(m)}v=null}else v=null;x!==null&&Dc(h,f,x,v,!1),y!==null&&b!==null&&Dc(h,b,y,v,!0)}}e:{if(f=u?nn(u):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var k=kp;else if(Tc(f))if(Xd)k=Tp;else{k=Cp;var S=Ep}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Pp);if(k&&(k=k(e,u))){Yd(h,k,r,d);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&oo(f,"number",f.value)}switch(S=u?nn(u):window,e){case"focusin":(Tc(S)||S.contentEditable==="true")&&(tn=S,wo=u,es=null);break;case"focusout":es=wo=tn=null;break;case"mousedown":bo=!0;break;case"contextmenu":case"mouseup":case"dragend":bo=!1,$c(h,r,d);break;case"selectionchange":if(Ap)break;case"keydown":case"keyup":$c(h,r,d)}var E;if(Sl)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else en?Jd(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Gd&&r.locale!=="ko"&&(en||_!=="onCompositionStart"?_==="onCompositionEnd"&&en&&(E=Kd()):(rr=d,_l="value"in rr?rr.value:rr.textContent,en=!0)),S=Pi(u,_),0<S.length&&(_=new kc(_,e,null,r,d),h.push({event:_,listeners:S}),E?_.data=E:(E=Qd(r),E!==null&&(_.data=E)))),(E=bp?_p(e,r):jp(e,r))&&(u=Pi(u,"onBeforeInput"),0<u.length&&(d=new kc("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=E))}lh(h,t)})}function gs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Pi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=cs(e,r),i!=null&&n.unshift(gs(e,i,s)),i=cs(e,t),i!=null&&n.push(gs(e,i,s))),e=e.return}return n}function zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dc(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=cs(r,i),c!=null&&o.unshift(gs(r,c,l))):s||(c=cs(r,i),c!=null&&o.push(gs(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Up=/\r\n?/g,Dp=/\u0000|\uFFFD/g;function Fc(e){return(typeof e=="string"?e:""+e).replace(Up,`
`).replace(Dp,"")}function Qs(e,t,r){if(t=Fc(t),Fc(e)!==t&&r)throw Error(T(425))}function Ti(){}var _o=null,jo=null;function No(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var So=typeof setTimeout=="function"?setTimeout:void 0,Fp=typeof clearTimeout=="function"?clearTimeout:void 0,Bc=typeof Promise=="function"?Promise:void 0,Bp=typeof queueMicrotask=="function"?queueMicrotask:typeof Bc<"u"?function(e){return Bc.resolve(null).then(e).catch(Mp)}:So;function Mp(e){setTimeout(function(){throw e})}function $a(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),hs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);hs(t)}function lr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Mc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Pn=Math.random().toString(36).slice(2),Et="__reactFiber$"+Pn,xs="__reactProps$"+Pn,Mt="__reactContainer$"+Pn,ko="__reactEvents$"+Pn,zp="__reactListeners$"+Pn,qp="__reactHandles$"+Pn;function Er(e){var t=e[Et];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Mt]||r[Et]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Mc(e);e!==null;){if(r=e[Et])return r;e=Mc(e)}return t}e=r,r=e.parentNode}return null}function Ls(e){return e=e[Et]||e[Mt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(T(33))}function na(e){return e[xs]||null}var Eo=[],sn=-1;function xr(e){return{current:e}}function ie(e){0>sn||(e.current=Eo[sn],Eo[sn]=null,sn--)}function te(e,t){sn++,Eo[sn]=e.current,e.current=t}var pr={},$e=xr(pr),Ve=xr(!1),Ar=pr;function bn(e,t){var r=e.type.contextTypes;if(!r)return pr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function He(e){return e=e.childContextTypes,e!=null}function Oi(){ie(Ve),ie($e)}function zc(e,t,r){if($e.current!==pr)throw Error(T(168));te($e,t),te(Ve,r)}function uh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(T(108,Em(e)||"Unknown",s));return ce({},r,n)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pr,Ar=$e.current,te($e,e),te(Ve,Ve.current),!0}function qc(e,t,r){var n=e.stateNode;if(!n)throw Error(T(169));r?(e=uh(e,t,Ar),n.__reactInternalMemoizedMergedChildContext=e,ie(Ve),ie($e),te($e,e)):ie(Ve),te(Ve,r)}var $t=null,sa=!1,La=!1;function dh(e){$t===null?$t=[e]:$t.push(e)}function Wp(e){sa=!0,dh(e)}function yr(){if(!La&&$t!==null){La=!0;var e=0,t=X;try{var r=$t;for(X=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}$t=null,sa=!1}catch(s){throw $t!==null&&($t=$t.slice(e+1)),Ld(yl,yr),s}finally{X=t,La=!1}}return null}var an=[],on=0,Ai=null,Ii=0,nt=[],st=0,Ir=null,Ut=1,Dt="";function _r(e,t){an[on++]=Ii,an[on++]=Ai,Ai=e,Ii=t}function hh(e,t,r){nt[st++]=Ut,nt[st++]=Dt,nt[st++]=Ir,Ir=e;var n=Ut;e=Dt;var s=32-wt(n)-1;n&=~(1<<s),r+=1;var i=32-wt(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ut=1<<32-wt(t)+s|r<<s|n,Dt=i+e}else Ut=1<<i|r<<s|n,Dt=e}function El(e){e.return!==null&&(_r(e,1),hh(e,1,0))}function Cl(e){for(;e===Ai;)Ai=an[--on],an[on]=null,Ii=an[--on],an[on]=null;for(;e===Ir;)Ir=nt[--st],nt[st]=null,Dt=nt[--st],nt[st]=null,Ut=nt[--st],nt[st]=null}var Ze=null,Xe=null,ae=!1,xt=null;function fh(e,t){var r=at(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Wc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ze=e,Xe=lr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ze=e,Xe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ir!==null?{id:Ut,overflow:Dt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=at(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ze=e,Xe=null,!0):!1;default:return!1}}function Co(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Po(e){if(ae){var t=Xe;if(t){var r=t;if(!Wc(e,t)){if(Co(e))throw Error(T(418));t=lr(r.nextSibling);var n=Ze;t&&Wc(e,t)?fh(n,r):(e.flags=e.flags&-4097|2,ae=!1,Ze=e)}}else{if(Co(e))throw Error(T(418));e.flags=e.flags&-4097|2,ae=!1,Ze=e}}}function Vc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ze=e}function Ys(e){if(e!==Ze)return!1;if(!ae)return Vc(e),ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!No(e.type,e.memoizedProps)),t&&(t=Xe)){if(Co(e))throw mh(),Error(T(418));for(;t;)fh(e,t),t=lr(t.nextSibling)}if(Vc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(T(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xe=lr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xe=null}}else Xe=Ze?lr(e.stateNode.nextSibling):null;return!0}function mh(){for(var e=Xe;e;)e=lr(e.nextSibling)}function _n(){Xe=Ze=null,ae=!1}function Pl(e){xt===null?xt=[e]:xt.push(e)}var Vp=Wt.ReactCurrentBatchConfig;function Fn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var n=r.stateNode}if(!n)throw Error(T(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,e))}return e}function Xs(e,t){throw e=Object.prototype.toString.call(t),Error(T(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hc(e){var t=e._init;return t(e._payload)}function ph(e){function t(m,p){if(e){var g=m.deletions;g===null?(m.deletions=[p],m.flags|=16):g.push(p)}}function r(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function n(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=hr(m,p),m.index=0,m.sibling=null,m}function i(m,p,g){return m.index=g,e?(g=m.alternate,g!==null?(g=g.index,g<p?(m.flags|=2,p):g):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,p,g,j){return p===null||p.tag!==6?(p=qa(g,m.mode,j),p.return=m,p):(p=s(p,g),p.return=m,p)}function c(m,p,g,j){var k=g.type;return k===Zr?d(m,p,g.props.children,j,g.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Jt&&Hc(k)===p.type)?(j=s(p,g.props),j.ref=Fn(m,p,g),j.return=m,j):(j=bi(g.type,g.key,g.props,null,m.mode,j),j.ref=Fn(m,p,g),j.return=m,j)}function u(m,p,g,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=Wa(g,m.mode,j),p.return=m,p):(p=s(p,g.children||[]),p.return=m,p)}function d(m,p,g,j,k){return p===null||p.tag!==7?(p=Rr(g,m.mode,j,k),p.return=m,p):(p=s(p,g),p.return=m,p)}function h(m,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=qa(""+p,m.mode,g),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ms:return g=bi(p.type,p.key,p.props,null,m.mode,g),g.ref=Fn(m,null,p),g.return=m,g;case Xr:return p=Wa(p,m.mode,g),p.return=m,p;case Jt:var j=p._init;return h(m,j(p._payload),g)}if(Wn(p)||In(p))return p=Rr(p,m.mode,g,null),p.return=m,p;Xs(m,p)}return null}function f(m,p,g,j){var k=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:l(m,p,""+g,j);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ms:return g.key===k?c(m,p,g,j):null;case Xr:return g.key===k?u(m,p,g,j):null;case Jt:return k=g._init,f(m,p,k(g._payload),j)}if(Wn(g)||In(g))return k!==null?null:d(m,p,g,j,null);Xs(m,g)}return null}function x(m,p,g,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return m=m.get(g)||null,l(p,m,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ms:return m=m.get(j.key===null?g:j.key)||null,c(p,m,j,k);case Xr:return m=m.get(j.key===null?g:j.key)||null,u(p,m,j,k);case Jt:var S=j._init;return x(m,p,g,S(j._payload),k)}if(Wn(j)||In(j))return m=m.get(g)||null,d(p,m,j,k,null);Xs(p,j)}return null}function y(m,p,g,j){for(var k=null,S=null,E=p,_=p=0,C=null;E!==null&&_<g.length;_++){E.index>_?(C=E,E=null):C=E.sibling;var O=f(m,E,g[_],j);if(O===null){E===null&&(E=C);break}e&&E&&O.alternate===null&&t(m,E),p=i(O,p,_),S===null?k=O:S.sibling=O,S=O,E=C}if(_===g.length)return r(m,E),ae&&_r(m,_),k;if(E===null){for(;_<g.length;_++)E=h(m,g[_],j),E!==null&&(p=i(E,p,_),S===null?k=E:S.sibling=E,S=E);return ae&&_r(m,_),k}for(E=n(m,E);_<g.length;_++)C=x(E,m,_,g[_],j),C!==null&&(e&&C.alternate!==null&&E.delete(C.key===null?_:C.key),p=i(C,p,_),S===null?k=C:S.sibling=C,S=C);return e&&E.forEach(function(B){return t(m,B)}),ae&&_r(m,_),k}function v(m,p,g,j){var k=In(g);if(typeof k!="function")throw Error(T(150));if(g=k.call(g),g==null)throw Error(T(151));for(var S=k=null,E=p,_=p=0,C=null,O=g.next();E!==null&&!O.done;_++,O=g.next()){E.index>_?(C=E,E=null):C=E.sibling;var B=f(m,E,O.value,j);if(B===null){E===null&&(E=C);break}e&&E&&B.alternate===null&&t(m,E),p=i(B,p,_),S===null?k=B:S.sibling=B,S=B,E=C}if(O.done)return r(m,E),ae&&_r(m,_),k;if(E===null){for(;!O.done;_++,O=g.next())O=h(m,O.value,j),O!==null&&(p=i(O,p,_),S===null?k=O:S.sibling=O,S=O);return ae&&_r(m,_),k}for(E=n(m,E);!O.done;_++,O=g.next())O=x(E,m,_,O.value,j),O!==null&&(e&&O.alternate!==null&&E.delete(O.key===null?_:O.key),p=i(O,p,_),S===null?k=O:S.sibling=O,S=O);return e&&E.forEach(function(J){return t(m,J)}),ae&&_r(m,_),k}function b(m,p,g,j){if(typeof g=="object"&&g!==null&&g.type===Zr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ms:e:{for(var k=g.key,S=p;S!==null;){if(S.key===k){if(k=g.type,k===Zr){if(S.tag===7){r(m,S.sibling),p=s(S,g.props.children),p.return=m,m=p;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Jt&&Hc(k)===S.type){r(m,S.sibling),p=s(S,g.props),p.ref=Fn(m,S,g),p.return=m,m=p;break e}r(m,S);break}else t(m,S);S=S.sibling}g.type===Zr?(p=Rr(g.props.children,m.mode,j,g.key),p.return=m,m=p):(j=bi(g.type,g.key,g.props,null,m.mode,j),j.ref=Fn(m,p,g),j.return=m,m=j)}return o(m);case Xr:e:{for(S=g.key;p!==null;){if(p.key===S)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){r(m,p.sibling),p=s(p,g.children||[]),p.return=m,m=p;break e}else{r(m,p);break}else t(m,p);p=p.sibling}p=Wa(g,m.mode,j),p.return=m,m=p}return o(m);case Jt:return S=g._init,b(m,p,S(g._payload),j)}if(Wn(g))return y(m,p,g,j);if(In(g))return v(m,p,g,j);Xs(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(r(m,p.sibling),p=s(p,g),p.return=m,m=p):(r(m,p),p=qa(g,m.mode,j),p.return=m,m=p),o(m)):r(m,p)}return b}var jn=ph(!0),gh=ph(!1),$i=xr(null),Li=null,ln=null,Tl=null;function Ol(){Tl=ln=Li=null}function Rl(e){var t=$i.current;ie($i),e._currentValue=t}function To(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function gn(e,t){Li=e,Tl=ln=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(We=!0),e.firstContext=null)}function lt(e){var t=e._currentValue;if(Tl!==e)if(e={context:e,memoizedValue:t,next:null},ln===null){if(Li===null)throw Error(T(308));ln=e,Li.dependencies={lanes:0,firstContext:e}}else ln=ln.next=e;return t}var Cr=null;function Al(e){Cr===null?Cr=[e]:Cr.push(e)}function xh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Al(t)):(r.next=s.next,s.next=r),t.interleaved=r,zt(e,n)}function zt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Qt=!1;function Il(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ft(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,G&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,zt(e,r)}return s=n.interleaved,s===null?(t.next=t,Al(n)):(t.next=s.next,s.next=t),n.interleaved=t,zt(e,r)}function pi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vl(e,r)}}function Kc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ui(e,t,r,n){var s=e.updateQueue;Qt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,x=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,v=l;switch(f=t,x=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(x,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(x,h,f):y,f==null)break e;h=ce({},h,f);break e;case 2:Qt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else x={eventTime:x,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=x,c=h):d=d.next=x,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Lr|=o,e.lanes=o,e.memoizedState=h}}function Gc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(T(191,s));s.call(n)}}}var Us={},Pt=xr(Us),ys=xr(Us),vs=xr(Us);function Pr(e){if(e===Us)throw Error(T(174));return e}function $l(e,t){switch(te(vs,t),te(ys,e),te(Pt,Us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:co(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=co(t,e)}ie(Pt),te(Pt,t)}function Nn(){ie(Pt),ie(ys),ie(vs)}function vh(e){Pr(vs.current);var t=Pr(Pt.current),r=co(t,e.type);t!==r&&(te(ys,e),te(Pt,r))}function Ll(e){ys.current===e&&(ie(Pt),ie(ys))}var oe=xr(0);function Di(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=[];function Ul(){for(var e=0;e<Ua.length;e++)Ua[e]._workInProgressVersionPrimary=null;Ua.length=0}var gi=Wt.ReactCurrentDispatcher,Da=Wt.ReactCurrentBatchConfig,$r=0,le=null,_e=null,Se=null,Fi=!1,ts=!1,ws=0,Hp=0;function Re(){throw Error(T(321))}function Dl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!_t(e[r],t[r]))return!1;return!0}function Fl(e,t,r,n,s,i){if($r=i,le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gi.current=e===null||e.memoizedState===null?Qp:Yp,e=r(n,s),ts){i=0;do{if(ts=!1,ws=0,25<=i)throw Error(T(301));i+=1,Se=_e=null,t.updateQueue=null,gi.current=Xp,e=r(n,s)}while(ts)}if(gi.current=Bi,t=_e!==null&&_e.next!==null,$r=0,Se=_e=le=null,Fi=!1,t)throw Error(T(300));return e}function Bl(){var e=ws!==0;return ws=0,e}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?le.memoizedState=Se=e:Se=Se.next=e,Se}function ct(){if(_e===null){var e=le.alternate;e=e!==null?e.memoizedState:null}else e=_e.next;var t=Se===null?le.memoizedState:Se.next;if(t!==null)Se=t,_e=e;else{if(e===null)throw Error(T(310));_e=e,e={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Se===null?le.memoizedState=Se=e:Se=Se.next=e}return Se}function bs(e,t){return typeof t=="function"?t(e):t}function Fa(e){var t=ct(),r=t.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=e;var n=_e,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if(($r&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,le.lanes|=d,Lr|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,_t(n,t.memoizedState)||(We=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,le.lanes|=i,Lr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ba(e){var t=ct(),r=t.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);_t(i,t.memoizedState)||(We=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function wh(){}function bh(e,t){var r=le,n=ct(),s=t(),i=!_t(n.memoizedState,s);if(i&&(n.memoizedState=s,We=!0),n=n.queue,Ml(Nh.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Se!==null&&Se.memoizedState.tag&1){if(r.flags|=2048,_s(9,jh.bind(null,r,n,s,t),void 0,null),ke===null)throw Error(T(349));$r&30||_h(r,t,s)}return s}function _h(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=le.updateQueue,t===null?(t={lastEffect:null,stores:null},le.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function jh(e,t,r,n){t.value=r,t.getSnapshot=n,Sh(t)&&kh(e)}function Nh(e,t,r){return r(function(){Sh(t)&&kh(e)})}function Sh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!_t(e,r)}catch{return!0}}function kh(e){var t=zt(e,1);t!==null&&bt(t,e,1,-1)}function Jc(e){var t=kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Jp.bind(null,le,e),[t.memoizedState,e]}function _s(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=le.updateQueue,t===null?(t={lastEffect:null,stores:null},le.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Eh(){return ct().memoizedState}function xi(e,t,r,n){var s=kt();le.flags|=e,s.memoizedState=_s(1|t,r,void 0,n===void 0?null:n)}function ia(e,t,r,n){var s=ct();n=n===void 0?null:n;var i=void 0;if(_e!==null){var o=_e.memoizedState;if(i=o.destroy,n!==null&&Dl(n,o.deps)){s.memoizedState=_s(t,r,i,n);return}}le.flags|=e,s.memoizedState=_s(1|t,r,i,n)}function Qc(e,t){return xi(8390656,8,e,t)}function Ml(e,t){return ia(2048,8,e,t)}function Ch(e,t){return ia(4,2,e,t)}function Ph(e,t){return ia(4,4,e,t)}function Th(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Oh(e,t,r){return r=r!=null?r.concat([e]):null,ia(4,4,Th.bind(null,t,e),r)}function zl(){}function Rh(e,t){var r=ct();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ah(e,t){var r=ct();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ih(e,t,r){return $r&21?(_t(r,t)||(r=Fd(),le.lanes|=r,Lr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,We=!0),e.memoizedState=r)}function Kp(e,t){var r=X;X=r!==0&&4>r?r:4,e(!0);var n=Da.transition;Da.transition={};try{e(!1),t()}finally{X=r,Da.transition=n}}function $h(){return ct().memoizedState}function Gp(e,t,r){var n=dr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Lh(e))Uh(t,r);else if(r=xh(e,t,r,n),r!==null){var s=Be();bt(r,e,n,s),Dh(r,t,n)}}function Jp(e,t,r){var n=dr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Lh(e))Uh(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,_t(l,o)){var c=t.interleaved;c===null?(s.next=s,Al(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=xh(e,t,s,n),r!==null&&(s=Be(),bt(r,e,n,s),Dh(r,t,n))}}function Lh(e){var t=e.alternate;return e===le||t!==null&&t===le}function Uh(e,t){ts=Fi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Dh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,vl(e,r)}}var Bi={readContext:lt,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},Qp={readContext:lt,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:lt,useEffect:Qc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,xi(4194308,4,Th.bind(null,t,e),r)},useLayoutEffect:function(e,t){return xi(4194308,4,e,t)},useInsertionEffect:function(e,t){return xi(4,2,e,t)},useMemo:function(e,t){var r=kt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=kt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Gp.bind(null,le,e),[n.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:Jc,useDebugValue:zl,useDeferredValue:function(e){return kt().memoizedState=e},useTransition:function(){var e=Jc(!1),t=e[0];return e=Kp.bind(null,e[1]),kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=le,s=kt();if(ae){if(r===void 0)throw Error(T(407));r=r()}else{if(r=t(),ke===null)throw Error(T(349));$r&30||_h(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Qc(Nh.bind(null,n,i,e),[e]),n.flags|=2048,_s(9,jh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=kt(),t=ke.identifierPrefix;if(ae){var r=Dt,n=Ut;r=(n&~(1<<32-wt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ws++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Hp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Yp={readContext:lt,useCallback:Rh,useContext:lt,useEffect:Ml,useImperativeHandle:Oh,useInsertionEffect:Ch,useLayoutEffect:Ph,useMemo:Ah,useReducer:Fa,useRef:Eh,useState:function(){return Fa(bs)},useDebugValue:zl,useDeferredValue:function(e){var t=ct();return Ih(t,_e.memoizedState,e)},useTransition:function(){var e=Fa(bs)[0],t=ct().memoizedState;return[e,t]},useMutableSource:wh,useSyncExternalStore:bh,useId:$h,unstable_isNewReconciler:!1},Xp={readContext:lt,useCallback:Rh,useContext:lt,useEffect:Ml,useImperativeHandle:Oh,useInsertionEffect:Ch,useLayoutEffect:Ph,useMemo:Ah,useReducer:Ba,useRef:Eh,useState:function(){return Ba(bs)},useDebugValue:zl,useDeferredValue:function(e){var t=ct();return _e===null?t.memoizedState=e:Ih(t,_e.memoizedState,e)},useTransition:function(){var e=Ba(bs)[0],t=ct().memoizedState;return[e,t]},useMutableSource:wh,useSyncExternalStore:bh,useId:$h,unstable_isNewReconciler:!1};function ft(e,t){if(e&&e.defaultProps){t=ce({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Oo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ce({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var aa={isMounted:function(e){return(e=e._reactInternals)?Fr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Be(),s=dr(e),i=Ft(n,s);i.payload=t,r!=null&&(i.callback=r),t=cr(e,i,s),t!==null&&(bt(t,e,s,n),pi(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Be(),s=dr(e),i=Ft(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=cr(e,i,s),t!==null&&(bt(t,e,s,n),pi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Be(),n=dr(e),s=Ft(r,n);s.tag=2,t!=null&&(s.callback=t),t=cr(e,s,n),t!==null&&(bt(t,e,n,r),pi(t,e,n))}};function Yc(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!ms(r,n)||!ms(s,i):!0}function Fh(e,t,r){var n=!1,s=pr,i=t.contextType;return typeof i=="object"&&i!==null?i=lt(i):(s=He(t)?Ar:$e.current,n=t.contextTypes,i=(n=n!=null)?bn(e,s):pr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=aa,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Xc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&aa.enqueueReplaceState(t,t.state,null)}function Ro(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Il(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=lt(i):(i=He(t)?Ar:$e.current,s.context=bn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Oo(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&aa.enqueueReplaceState(s,s.state,null),Ui(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Sn(e,t){try{var r="",n=t;do r+=km(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Ma(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ao(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Zp=typeof WeakMap=="function"?WeakMap:Map;function Bh(e,t,r){r=Ft(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){zi||(zi=!0,qo=n),Ao(e,t)},r}function Mh(e,t,r){r=Ft(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Ao(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ao(e,t),typeof n!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Zc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Zp;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=fg.bind(null,e,t,r),t.then(e,e))}function eu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ft(-1,1),t.tag=2,cr(r,t,1))),r.lanes|=1),e)}var eg=Wt.ReactCurrentOwner,We=!1;function Fe(e,t,r,n){t.child=e===null?gh(t,null,r,n):jn(t,e.child,r,n)}function ru(e,t,r,n,s){r=r.render;var i=t.ref;return gn(t,s),n=Fl(e,t,r,n,i,s),r=Bl(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qt(e,t,s)):(ae&&r&&El(t),t.flags|=1,Fe(e,t,n,s),t.child)}function nu(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Ql(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,zh(e,t,i,n,s)):(e=bi(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ms,r(o,n)&&e.ref===t.ref)return qt(e,t,s)}return t.flags|=1,e=hr(i,n),e.ref=t.ref,e.return=t,t.child=e}function zh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ms(i,n)&&e.ref===t.ref)if(We=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(We=!0);else return t.lanes=e.lanes,qt(e,t,s)}return Io(e,t,r,n,s)}function qh(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(un,Qe),Qe|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,te(un,Qe),Qe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,te(un,Qe),Qe|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,te(un,Qe),Qe|=n;return Fe(e,t,s,r),t.child}function Wh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Io(e,t,r,n,s){var i=He(r)?Ar:$e.current;return i=bn(t,i),gn(t,s),r=Fl(e,t,r,n,i,s),n=Bl(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qt(e,t,s)):(ae&&n&&El(t),t.flags|=1,Fe(e,t,r,s),t.child)}function su(e,t,r,n,s){if(He(r)){var i=!0;Ri(t)}else i=!1;if(gn(t,s),t.stateNode===null)yi(e,t),Fh(t,r,n),Ro(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=lt(u):(u=He(r)?Ar:$e.current,u=bn(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Xc(t,o,n,u),Qt=!1;var f=t.memoizedState;o.state=f,Ui(t,n,o,s),c=t.memoizedState,l!==n||f!==c||Ve.current||Qt?(typeof d=="function"&&(Oo(t,r,d,n),c=t.memoizedState),(l=Qt||Yc(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,yh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:ft(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=lt(c):(c=He(r)?Ar:$e.current,c=bn(t,c));var x=r.getDerivedStateFromProps;(d=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Xc(t,o,n,c),Qt=!1,f=t.memoizedState,o.state=f,Ui(t,n,o,s);var y=t.memoizedState;l!==h||f!==y||Ve.current||Qt?(typeof x=="function"&&(Oo(t,r,x,n),y=t.memoizedState),(u=Qt||Yc(t,r,u,n,f,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return $o(e,t,r,n,i,s)}function $o(e,t,r,n,s,i){Wh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&qc(t,r,!1),qt(e,t,i);n=t.stateNode,eg.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=jn(t,e.child,null,i),t.child=jn(t,null,l,i)):Fe(e,t,l,i),t.memoizedState=n.state,s&&qc(t,r,!0),t.child}function Vh(e){var t=e.stateNode;t.pendingContext?zc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zc(e,t.context,!1),$l(e,t.containerInfo)}function iu(e,t,r,n,s){return _n(),Pl(s),t.flags|=256,Fe(e,t,r,n),t.child}var Lo={dehydrated:null,treeContext:null,retryLane:0};function Uo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hh(e,t,r){var n=t.pendingProps,s=oe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),te(oe,s&1),e===null)return Po(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ca(o,n,0,null),e=Rr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Uo(r),t.memoizedState=Lo,e):ql(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return tg(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=hr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=hr(l,i):(i=Rr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Uo(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Lo,n}return i=e.child,e=i.sibling,n=hr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ql(e,t){return t=ca({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zs(e,t,r,n){return n!==null&&Pl(n),jn(t,e.child,null,r),e=ql(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tg(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Ma(Error(T(422))),Zs(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=ca({mode:"visible",children:n.children},s,0,null),i=Rr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&jn(t,e.child,null,o),t.child.memoizedState=Uo(o),t.memoizedState=Lo,i);if(!(t.mode&1))return Zs(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(T(419)),n=Ma(i,n,void 0),Zs(e,t,o,n)}if(l=(o&e.childLanes)!==0,We||l){if(n=ke,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zt(e,s),bt(n,e,s,-1))}return Jl(),n=Ma(Error(T(421))),Zs(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=mg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Xe=lr(s.nextSibling),Ze=t,ae=!0,xt=null,e!==null&&(nt[st++]=Ut,nt[st++]=Dt,nt[st++]=Ir,Ut=e.id,Dt=e.overflow,Ir=t),t=ql(t,n.children),t.flags|=4096,t)}function au(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),To(e.return,t,r)}function za(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Kh(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Fe(e,t,n.children,r),n=oe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&au(e,r,t);else if(e.tag===19)au(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(te(oe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Di(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),za(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Di(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}za(t,!0,r,null,i);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Lr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(T(153));if(t.child!==null){for(e=t.child,r=hr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=hr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function rg(e,t,r){switch(t.tag){case 3:Vh(t),_n();break;case 5:vh(t);break;case 1:He(t.type)&&Ri(t);break;case 4:$l(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;te($i,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(te(oe,oe.current&1),t.flags|=128,null):r&t.child.childLanes?Hh(e,t,r):(te(oe,oe.current&1),e=qt(e,t,r),e!==null?e.sibling:null);te(oe,oe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Kh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),te(oe,oe.current),n)break;return null;case 22:case 23:return t.lanes=0,qh(e,t,r)}return qt(e,t,r)}var Gh,Do,Jh,Qh;Gh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Do=function(){};Jh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Pr(Pt.current);var i=null;switch(r){case"input":s=io(e,s),n=io(e,n),i=[];break;case"select":s=ce({},s,{value:void 0}),n=ce({},n,{value:void 0}),i=[];break;case"textarea":s=lo(e,s),n=lo(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ti)}uo(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(os.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(os.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&se("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Qh=function(e,t,r,n){r!==n&&(t.flags|=4)};function Bn(e,t){if(!ae)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ae(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ng(e,t,r){var n=t.pendingProps;switch(Cl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(t),null;case 1:return He(t.type)&&Oi(),Ae(t),null;case 3:return n=t.stateNode,Nn(),ie(Ve),ie($e),Ul(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ys(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xt!==null&&(Ho(xt),xt=null))),Do(e,t),Ae(t),null;case 5:Ll(t);var s=Pr(vs.current);if(r=t.type,e!==null&&t.stateNode!=null)Jh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(T(166));return Ae(t),null}if(e=Pr(Pt.current),Ys(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Et]=t,n[xs]=i,e=(t.mode&1)!==0,r){case"dialog":se("cancel",n),se("close",n);break;case"iframe":case"object":case"embed":se("load",n);break;case"video":case"audio":for(s=0;s<Hn.length;s++)se(Hn[s],n);break;case"source":se("error",n);break;case"img":case"image":case"link":se("error",n),se("load",n);break;case"details":se("toggle",n);break;case"input":pc(n,i),se("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},se("invalid",n);break;case"textarea":xc(n,i),se("invalid",n)}uo(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Qs(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Qs(n.textContent,l,e),s=["children",""+l]):os.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&se("scroll",n)}switch(r){case"input":zs(n),gc(n,i,!0);break;case"textarea":zs(n),yc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ti)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Et]=t,e[xs]=n,Gh(e,t,!1,!1),t.stateNode=e;e:{switch(o=ho(r,n),r){case"dialog":se("cancel",e),se("close",e),s=n;break;case"iframe":case"object":case"embed":se("load",e),s=n;break;case"video":case"audio":for(s=0;s<Hn.length;s++)se(Hn[s],e);s=n;break;case"source":se("error",e),s=n;break;case"img":case"image":case"link":se("error",e),se("load",e),s=n;break;case"details":se("toggle",e),s=n;break;case"input":pc(e,n),s=io(e,n),se("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ce({},n,{value:void 0}),se("invalid",e);break;case"textarea":xc(e,n),s=lo(e,n),se("invalid",e);break;default:s=n}uo(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ed(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Sd(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ls(e,c):typeof c=="number"&&ls(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(os.hasOwnProperty(i)?c!=null&&i==="onScroll"&&se("scroll",e):c!=null&&fl(e,i,c,o))}switch(r){case"input":zs(e),gc(e,n,!1);break;case"textarea":zs(e),yc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+mr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?hn(e,!!n.multiple,i,!1):n.defaultValue!=null&&hn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ti)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ae(t),null;case 6:if(e&&t.stateNode!=null)Qh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(T(166));if(r=Pr(vs.current),Pr(Pt.current),Ys(t)){if(n=t.stateNode,r=t.memoizedProps,n[Et]=t,(i=n.nodeValue!==r)&&(e=Ze,e!==null))switch(e.tag){case 3:Qs(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qs(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Et]=t,t.stateNode=n}return Ae(t),null;case 13:if(ie(oe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ae&&Xe!==null&&t.mode&1&&!(t.flags&128))mh(),_n(),t.flags|=98560,i=!1;else if(i=Ys(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(T(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[Et]=t}else _n(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ae(t),i=!1}else xt!==null&&(Ho(xt),xt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||oe.current&1?je===0&&(je=3):Jl())),t.updateQueue!==null&&(t.flags|=4),Ae(t),null);case 4:return Nn(),Do(e,t),e===null&&ps(t.stateNode.containerInfo),Ae(t),null;case 10:return Rl(t.type._context),Ae(t),null;case 17:return He(t.type)&&Oi(),Ae(t),null;case 19:if(ie(oe),i=t.memoizedState,i===null)return Ae(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Bn(i,!1);else{if(je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Di(e),o!==null){for(t.flags|=128,Bn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return te(oe,oe.current&1|2),t.child}e=e.sibling}i.tail!==null&&pe()>kn&&(t.flags|=128,n=!0,Bn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Di(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Bn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ae)return Ae(t),null}else 2*pe()-i.renderingStartTime>kn&&r!==1073741824&&(t.flags|=128,n=!0,Bn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=pe(),t.sibling=null,r=oe.current,te(oe,n?r&1|2:r&1),t):(Ae(t),null);case 22:case 23:return Gl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Qe&1073741824&&(Ae(t),t.subtreeFlags&6&&(t.flags|=8192)):Ae(t),null;case 24:return null;case 25:return null}throw Error(T(156,t.tag))}function sg(e,t){switch(Cl(t),t.tag){case 1:return He(t.type)&&Oi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nn(),ie(Ve),ie($e),Ul(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ll(t),null;case 13:if(ie(oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(T(340));_n()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ie(oe),null;case 4:return Nn(),null;case 10:return Rl(t.type._context),null;case 22:case 23:return Gl(),null;case 24:return null;default:return null}}var ei=!1,Ie=!1,ig=typeof WeakSet=="function"?WeakSet:Set,A=null;function cn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){fe(e,t,n)}else r.current=null}function Fo(e,t,r){try{r()}catch(n){fe(e,t,n)}}var ou=!1;function ag(e,t){if(_o=Ei,e=th(),kl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var x;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(x=h.firstChild)!==null;)f=h,h=x;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===i&&++d===n&&(c=o),(x=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=x}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(jo={focusedElem:e,selectionRange:r},Ei=!1,A=t;A!==null;)if(t=A,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,A=e;else for(;A!==null;){t=A;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,b=y.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:ft(t.type,v),b);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(j){fe(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,A=e;break}A=t.return}return y=ou,ou=!1,y}function rs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fo(t,r,i)}s=s.next}while(s!==n)}}function oa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Bo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Yh(e){var t=e.alternate;t!==null&&(e.alternate=null,Yh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Et],delete t[xs],delete t[ko],delete t[zp],delete t[qp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xh(e){return e.tag===5||e.tag===3||e.tag===4}function lu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ti));else if(n!==4&&(e=e.child,e!==null))for(Mo(e,t,r),e=e.sibling;e!==null;)Mo(e,t,r),e=e.sibling}function zo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(zo(e,t,r),e=e.sibling;e!==null;)zo(e,t,r),e=e.sibling}var Pe=null,pt=!1;function Gt(e,t,r){for(r=r.child;r!==null;)Zh(e,t,r),r=r.sibling}function Zh(e,t,r){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(Zi,r)}catch{}switch(r.tag){case 5:Ie||cn(r,t);case 6:var n=Pe,s=pt;Pe=null,Gt(e,t,r),Pe=n,pt=s,Pe!==null&&(pt?(e=Pe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Pe.removeChild(r.stateNode));break;case 18:Pe!==null&&(pt?(e=Pe,r=r.stateNode,e.nodeType===8?$a(e.parentNode,r):e.nodeType===1&&$a(e,r),hs(e)):$a(Pe,r.stateNode));break;case 4:n=Pe,s=pt,Pe=r.stateNode.containerInfo,pt=!0,Gt(e,t,r),Pe=n,pt=s;break;case 0:case 11:case 14:case 15:if(!Ie&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fo(r,t,o),s=s.next}while(s!==n)}Gt(e,t,r);break;case 1:if(!Ie&&(cn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){fe(r,t,l)}Gt(e,t,r);break;case 21:Gt(e,t,r);break;case 22:r.mode&1?(Ie=(n=Ie)||r.memoizedState!==null,Gt(e,t,r),Ie=n):Gt(e,t,r);break;default:Gt(e,t,r)}}function cu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ig),t.forEach(function(n){var s=pg.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function dt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pe=l.stateNode,pt=!1;break e;case 3:Pe=l.stateNode.containerInfo,pt=!0;break e;case 4:Pe=l.stateNode.containerInfo,pt=!0;break e}l=l.return}if(Pe===null)throw Error(T(160));Zh(i,o,s),Pe=null,pt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){fe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ef(t,e),t=t.sibling}function ef(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dt(t,e),St(e),n&4){try{rs(3,e,e.return),oa(3,e)}catch(v){fe(e,e.return,v)}try{rs(5,e,e.return)}catch(v){fe(e,e.return,v)}}break;case 1:dt(t,e),St(e),n&512&&r!==null&&cn(r,r.return);break;case 5:if(dt(t,e),St(e),n&512&&r!==null&&cn(r,r.return),e.flags&32){var s=e.stateNode;try{ls(s,"")}catch(v){fe(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&_d(s,i),ho(l,o);var u=ho(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Ed(s,h):d==="dangerouslySetInnerHTML"?Sd(s,h):d==="children"?ls(s,h):fl(s,d,h,u)}switch(l){case"input":ao(s,i);break;case"textarea":jd(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?hn(s,!!i.multiple,x,!1):f!==!!i.multiple&&(i.defaultValue!=null?hn(s,!!i.multiple,i.defaultValue,!0):hn(s,!!i.multiple,i.multiple?[]:"",!1))}s[xs]=i}catch(v){fe(e,e.return,v)}}break;case 6:if(dt(t,e),St(e),n&4){if(e.stateNode===null)throw Error(T(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){fe(e,e.return,v)}}break;case 3:if(dt(t,e),St(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{hs(t.containerInfo)}catch(v){fe(e,e.return,v)}break;case 4:dt(t,e),St(e);break;case 13:dt(t,e),St(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Hl=pe())),n&4&&cu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ie=(u=Ie)||d,dt(t,e),Ie=u):dt(t,e),St(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(A=e,d=e.child;d!==null;){for(h=A=d;A!==null;){switch(f=A,x=f.child,f.tag){case 0:case 11:case 14:case 15:rs(4,f,f.return);break;case 1:cn(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){fe(n,r,v)}}break;case 5:cn(f,f.return);break;case 22:if(f.memoizedState!==null){du(h);continue}}x!==null?(x.return=f,A=x):du(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=kd("display",o))}catch(v){fe(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){fe(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:dt(t,e),St(e),n&4&&cu(e);break;case 21:break;default:dt(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Xh(r)){var n=r;break e}r=r.return}throw Error(T(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ls(s,""),n.flags&=-33);var i=lu(e);zo(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=lu(e);Mo(e,l,o);break;default:throw Error(T(161))}}catch(c){fe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function og(e,t,r){A=e,tf(e)}function tf(e,t,r){for(var n=(e.mode&1)!==0;A!==null;){var s=A,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ei;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ie;l=ei;var u=Ie;if(ei=o,(Ie=c)&&!u)for(A=s;A!==null;)o=A,c=o.child,o.tag===22&&o.memoizedState!==null?hu(s):c!==null?(c.return=o,A=c):hu(s);for(;i!==null;)A=i,tf(i),i=i.sibling;A=s,ei=l,Ie=u}uu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,A=i):uu(e)}}function uu(e){for(;A!==null;){var t=A;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ie||oa(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ie)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ft(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Gc(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Gc(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&hs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Ie||t.flags&512&&Bo(t)}catch(f){fe(t,t.return,f)}}if(t===e){A=null;break}if(r=t.sibling,r!==null){r.return=t.return,A=r;break}A=t.return}}function du(e){for(;A!==null;){var t=A;if(t===e){A=null;break}var r=t.sibling;if(r!==null){r.return=t.return,A=r;break}A=t.return}}function hu(e){for(;A!==null;){var t=A;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{oa(4,t)}catch(c){fe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){fe(t,s,c)}}var i=t.return;try{Bo(t)}catch(c){fe(t,i,c)}break;case 5:var o=t.return;try{Bo(t)}catch(c){fe(t,o,c)}}}catch(c){fe(t,t.return,c)}if(t===e){A=null;break}var l=t.sibling;if(l!==null){l.return=t.return,A=l;break}A=t.return}}var lg=Math.ceil,Mi=Wt.ReactCurrentDispatcher,Wl=Wt.ReactCurrentOwner,ot=Wt.ReactCurrentBatchConfig,G=0,ke=null,ve=null,Te=0,Qe=0,un=xr(0),je=0,js=null,Lr=0,la=0,Vl=0,ns=null,qe=null,Hl=0,kn=1/0,At=null,zi=!1,qo=null,ur=null,ti=!1,nr=null,qi=0,ss=0,Wo=null,vi=-1,wi=0;function Be(){return G&6?pe():vi!==-1?vi:vi=pe()}function dr(e){return e.mode&1?G&2&&Te!==0?Te&-Te:Vp.transition!==null?(wi===0&&(wi=Fd()),wi):(e=X,e!==0||(e=window.event,e=e===void 0?16:Hd(e.type)),e):1}function bt(e,t,r,n){if(50<ss)throw ss=0,Wo=null,Error(T(185));Is(e,r,n),(!(G&2)||e!==ke)&&(e===ke&&(!(G&2)&&(la|=r),je===4&&Zt(e,Te)),Ke(e,n),r===1&&G===0&&!(t.mode&1)&&(kn=pe()+500,sa&&yr()))}function Ke(e,t){var r=e.callbackNode;Vm(e,t);var n=ki(e,e===ke?Te:0);if(n===0)r!==null&&bc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&bc(r),t===1)e.tag===0?Wp(fu.bind(null,e)):dh(fu.bind(null,e)),Bp(function(){!(G&6)&&yr()}),r=null;else{switch(Bd(n)){case 1:r=yl;break;case 4:r=Ud;break;case 16:r=Si;break;case 536870912:r=Dd;break;default:r=Si}r=uf(r,rf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function rf(e,t){if(vi=-1,wi=0,G&6)throw Error(T(327));var r=e.callbackNode;if(xn()&&e.callbackNode!==r)return null;var n=ki(e,e===ke?Te:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Wi(e,n);else{t=n;var s=G;G|=2;var i=sf();(ke!==e||Te!==t)&&(At=null,kn=pe()+500,Or(e,t));do try{dg();break}catch(l){nf(e,l)}while(1);Ol(),Mi.current=i,G=s,ve!==null?t=0:(ke=null,Te=0,t=je)}if(t!==0){if(t===2&&(s=xo(e),s!==0&&(n=s,t=Vo(e,s))),t===1)throw r=js,Or(e,0),Zt(e,n),Ke(e,pe()),r;if(t===6)Zt(e,n);else{if(s=e.current.alternate,!(n&30)&&!cg(s)&&(t=Wi(e,n),t===2&&(i=xo(e),i!==0&&(n=i,t=Vo(e,i))),t===1))throw r=js,Or(e,0),Zt(e,n),Ke(e,pe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(T(345));case 2:jr(e,qe,At);break;case 3:if(Zt(e,n),(n&130023424)===n&&(t=Hl+500-pe(),10<t)){if(ki(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Be(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=So(jr.bind(null,e,qe,At),t);break}jr(e,qe,At);break;case 4:if(Zt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-wt(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=pe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*lg(n/1960))-n,10<n){e.timeoutHandle=So(jr.bind(null,e,qe,At),n);break}jr(e,qe,At);break;case 5:jr(e,qe,At);break;default:throw Error(T(329))}}}return Ke(e,pe()),e.callbackNode===r?rf.bind(null,e):null}function Vo(e,t){var r=ns;return e.current.memoizedState.isDehydrated&&(Or(e,t).flags|=256),e=Wi(e,t),e!==2&&(t=qe,qe=r,t!==null&&Ho(t)),e}function Ho(e){qe===null?qe=e:qe.push.apply(qe,e)}function cg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!_t(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zt(e,t){for(t&=~Vl,t&=~la,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wt(t),n=1<<r;e[r]=-1,t&=~n}}function fu(e){if(G&6)throw Error(T(327));xn();var t=ki(e,0);if(!(t&1))return Ke(e,pe()),null;var r=Wi(e,t);if(e.tag!==0&&r===2){var n=xo(e);n!==0&&(t=n,r=Vo(e,n))}if(r===1)throw r=js,Or(e,0),Zt(e,t),Ke(e,pe()),r;if(r===6)throw Error(T(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jr(e,qe,At),Ke(e,pe()),null}function Kl(e,t){var r=G;G|=1;try{return e(t)}finally{G=r,G===0&&(kn=pe()+500,sa&&yr())}}function Ur(e){nr!==null&&nr.tag===0&&!(G&6)&&xn();var t=G;G|=1;var r=ot.transition,n=X;try{if(ot.transition=null,X=1,e)return e()}finally{X=n,ot.transition=r,G=t,!(G&6)&&yr()}}function Gl(){Qe=un.current,ie(un)}function Or(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Fp(r)),ve!==null)for(r=ve.return;r!==null;){var n=r;switch(Cl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Oi();break;case 3:Nn(),ie(Ve),ie($e),Ul();break;case 5:Ll(n);break;case 4:Nn();break;case 13:ie(oe);break;case 19:ie(oe);break;case 10:Rl(n.type._context);break;case 22:case 23:Gl()}r=r.return}if(ke=e,ve=e=hr(e.current,null),Te=Qe=t,je=0,js=null,Vl=la=Lr=0,qe=ns=null,Cr!==null){for(t=0;t<Cr.length;t++)if(r=Cr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Cr=null}return e}function nf(e,t){do{var r=ve;try{if(Ol(),gi.current=Bi,Fi){for(var n=le.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Fi=!1}if($r=0,Se=_e=le=null,ts=!1,ws=0,Wl.current=null,r===null||r.return===null){je=1,js=t,ve=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Te,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=eu(o);if(x!==null){x.flags&=-257,tu(x,o,l,i,t),x.mode&1&&Zc(i,u,t),t=x,c=u;var y=t.updateQueue;if(y===null){var v=new Set;v.add(c),t.updateQueue=v}else y.add(c);break e}else{if(!(t&1)){Zc(i,u,t),Jl();break e}c=Error(T(426))}}else if(ae&&l.mode&1){var b=eu(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),tu(b,o,l,i,t),Pl(Sn(c,l));break e}}i=c=Sn(c,l),je!==4&&(je=2),ns===null?ns=[i]:ns.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=Bh(i,c,t);Kc(i,m);break e;case 1:l=c;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ur===null||!ur.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=Mh(i,l,t);Kc(i,j);break e}}i=i.return}while(i!==null)}of(r)}catch(k){t=k,ve===r&&r!==null&&(ve=r=r.return);continue}break}while(1)}function sf(){var e=Mi.current;return Mi.current=Bi,e===null?Bi:e}function Jl(){(je===0||je===3||je===2)&&(je=4),ke===null||!(Lr&268435455)&&!(la&268435455)||Zt(ke,Te)}function Wi(e,t){var r=G;G|=2;var n=sf();(ke!==e||Te!==t)&&(At=null,Or(e,t));do try{ug();break}catch(s){nf(e,s)}while(1);if(Ol(),G=r,Mi.current=n,ve!==null)throw Error(T(261));return ke=null,Te=0,je}function ug(){for(;ve!==null;)af(ve)}function dg(){for(;ve!==null&&!Lm();)af(ve)}function af(e){var t=cf(e.alternate,e,Qe);e.memoizedProps=e.pendingProps,t===null?of(e):ve=t,Wl.current=null}function of(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=sg(r,t),r!==null){r.flags&=32767,ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{je=6,ve=null;return}}else if(r=ng(r,t,Qe),r!==null){ve=r;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);je===0&&(je=5)}function jr(e,t,r){var n=X,s=ot.transition;try{ot.transition=null,X=1,hg(e,t,r,n)}finally{ot.transition=s,X=n}return null}function hg(e,t,r,n){do xn();while(nr!==null);if(G&6)throw Error(T(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(T(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Hm(e,i),e===ke&&(ve=ke=null,Te=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ti||(ti=!0,uf(Si,function(){return xn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ot.transition,ot.transition=null;var o=X;X=1;var l=G;G|=4,Wl.current=null,ag(e,r),ef(r,e),Rp(jo),Ei=!!_o,jo=_o=null,e.current=r,og(r),Um(),G=l,X=o,ot.transition=i}else e.current=r;if(ti&&(ti=!1,nr=e,qi=s),i=e.pendingLanes,i===0&&(ur=null),Bm(r.stateNode),Ke(e,pe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(zi)throw zi=!1,e=qo,qo=null,e;return qi&1&&e.tag!==0&&xn(),i=e.pendingLanes,i&1?e===Wo?ss++:(ss=0,Wo=e):ss=0,yr(),null}function xn(){if(nr!==null){var e=Bd(qi),t=ot.transition,r=X;try{if(ot.transition=null,X=16>e?16:e,nr===null)var n=!1;else{if(e=nr,nr=null,qi=0,G&6)throw Error(T(331));var s=G;for(G|=4,A=e.current;A!==null;){var i=A,o=i.child;if(A.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(A=u;A!==null;){var d=A;switch(d.tag){case 0:case 11:case 15:rs(8,d,i)}var h=d.child;if(h!==null)h.return=d,A=h;else for(;A!==null;){d=A;var f=d.sibling,x=d.return;if(Yh(d),d===u){A=null;break}if(f!==null){f.return=x,A=f;break}A=x}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}A=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,A=o;else e:for(;A!==null;){if(i=A,i.flags&2048)switch(i.tag){case 0:case 11:case 15:rs(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,A=m;break e}A=i.return}}var p=e.current;for(A=p;A!==null;){o=A;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,A=g;else e:for(o=p;A!==null;){if(l=A,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:oa(9,l)}}catch(k){fe(l,l.return,k)}if(l===o){A=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,A=j;break e}A=l.return}}if(G=s,yr(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(Zi,e)}catch{}n=!0}return n}finally{X=r,ot.transition=t}}return!1}function mu(e,t,r){t=Sn(r,t),t=Bh(e,t,1),e=cr(e,t,1),t=Be(),e!==null&&(Is(e,1,t),Ke(e,t))}function fe(e,t,r){if(e.tag===3)mu(e,e,r);else for(;t!==null;){if(t.tag===3){mu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ur===null||!ur.has(n))){e=Sn(r,e),e=Mh(t,e,1),t=cr(t,e,1),e=Be(),t!==null&&(Is(t,1,e),Ke(t,e));break}}t=t.return}}function fg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&r,ke===e&&(Te&r)===r&&(je===4||je===3&&(Te&130023424)===Te&&500>pe()-Hl?Or(e,0):Vl|=r),Ke(e,t)}function lf(e,t){t===0&&(e.mode&1?(t=Vs,Vs<<=1,!(Vs&130023424)&&(Vs=4194304)):t=1);var r=Be();e=zt(e,t),e!==null&&(Is(e,t,r),Ke(e,r))}function mg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),lf(e,r)}function pg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(t),lf(e,r)}var cf;cf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ve.current)We=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return We=!1,rg(e,t,r);We=!!(e.flags&131072)}else We=!1,ae&&t.flags&1048576&&hh(t,Ii,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;yi(e,t),e=t.pendingProps;var s=bn(t,$e.current);gn(t,r),s=Fl(null,t,n,e,s,r);var i=Bl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,He(n)?(i=!0,Ri(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Il(t),s.updater=aa,t.stateNode=s,s._reactInternals=t,Ro(t,n,e,r),t=$o(null,t,n,!0,i,r)):(t.tag=0,ae&&i&&El(t),Fe(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(yi(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=xg(n),e=ft(n,e),s){case 0:t=Io(null,t,n,e,r);break e;case 1:t=su(null,t,n,e,r);break e;case 11:t=ru(null,t,n,e,r);break e;case 14:t=nu(null,t,n,ft(n.type,e),r);break e}throw Error(T(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ft(n,s),Io(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ft(n,s),su(e,t,n,s,r);case 3:e:{if(Vh(t),e===null)throw Error(T(387));n=t.pendingProps,i=t.memoizedState,s=i.element,yh(e,t),Ui(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Sn(Error(T(423)),t),t=iu(e,t,n,r,s);break e}else if(n!==s){s=Sn(Error(T(424)),t),t=iu(e,t,n,r,s);break e}else for(Xe=lr(t.stateNode.containerInfo.firstChild),Ze=t,ae=!0,xt=null,r=gh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_n(),n===s){t=qt(e,t,r);break e}Fe(e,t,n,r)}t=t.child}return t;case 5:return vh(t),e===null&&Po(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,No(n,s)?o=null:i!==null&&No(n,i)&&(t.flags|=32),Wh(e,t),Fe(e,t,o,r),t.child;case 6:return e===null&&Po(t),null;case 13:return Hh(e,t,r);case 4:return $l(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=jn(t,null,n,r):Fe(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ft(n,s),ru(e,t,n,s,r);case 7:return Fe(e,t,t.pendingProps,r),t.child;case 8:return Fe(e,t,t.pendingProps.children,r),t.child;case 12:return Fe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,te($i,n._currentValue),n._currentValue=o,i!==null)if(_t(i.value,o)){if(i.children===s.children&&!Ve.current){t=qt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ft(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),To(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(T(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),To(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Fe(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,gn(t,r),s=lt(s),n=n(s),t.flags|=1,Fe(e,t,n,r),t.child;case 14:return n=t.type,s=ft(n,t.pendingProps),s=ft(n.type,s),nu(e,t,n,s,r);case 15:return zh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ft(n,s),yi(e,t),t.tag=1,He(n)?(e=!0,Ri(t)):e=!1,gn(t,r),Fh(t,n,s),Ro(t,n,s,r),$o(null,t,n,!0,e,r);case 19:return Kh(e,t,r);case 22:return qh(e,t,r)}throw Error(T(156,t.tag))};function uf(e,t){return Ld(e,t)}function gg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(e,t,r,n){return new gg(e,t,r,n)}function Ql(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xg(e){if(typeof e=="function")return Ql(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pl)return 11;if(e===gl)return 14}return 2}function hr(e,t){var r=e.alternate;return r===null?(r=at(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function bi(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Ql(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zr:return Rr(r.children,s,i,t);case ml:o=8,s|=8;break;case to:return e=at(12,r,t,s|2),e.elementType=to,e.lanes=i,e;case ro:return e=at(13,r,t,s),e.elementType=ro,e.lanes=i,e;case no:return e=at(19,r,t,s),e.elementType=no,e.lanes=i,e;case vd:return ca(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xd:o=10;break e;case yd:o=9;break e;case pl:o=11;break e;case gl:o=14;break e;case Jt:o=16,n=null;break e}throw Error(T(130,e==null?e:typeof e,""))}return t=at(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Rr(e,t,r,n){return e=at(7,e,n,t),e.lanes=r,e}function ca(e,t,r,n){return e=at(22,e,n,t),e.elementType=vd,e.lanes=r,e.stateNode={isHidden:!1},e}function qa(e,t,r){return e=at(6,e,null,t),e.lanes=r,e}function Wa(e,t,r){return t=at(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yg(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Na(0),this.expirationTimes=Na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Na(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yl(e,t,r,n,s,i,o,l,c){return e=new yg(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=at(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Il(i),e}function vg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function df(e){if(!e)return pr;e=e._reactInternals;e:{if(Fr(e)!==e||e.tag!==1)throw Error(T(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(He(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(T(171))}if(e.tag===1){var r=e.type;if(He(r))return uh(e,r,t)}return t}function hf(e,t,r,n,s,i,o,l,c){return e=Yl(r,n,!0,e,s,i,o,l,c),e.context=df(null),r=e.current,n=Be(),s=dr(r),i=Ft(n,s),i.callback=t??null,cr(r,i,s),e.current.lanes=s,Is(e,s,n),Ke(e,n),e}function ua(e,t,r,n){var s=t.current,i=Be(),o=dr(s);return r=df(r),t.context===null?t.context=r:t.pendingContext=r,t=Ft(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=cr(s,t,o),e!==null&&(bt(e,s,o,i),pi(e,s,o)),o}function Vi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Xl(e,t){pu(e,t),(e=e.alternate)&&pu(e,t)}function wg(){return null}var ff=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zl(e){this._internalRoot=e}da.prototype.render=Zl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(T(409));ua(e,t,null,null)};da.prototype.unmount=Zl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ur(function(){ua(null,e,null,null)}),t[Mt]=null}};function da(e){this._internalRoot=e}da.prototype.unstable_scheduleHydration=function(e){if(e){var t=qd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xt.length&&t!==0&&t<Xt[r].priority;r++);Xt.splice(r,0,e),r===0&&Vd(e)}};function ec(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ha(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gu(){}function bg(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Vi(o);i.call(u)}}var o=hf(t,n,e,0,null,!1,!1,"",gu);return e._reactRootContainer=o,e[Mt]=o.current,ps(e.nodeType===8?e.parentNode:e),Ur(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Vi(c);l.call(u)}}var c=Yl(e,0,!1,null,null,!1,!1,"",gu);return e._reactRootContainer=c,e[Mt]=c.current,ps(e.nodeType===8?e.parentNode:e),Ur(function(){ua(t,c,r,n)}),c}function fa(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Vi(o);l.call(c)}}ua(t,o,e,s)}else o=bg(r,t,e,s,n);return Vi(o)}Md=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vn(t.pendingLanes);r!==0&&(vl(t,r|1),Ke(t,pe()),!(G&6)&&(kn=pe()+500,yr()))}break;case 13:Ur(function(){var n=zt(e,1);if(n!==null){var s=Be();bt(n,e,1,s)}}),Xl(e,1)}};wl=function(e){if(e.tag===13){var t=zt(e,134217728);if(t!==null){var r=Be();bt(t,e,134217728,r)}Xl(e,134217728)}};zd=function(e){if(e.tag===13){var t=dr(e),r=zt(e,t);if(r!==null){var n=Be();bt(r,e,t,n)}Xl(e,t)}};qd=function(){return X};Wd=function(e,t){var r=X;try{return X=e,t()}finally{X=r}};mo=function(e,t,r){switch(t){case"input":if(ao(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=na(n);if(!s)throw Error(T(90));bd(n),ao(n,s)}}}break;case"textarea":jd(e,r);break;case"select":t=r.value,t!=null&&hn(e,!!r.multiple,t,!1)}};Td=Kl;Od=Ur;var _g={usingClientEntryPoint:!1,Events:[Ls,nn,na,Cd,Pd,Kl]},Mn={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jg={bundleType:Mn.bundleType,version:Mn.version,rendererPackageName:Mn.rendererPackageName,rendererConfig:Mn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Id(e),e===null?null:e.stateNode},findFiberByHostInstance:Mn.findFiberByHostInstance||wg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ri=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ri.isDisabled&&ri.supportsFiber)try{Zi=ri.inject(jg),Ct=ri}catch{}}tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_g;tt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ec(t))throw Error(T(200));return vg(e,t,null,r)};tt.createRoot=function(e,t){if(!ec(e))throw Error(T(299));var r=!1,n="",s=ff;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Yl(e,1,!1,null,null,r,!1,n,s),e[Mt]=t.current,ps(e.nodeType===8?e.parentNode:e),new Zl(t)};tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(T(188)):(e=Object.keys(e).join(","),Error(T(268,e)));return e=Id(t),e=e===null?null:e.stateNode,e};tt.flushSync=function(e){return Ur(e)};tt.hydrate=function(e,t,r){if(!ha(t))throw Error(T(200));return fa(null,e,t,!0,r)};tt.hydrateRoot=function(e,t,r){if(!ec(e))throw Error(T(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=ff;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=hf(t,null,e,1,r??null,s,!1,i,o),e[Mt]=t.current,ps(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new da(t)};tt.render=function(e,t,r){if(!ha(t))throw Error(T(200));return fa(null,e,t,!1,r)};tt.unmountComponentAtNode=function(e){if(!ha(e))throw Error(T(40));return e._reactRootContainer?(Ur(function(){fa(null,null,e,!1,function(){e._reactRootContainer=null,e[Mt]=null})}),!0):!1};tt.unstable_batchedUpdates=Kl;tt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ha(r))throw Error(T(200));if(e==null||e._reactInternals===void 0)throw Error(T(38));return fa(e,t,r,!1,n)};tt.version="18.3.1-next-f1338f8080-20240426";function mf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mf)}catch(e){console.error(e)}}mf(),fd.exports=tt;var Ng=fd.exports,xu=Ng;Za.createRoot=xu.createRoot,Za.hydrateRoot=xu.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ns(){return Ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ns.apply(this,arguments)}var sr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(sr||(sr={}));const yu="popstate";function Sg(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Ko("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Hi(s)}return Eg(t,r,null,e)}function we(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kg(){return Math.random().toString(36).substr(2,8)}function vu(e,t){return{usr:e.state,key:e.key,idx:t}}function Ko(e,t,r,n){return r===void 0&&(r=null),Ns({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Tn(t):t,{state:r,key:t&&t.key||n||kg()})}function Hi(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Tn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Eg(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=sr.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Ns({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=sr.Pop;let b=d(),m=b==null?null:b-u;u=b,c&&c({action:l,location:v.location,delta:m})}function f(b,m){l=sr.Push;let p=Ko(v.location,b,m);r&&r(p,b),u=d()+1;let g=vu(p,u),j=v.createHref(p);try{o.pushState(g,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(j)}i&&c&&c({action:l,location:v.location,delta:1})}function x(b,m){l=sr.Replace;let p=Ko(v.location,b,m);r&&r(p,b),u=d();let g=vu(p,u),j=v.createHref(p);o.replaceState(g,"",j),i&&c&&c({action:l,location:v.location,delta:0})}function y(b){let m=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof b=="string"?b:Hi(b);return p=p.replace(/ $/,"%20"),we(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let v={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(yu,h),c=b,()=>{s.removeEventListener(yu,h),c=null}},createHref(b){return t(s,b)},createURL:y,encodeLocation(b){let m=y(b);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:x,go(b){return o.go(b)}};return v}var wu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(wu||(wu={}));function Cg(e,t,r){return r===void 0&&(r="/"),Pg(e,t,r,!1)}function Pg(e,t,r,n){let s=typeof t=="string"?Tn(t):t,i=rc(s.pathname||"/",r);if(i==null)return null;let o=pf(e);Tg(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Mg(i);l=Fg(o[c],u,n)}return l}function pf(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(we(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=fr([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(we(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),pf(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Ug(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of gf(i.path))s(i,o,c)}),t}function gf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=gf(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Tg(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Dg(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Og=/^:[\w-]+$/,Rg=3,Ag=2,Ig=1,$g=10,Lg=-2,bu=e=>e==="*";function Ug(e,t){let r=e.split("/"),n=r.length;return r.some(bu)&&(n+=Lg),t&&(n+=Ag),r.filter(s=>!bu(s)).reduce((s,i)=>s+(Og.test(i)?Rg:i===""?Ig:$g),n)}function Dg(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Fg(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=_u({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=_u({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:fr([i,h.pathname]),pathnameBase:Hg(fr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=fr([i,h.pathnameBase]))}return o}function _u(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Bg(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:x}=d;if(f==="*"){let v=l[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[h];return x&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function Bg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),tc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Mg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return tc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function rc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const zg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qg=e=>zg.test(e);function Wg(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Tn(e):e,i;if(r)if(qg(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),tc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=ju(r.substring(1),"/"):i=ju(r,t)}else i=t;return{pathname:i,search:Kg(n),hash:Gg(s)}}function ju(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Va(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vg(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function xf(e,t){let r=Vg(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function yf(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Tn(e):(s=Ns({},e),we(!s.pathname||!s.pathname.includes("?"),Va("?","pathname","search",s)),we(!s.pathname||!s.pathname.includes("#"),Va("#","pathname","hash",s)),we(!s.search||!s.search.includes("#"),Va("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=Wg(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const fr=e=>e.join("/").replace(/\/\/+/g,"/"),Hg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Kg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Gg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Jg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vf=["post","put","patch","delete"];new Set(vf);const Qg=["get",...vf];new Set(Qg);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ss(){return Ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ss.apply(this,arguments)}const nc=w.createContext(null),Yg=w.createContext(null),Br=w.createContext(null),ma=w.createContext(null),vr=w.createContext({outlet:null,matches:[],isDataRoute:!1}),wf=w.createContext(null);function Xg(e,t){let{relative:r}=t===void 0?{}:t;Ds()||we(!1);let{basename:n,navigator:s}=w.useContext(Br),{hash:i,pathname:o,search:l}=_f(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:fr([n,o])),s.createHref({pathname:c,search:l,hash:i})}function Ds(){return w.useContext(ma)!=null}function On(){return Ds()||we(!1),w.useContext(ma).location}function bf(e){w.useContext(Br).static||w.useLayoutEffect(e)}function Tt(){let{isDataRoute:e}=w.useContext(vr);return e?hx():Zg()}function Zg(){Ds()||we(!1);let e=w.useContext(nc),{basename:t,future:r,navigator:n}=w.useContext(Br),{matches:s}=w.useContext(vr),{pathname:i}=On(),o=JSON.stringify(xf(s,r.v7_relativeSplatPath)),l=w.useRef(!1);return bf(()=>{l.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=yf(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:fr([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,i,e])}function ex(){let{matches:e}=w.useContext(vr),t=e[e.length-1];return t?t.params:{}}function _f(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=w.useContext(Br),{matches:s}=w.useContext(vr),{pathname:i}=On(),o=JSON.stringify(xf(s,n.v7_relativeSplatPath));return w.useMemo(()=>yf(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function tx(e,t){return rx(e,t)}function rx(e,t,r,n){Ds()||we(!1);let{navigator:s}=w.useContext(Br),{matches:i}=w.useContext(vr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=On(),d;if(t){var h;let b=typeof t=="string"?Tn(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||we(!1),d=b}else d=u;let f=d.pathname||"/",x=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=Cg(e,{pathname:x}),v=ox(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:fr([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:fr([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return t&&v?w.createElement(ma.Provider,{value:{location:Ss({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:sr.Pop}},v):v}function nx(){let e=dx(),t=Jg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,i)}const sx=w.createElement(nx,null);class ix extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?w.createElement(vr.Provider,{value:this.props.routeContext},w.createElement(wf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ax(e){let{routeContext:t,match:r,children:n}=e,s=w.useContext(nc);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(vr.Provider,{value:t},n)}function ox(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||we(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:x}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||y){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let x,y=!1,v=null,b=null;r&&(x=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||sx,c&&(u<0&&f===0?(fx("route-fallback",!1),y=!0,b=null):u===f&&(y=!0,b=h.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,f+1)),p=()=>{let g;return x?g=v:y?g=b:h.route.Component?g=w.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=d,w.createElement(ax,{match:h,routeContext:{outlet:d,matches:m,isDataRoute:r!=null},children:g})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(ix,{location:r.location,revalidation:r.revalidation,component:v,error:x,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var jf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(jf||{}),Ki=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ki||{});function lx(e){let t=w.useContext(nc);return t||we(!1),t}function cx(e){let t=w.useContext(Yg);return t||we(!1),t}function ux(e){let t=w.useContext(vr);return t||we(!1),t}function Nf(e){let t=ux(),r=t.matches[t.matches.length-1];return r.route.id||we(!1),r.route.id}function dx(){var e;let t=w.useContext(wf),r=cx(Ki.UseRouteError),n=Nf(Ki.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function hx(){let{router:e}=lx(jf.UseNavigateStable),t=Nf(Ki.UseNavigateStable),r=w.useRef(!1);return bf(()=>{r.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ss({fromRouteId:t},i)))},[e,t])}const Nu={};function fx(e,t,r){!t&&!Nu[e]&&(Nu[e]=!0)}function mx(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Ge(e){we(!1)}function px(e){let{basename:t="/",children:r=null,location:n,navigationType:s=sr.Pop,navigator:i,static:o=!1,future:l}=e;Ds()&&we(!1);let c=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:c,navigator:i,static:o,future:Ss({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Tn(n));let{pathname:d="/",search:h="",hash:f="",state:x=null,key:y="default"}=n,v=w.useMemo(()=>{let b=rc(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:x,key:y},navigationType:s}},[c,d,h,f,x,y,s]);return v==null?null:w.createElement(Br.Provider,{value:u},w.createElement(ma.Provider,{children:r,value:v}))}function gx(e){let{children:t,location:r}=e;return tx(Go(t),r)}new Promise(()=>{});function Go(e,t){t===void 0&&(t=[]);let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let i=[...t,s];if(n.type===w.Fragment){r.push.apply(r,Go(n.props.children,i));return}n.type!==Ge&&we(!1),!n.props.index||!n.props.children||we(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Go(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jo(){return Jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jo.apply(this,arguments)}function xx(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function yx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vx(e,t){return e.button===0&&(!t||t==="_self")&&!yx(e)}function Qo(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function wx(e,t){let r=Qo(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const bx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_x="6";try{window.__reactRouterVersion=_x}catch{}const jx="startTransition",Su=fm[jx];function Nx(e){let{basename:t,children:r,future:n,window:s}=e,i=w.useRef();i.current==null&&(i.current=Sg({window:s,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=w.useCallback(h=>{u&&Su?Su(()=>c(h)):c(h)},[c,u]);return w.useLayoutEffect(()=>o.listen(d),[o,d]),w.useEffect(()=>mx(n),[n]),w.createElement(px,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const Sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V=w.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=xx(t,bx),{basename:x}=w.useContext(Br),y,v=!1;if(typeof u=="string"&&kx.test(u)&&(y=u,Sx))try{let g=new URL(window.location.href),j=u.startsWith("//")?new URL(g.protocol+u):new URL(u),k=rc(j.pathname,x);j.origin===g.origin&&k!=null?u=k+j.search+j.hash:v=!0}catch{}let b=Xg(u,{relative:s}),m=Ex(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function p(g){n&&n(g),g.defaultPrevented||m(g)}return w.createElement("a",Jo({},f,{href:y||b,onClick:v||i?n:p,ref:r,target:c}))});var ku;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ku||(ku={}));var Eu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Eu||(Eu={}));function Ex(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Tt(),u=On(),d=_f(e,{relative:o});return w.useCallback(h=>{if(vx(h,r)){h.preventDefault();let f=n!==void 0?n:Hi(u)===Hi(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function Cx(e){let t=w.useRef(Qo(e)),r=w.useRef(!1),n=On(),s=w.useMemo(()=>wx(n.search,r.current?null:t.current),[n.search]),i=Tt(),o=w.useCallback((l,c)=>{const u=Qo(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,o]}function pa(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Px(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}const Tx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class sc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Ox extends sc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Cu extends sc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Pu extends sc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Yo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Yo||(Yo={}));class Rx{constructor(t,{headers:r={},customFetch:n,region:s=Yo.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Tx(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Px(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:x}=n;x||(x=this.region);const y=new URL(`${this.url}/${r}`);x&&x!=="any"&&(f["x-region"]=x,y.searchParams.set("forceFunctionRegion",x));let v;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?v=JSON.stringify(u):v=u;let b=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const m=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:v,signal:b}).catch(k=>{throw new Ox(k)}),p=m.headers.get("x-relay-error");if(p&&p==="true")throw new Cu(m);if(!m.ok)throw new Pu(m);let g=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return g==="application/json"?j=yield m.json():g==="application/octet-stream"||g==="application/pdf"?j=yield m.blob():g==="text/event-stream"?j=m:g==="multipart/form-data"?j=yield m.formData():j=yield m.text(),{data:j,error:null,response:m}}catch(l){return{data:null,error:l,response:l instanceof Pu||l instanceof Cu?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Ax=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Ix=class{constructor(e){var t,r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=e.urlLengthLimit)!==null&&n!==void 0?n:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(r.method!=="HEAD"){var x;const m=await i.text();m===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?l=m:l=JSON.parse(m))}const v=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");v&&b&&b.length>1&&(c=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var y;const v=await i.text();try{o=JSON.parse(v),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&v===""?(u=204,d="No Content"):o={message:v}}if(o&&r.isMaybeSingle&&(!(o==null||(y=o.details)===null||y===void 0)&&y.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new Ax(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="",c="",u="";const d=i==null?void 0:i.cause;if(d){var h,f,x,y;const m=(h=d==null?void 0:d.message)!==null&&h!==void 0?h:"",p=(f=d==null?void 0:d.code)!==null&&f!==void 0?f:"";l=`${(x=i==null?void 0:i.name)!==null&&x!==void 0?x:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(y=d==null?void 0:d.name)!==null&&y!==void 0?y:"Error"}: ${m}`,p&&(l+=` (${p})`),d!=null&&d.stack&&(l+=`
${d.stack}`)}else{var v;l=(v=i==null?void 0:i.stack)!==null&&v!==void 0?v:""}const b=this.url.toString().length;return(i==null?void 0:i.name)==="AbortError"||(i==null?void 0:i.code)==="ABORT_ERR"?(u="",c="Request was aborted (timeout or manual cancellation)",b>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${b} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((d==null?void 0:d.name)==="HeadersOverflowError"||(d==null?void 0:d.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",c="HTTP headers exceeded server limits (typically 16KB)",b>this.urlLengthLimit&&(c+=`. Your request URL is ${b} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:c,code:u},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},$x=class extends Ix{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Tu=new RegExp("[,()]");var Jr=class extends $x{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Tu.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Tu.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Lx=class{constructor(e,{headers:t={},schema:r,fetch:n,urlLengthLimit:s=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new Jr({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new Jr({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new Jr({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Jr({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Jr({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function ks(e){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(e)}function Ux(e,t){if(ks(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ks(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dx(e){var t=Ux(e,"string");return ks(t)=="symbol"?t:t+""}function Fx(e,t,r){return(t=Dx(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ou(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ou(Object(r),!0).forEach(function(n){Fx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ou(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Bx=class Sf{constructor(t,{headers:r={},schema:n,fetch:s,timeout:i,urlLengthLimit:o=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=o;const l=s??globalThis.fetch;i!==void 0&&i>0?this.fetch=(c,u)=>{const d=new AbortController,h=setTimeout(()=>d.abort(),i),f=u==null?void 0:u.signal;if(f){if(f.aborted)return clearTimeout(h),l(c,u);const x=()=>{clearTimeout(h),d.abort()};return f.addEventListener("abort",x,{once:!0}),l(c,ni(ni({},u),{},{signal:d.signal})).finally(()=>{clearTimeout(h),f.removeEventListener("abort",x)})}return l(c,ni(ni({},u),{},{signal:d.signal})).finally(()=>clearTimeout(h))}:this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Lx(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Sf(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(d)),h=n&&Object.values(r).some(d);h?(l="POST",u=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([x,y])=>y!==void 0).map(([x,y])=>[x,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([x,y])=>{c.searchParams.append(x,y)})):(l="POST",u=r);const f=new Headers(this.headers);return h?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Jr({method:l,url:c,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class Mx{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const zx="2.94.0",qx=`realtime-js/${zx}`,Wx="1.0.0",kf="2.0.0",Ru=kf,Xo=1e4,Vx=1e3,Hx=100;var Yt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Yt||(Yt={}));var be;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(be||(be={}));var gt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(gt||(gt={}));var Zo;(function(e){e.websocket="websocket"})(Zo||(Zo={}));var Sr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Sr||(Sr={}));class Kx{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+h.length,x=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(x),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,c.length),y.setUint8(v++,l.length),y.setUint8(v++,o.length),y.setUint8(v++,u.length),y.setUint8(v++,h.length),y.setUint8(v++,r),Array.from(c,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(l,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(o,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(u,m=>y.setUint8(v++,m.charCodeAt(0))),Array.from(h,m=>y.setUint8(v++,m.charCodeAt(0)));var b=new Uint8Array(x.byteLength+n.byteLength);return b.set(new Uint8Array(x),0),b.set(new Uint8Array(n),x.byteLength),b.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,c]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),x=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,y={type:this.BROADCAST_EVENT,event:d,payload:x};return o>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Ef{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ee;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ee||(ee={}));const Au=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=Gx(o,e,t,s),i),{}):{}},Gx=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Cf(i,o):el(o)},Cf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Xx(t,r)}switch(e){case ee.bool:return Jx(t);case ee.float4:case ee.float8:case ee.int2:case ee.int4:case ee.int8:case ee.numeric:case ee.oid:return Qx(t);case ee.json:case ee.jsonb:return Yx(t);case ee.timestamp:return Zx(t);case ee.abstime:case ee.date:case ee.daterange:case ee.int4range:case ee.int8range:case ee.money:case ee.reltime:case ee.text:case ee.time:case ee.timestamptz:case ee.timetz:case ee.tsrange:case ee.tstzrange:return el(t);default:return el(t)}},el=e=>e,Jx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Qx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Yx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Xx=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Cf(t,l))}return e},Zx=e=>typeof e=="string"?e.replace(" ","T"):e,Pf=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ha{constructor(t,r,n={},s=Xo){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Iu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Iu||(Iu={}));class is{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=is.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=is.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=is.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(b=>b.presence_ref),x=h.map(b=>b.presence_ref),y=d.filter(b=>x.indexOf(b.presence_ref)<0),v=h.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(l[u]=y),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(x=>x.presence_ref),f=d.filter(x=>h.indexOf(x.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $u;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})($u||($u={}));var as;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(as||(as={}));var It;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(It||(It={}));class dn{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ha(this,gt.join,this.params,this.timeout),this.rejoinTimer=new Ef(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=be.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gt.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new is(this),this.broadcastEndpointURL=Pf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==be.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[as.PRESENCE]&&this.bindings[as.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(It.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(It.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t==null||t(It.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,m=[];for(let p=0;p<b;p++){const g=v[p],{filter:{event:j,schema:k,table:S,filter:E}}=g,_=x&&x[p];if(_&&_.event===j&&dn.isFilterValueEqual(_.schema,k)&&dn.isFilterValueEqual(_.table,S)&&dn.isFilterValueEqual(_.filter,E))m.push(Object.assign(Object.assign({},g),{id:_.id}));else{this.unsubscribe(),this.state=be.errored,t==null||t(It.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(It.SUBSCRIBED);return}}).receive("error",x=>{this.state=be.errored,t==null||t(It.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(It.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===be.joined&&t===as.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=be.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Ha(this,gt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=be.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ha(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Hx){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=gt;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var y,v,b;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(v=x.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(x=>x.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var y,v,b,m,p,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const j=x.id,k=(y=x.filter)===null||y===void 0?void 0:y.event;return j&&((v=r.ids)===null||v===void 0?void 0:v.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(p=(m=x==null?void 0:x.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return j==="*"||j===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:v,table:b,commit_timestamp:m,type:p,errors:g}=y;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:m,eventType:p,new:{},old:{},errors:g}),this._getPayloadRecords(y))}x.callback(f,n)})}_isClosed(){return this.state===be.closed}_isJoined(){return this.state===be.joined}_isJoining(){return this.state===be.joining}_isLeaving(){return this.state===be.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&dn.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(gt.close,{},t)}_onError(t){this._on(gt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=be.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Au(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Au(t.columns,t.old_record)),r}}const Ka=()=>{},si={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ey=[1e3,2e3,5e3,1e4],ty=1e4,ry=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ny{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xo,this.transport=null,this.heartbeatIntervalMs=si.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ka,this.ref=0,this.reconnectTimer=null,this.vsn=Ru,this.logger=Ka,this.conn=null,this.sendBuffer=[],this.serializer=new Kx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Zo.websocket}`,this.httpEndpoint=Pf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Mx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Yt.connecting:return Sr.Connecting;case Yt.open:return Sr.Open;case Yt.closing:return Sr.Closing;default:return Sr.Closed}}isConnected(){return this.connectionState()===Sr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new dn(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Vx,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},si.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Yt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Yt.open||this.conn.readyState===Yt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(gt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ry],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:qx};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(gt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Ef(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},si.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d,h,f,x;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Xo,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:si.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Ka,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Ru,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>ey[y-1]||ty,this.vsn){case Wx:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,v)=>v(JSON.stringify(y)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(y,v)=>v(JSON.parse(y));break;case kf:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Es=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function sy(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function iy(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function ay(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=sy(e.baseUrl,n,s),c=await iy(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const x=h?f:void 0,y=x==null?void 0:x.error;throw new Es((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:x})}return{status:u.status,headers:u.headers,data:f}}}}function ii(e){return e.join("")}var oy=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:ii(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ii(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ii(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ii(e.namespace)}`}),!0}catch(t){if(t instanceof Es&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Es&&r.status===409)return;throw r}}};function qr(e){return e.join("")}var ly=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qr(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Es&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Es&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},cy=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ay({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new oy(this.client,t),this.tableOps=new ly(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},ga=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function xa(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var ai=class extends ga{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Tf=class extends ga{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const uy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),dy=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},tl=e=>{if(Array.isArray(e))return e.map(r=>tl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=tl(n)}),t},hy=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function fy(e,t){if(Cs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function my(e){var t=fy(e,"string");return Cs(t)=="symbol"?t:t+""}function py(e,t,r){return(t=my(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lu(Object(r),!0).forEach(function(n){py(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Uu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},gy=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new ai(Uu(o),i,l,n))}).catch(()=>{if(n==="vectors"){const o=i+"";t(new ai(s.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";t(new ai(s.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";t(new ai(s.statusText||`HTTP ${i} error`,i,o,n))}}else t(new Tf(Uu(e),e,n))},xy=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?D(D({},s),r):(dy(n)?(s.headers=D({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),D(D({},s),r))};async function zn(e,t,r,n,s,i,o){return new Promise((l,c)=>{e(r,xy(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(o==="vectors"){const d=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>gy(u,c,n,o))})}function Of(e="storage"){return{get:async(t,r,n,s)=>zn(t,"GET",r,n,s,void 0,e),post:async(t,r,n,s,i)=>zn(t,"POST",r,s,i,n,e),put:async(t,r,n,s,i)=>zn(t,"PUT",r,s,i,n,e),head:async(t,r,n,s)=>zn(t,"HEAD",r,D(D({},n),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,n,s,i)=>zn(t,"DELETE",r,s,i,n,e)}}const yy=Of("storage"),{get:Ps,post:mt,put:rl,head:vy,remove:ic}=yy,Ye=Of("vectors");var Rn=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=uy(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xa(r))return{data:null,error:r};throw r}}},wy=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(xa(t))return{data:null,error:t};throw t}}};let Rf;Rf=Symbol.toStringTag;var by=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Rf]="BlobDownloadBuilder",this.promise=null}asStream(){return new wy(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(xa(t))return{data:null,error:t};throw t}}};const _y={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Du={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var jy=class extends Rn{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var s=this;return s.handleOperation(async()=>{let i;const o=D(D({},Du),n);let l=D(D({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=D(D({},l),n.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),h=await(e=="PUT"?rl:mt)(s.fetch,`${s.url}/object/${d}`,i,D({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:h.Id,fullPath:h.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let c;const u=D({upsert:Du.upsert},n),d=D(D({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:i,fullPath:(await rl(s.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const s=D({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await mt(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new ga("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await mt(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await mt(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(e),i=await mt(n.fetch,`${n.url}/object/sign/${s}`,D({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const s=await mt(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(o=>D(D({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Ps(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new by(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>tl(await Ps(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await vy(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xa(n)&&n instanceof Tf){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await ic(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const s=D(D(D({},_y),t),{},{prefix:e||""});return await mt(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=D({},e);return await mt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Ny="2.94.0",Fs={"X-Client-Info":`storage-js/${Ny}`};var Sy=class extends Rn{constructor(e,t={},r,n){const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=D(D({},Fs),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Ps(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Ps(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await mt(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await rl(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await mt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ic(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},ky=class extends Rn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=D(D({},Fs),t);super(n,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await mt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Ps(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ic(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!hy(e))throw new ga("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new cy({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},Ey=class extends Rn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=D(D({},Fs),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Ye.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Ye.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},Cy=class extends Rn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=D(D({},Fs),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},Py=class extends Rn{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=D(D({},Fs),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Ye.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},Ty=class extends Py{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Oy(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},Oy=class extends Ey{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,D(D({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,D(D({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new Ry(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Ry=class extends Cy{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,D(D({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,D(D({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,D(D({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,D(D({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,D(D({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Ay=class extends Sy{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new jy(this.url,this.headers,e,this.fetch)}get vectors(){return new Ty(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ky(this.url+"/iceberg",this.headers,this.fetch)}};const Af="2.94.0",Qr=30*1e3,nl=3,Ga=nl*Qr,Iy="http://localhost:9999",$y="supabase.auth.token",Ly={"X-Client-Info":`gotrue-js/${Af}`},sl="X-Supabase-Api-Version",If={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Uy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Dy=10*60*1e3;class Ts extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function L(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Fy extends Ts{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function By(e){return L(e)&&e.name==="AuthApiError"}class kr extends Ts{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Vt extends Ts{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Je extends Vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ja(e){return L(e)&&e.name==="AuthSessionMissingError"}class Wr extends Vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class oi extends Vt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class li extends Vt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function My(e){return L(e)&&e.name==="AuthImplicitGrantRedirectError"}class Fu extends Vt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zy extends Vt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class il extends Vt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Qa(e){return L(e)&&e.name==="AuthRetryableFetchError"}class Bu extends Vt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class al extends Vt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Mu=` 	
\r=`.split(""),qy=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Mu.length;t+=1)e[Mu[t].charCodeAt(0)]=-2;for(let t=0;t<Gi.length;t+=1)e[Gi[t].charCodeAt(0)]=t;return e})();function zu(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Gi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Gi[n]),t.queuedBits-=6}}function $f(e,t,r){const n=qy[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qu(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Hy(o,n,r)};for(let o=0;o<e.length;o+=1)$f(e.charCodeAt(o),s,i);return t.join("")}function Wy(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Vy(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Wy(n,t)}}function Hy(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function yn(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)$f(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Ky(e){const t=[];return Vy(e,r=>t.push(r)),new Uint8Array(t)}function Tr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>zu(s,r,n)),zu(null,r,n),t.join("")}function Gy(e){return Math.round(Date.now()/1e3)+e}function Jy(){return Symbol("auth-callback")}const Ce=()=>typeof window<"u"&&typeof document<"u",wr={tested:!1,writable:!1},Lf=()=>{if(!Ce())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wr.tested)return wr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),wr.tested=!0,wr.writable=!0}catch{wr.tested=!0,wr.writable=!1}return wr.writable};function Qy(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Uf=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Yy=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Yr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},br=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ee=async(e,t)=>{await e.removeItem(t)};class ya{constructor(){this.promise=new ya.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ya.promiseConstructor=Promise;function ci(e){const t=e.split(".");if(t.length!==3)throw new al("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Uy.test(t[n]))throw new al("JWT not in base64url format");return{header:JSON.parse(qu(t[0])),payload:JSON.parse(qu(t[1])),signature:yn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Xy(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Zy(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function e0(e){return("0"+e.toString(16)).substr(-2)}function t0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,e0).join("")}async function r0(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function n0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await r0(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vr(e,t,r=!1){const n=t0();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Yr(e,`${t}-code-verifier`,s);const i=await n0(n);return[i,n===i?"plain":"s256"]}const s0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function i0(e){const t=e.headers.get(sl);if(!t||!t.match(s0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function a0(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function o0(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const l0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hr(e){if(!l0.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ya(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function c0(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Wu(e){return JSON.parse(JSON.stringify(e))}const Nr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),u0=[502,503,504];async function Vu(e){var t;if(!Yy(e))throw new il(Nr(e),0);if(u0.includes(e.status))throw new il(Nr(e),e.status);let r;try{r=await e.json()}catch(i){throw new kr(Nr(i),i)}let n;const s=i0(e);if(s&&s.getTime()>=If["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Bu(Nr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Je}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Bu(Nr(r),e.status,r.weak_password.reasons);throw new Fy(Nr(r),e.status||500,n)}const d0=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function U(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[sl]||(i[sl]=If["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await h0(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function h0(e,t,r,n,s,i){const o=d0(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new il(Nr(c),0)}if(l.ok||await Vu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Vu(c)}}function ht(e){var t;let r=null;p0(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Gy(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Hu(e){const t=ht(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function er(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function f0(e){return{data:e,error:null}}function m0(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=pa(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Ku(e){return e}function p0(e){return e.access_token&&e.refresh_token&&e.expires_in}const Xa=["global","local","others"];class g0{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Uf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Xa[0]){if(Xa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xa.join(", ")}`);try{return await U(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(L(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await U(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:er})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=pa(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await U(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:m0,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(L(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await U(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:er})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await U(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ku});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(L(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Hr(t);try{return await U(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:er})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Hr(t);try{return await U(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:er})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Hr(t);try{return await U(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:er})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Hr(t.userId);try{const{data:r,error:n}=await U(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(L(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Hr(t.userId),Hr(t.id);try{return{data:await U(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await U(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ku});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(L(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await U(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(L(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await U(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(L(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await U(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(L(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await U(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await U(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(L(r))return{data:null,error:r};throw r}}}function Gu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Kr={debug:!!(globalThis&&Lf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Df extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class x0 extends Df{}async function y0(e,t,r){Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new x0(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Kr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function v0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ff(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function w0(e){return parseInt(e,16)}function b0(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function _0(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=Ff(e.address),y=d?`${d}://${n}`:n,v=e.statement?`${e.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${x}

${v}`;let m=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),l&&(m+=`
Not Before: ${l.toISOString()}`),c&&(m+=`
Request ID: ${c}`),u){let p=`
Resources:`;for(const g of u){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);p+=`
- ${g}`}m+=p}return`${b}
${m}`}class ye extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Ji extends ye{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function j0({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ye({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ye({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ye({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ye({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ye({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ye({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ye({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ye({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Bf(o)){if(i.rp.id!==o)return new ye({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ye({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function N0({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ye({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ye({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Bf(n)){if(r.rpId!==n)return new ye({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class S0{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const k0=new S0;function E0(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=pa(e,["challenge","user","excludeCredentials"]),i=yn(t).buffer,o=Object.assign(Object.assign({},r),{id:yn(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:yn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function C0(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=pa(e,["challenge","allowCredentials"]),s=yn(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:yn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function P0(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Tr(new Uint8Array(e.response.attestationObject)),clientDataJSON:Tr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function T0(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Tr(new Uint8Array(s.authenticatorData)),clientDataJSON:Tr(new Uint8Array(s.clientDataJSON)),signature:Tr(new Uint8Array(s.signature)),userHandle:s.userHandle?Tr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Bf(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ju(){var e,t;return!!(Ce()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function O0(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ji("Browser returned unexpected credential type",t)}:{data:null,error:new Ji("Empty credential response",t)}}catch(t){return{data:null,error:j0({error:t,options:e})}}}async function R0(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ji("Browser returned unexpected credential type",t)}:{data:null,error:new Ji("Empty credential response",t)}}catch(t){return{data:null,error:N0({error:t,options:e})}}}const A0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},I0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qi(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Qi(l,o):n[i]=Qi(o)}else n[i]=o}return n}function $0(e,t){return Qi(A0,e,t||{})}function L0(e,t){return Qi(I0,e,t||{})}class U0{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){var o;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:c};const u=s??k0.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;if(!d.name){const h=n;if(h)d.name=`${d.id}:${h}`;else{const x=(await this.client.getUser()).data.user,y=((o=x==null?void 0:x.user_metadata)===null||o===void 0?void 0:o.name)||(x==null?void 0:x.email)||(x==null?void 0:x.id)||"User";d.name=`${d.id}:${y}`}}d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=$0(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:f}=await O0({publicKey:d,signal:u});return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const d=L0(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:f}=await R0(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(l){return L(l)?{data:null,error:l}:{data:null,error:new kr("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ts("rpId is required for WebAuthn authentication")};try{if(!Ju())return{data:null,error:new kr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return L(o)?{data:null,error:o}:{data:null,error:new kr("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ts("rpId is required for WebAuthn registration")};try{if(!Ju())return{data:null,error:new kr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return L(o)?{data:null,error:o}:{data:null,error:new kr("Unexpected error in register",o)}}}}v0();const D0={url:Iy,storageKey:$y,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ly,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Qu(e,t,r){return await r()}const Gr={};class Os{get jwks(){var t,r;return(r=(t=Gr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Gr[this.storageKey]=Object.assign(Object.assign({},Gr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Gr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Gr[this.storageKey]=Object.assign(Object.assign({},Gr[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},D0),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Os.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Os.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ce()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new g0({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Uf(i.fetch),this.lock=i.lock||Qu,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Ce()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=y0:this.lock=Qu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new U0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Lf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gu(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Gu(this.memoryStorage)),Ce()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Af}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Ce()&&(r=Qy(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ce()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),My(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return L(r)?this._returnResult({error:r}):this._returnResult({error:new kr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:ht}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(L(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Vr(this.storage,this.storageKey)),i=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:x,code_challenge_method:y},xform:ht})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ht})}else throw new oi("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Ee(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),L(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Hu})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Hu})}else throw new oi("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Wr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(L(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,d,h,f;let x,y;if("message"in t)x=t.message,y=t.signature;else{const{chain:v,wallet:b,statement:m,options:p}=t;let g;if(Ce())if(typeof b=="object")g=b;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")g=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=b}const j=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),k=await g.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Ff(k[0]);let E=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const C=await g.request({method:"eth_chainId"});E=w0(C)}const _={domain:j.host,address:S,statement:m,uri:j.href,version:"1",chainId:E,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=p==null?void 0:p.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=p==null?void 0:p.signInWithEthereum)===null||d===void 0?void 0:d.resources};x=_0(_),y=await g.request({method:"personal_sign",params:[b0(x),S]})}try{const{data:v,error:b}=await U(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:y},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ht});if(b)throw b;if(!v||!v.session||!v.user){const m=new Wr;return this._returnResult({data:{user:null,session:null},error:m})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(L(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,f,x;let y,v;if("message"in t)y=t.message,v=t.signature;else{const{chain:b,wallet:m,statement:p,options:g}=t;let j;if(Ce())if(typeof m=="object")j=m;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=m}const k=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),p?{statement:p}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)y=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),v=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:b,error:m}=await U(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Tr(v)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ht});if(m)throw m;if(!b||!b.session||!b.user){const p=new Wr;return this._returnResult({data:{user:null,session:null},error:p})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:m})}catch(b){if(L(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const r=await br(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new zy;const{data:i,error:o}=await U(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ht});if(await Ee(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Wr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),L(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ht}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Wr;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(L(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Vr(this.storage,this.storageKey));const{error:h}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new oi("You must provide either an email or phone number.")}catch(l){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),L(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await U(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ht});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(L(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Vr(this.storage,this.storageKey));const u=await U(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:f0});return!((i=u.data)===null||i===void 0)&&i.url&&Ce()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),L(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Je;const{error:s}=await U(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(L(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await U(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await U(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new oi("You must provide either an email or phone number and a type")}catch(r){if(L(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await br(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ga:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await br(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ya()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=c0(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:er}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Je}:await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:er})})}catch(r){if(L(r))return Ja(r)&&(await this._removeSession(),await Ee(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Je;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Vr(this.storage,this.storageKey));const{data:u,error:d}=await U(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:er});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),L(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Je;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=ci(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(L(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Je;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(L(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ce())throw new li("No browser detected.");if(t.error||t.error_description||t.error_code)throw new li(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Fu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new li("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Fu("No code detected.");const{data:p,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new li("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const x=f-d;x*1e3<=Qr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const m={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:t.type},error:null})}catch(n){if(L(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await br(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i&&!Ja(i))return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(By(l)&&(l.status===404||l.status===401||l.status===403)||Ja(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Ee(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Jy(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Vr(this.storage,this.storageKey,!0));try{return await U(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),L(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await U(this.fetch,"GET",x,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ce()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(L(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ht}),{data:f,error:x}=h;return x?this._returnResult({data:{user:null,session:null},error:x}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Wr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:x}))}catch(s){if(await Ee(this.storage,`${this.storageKey}-code-verifier`),L(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await U(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Zy(async s=>(s>0&&await Xy(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await U(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ht})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Qa(i)&&Date.now()+o-n<Qr})}catch(n){if(this._debug(r,"error",n),L(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ce()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await br(this.storage,this.storageKey);if(s&&this.userStorage){let o=await br(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Yr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ya()}else if(s&&!s.user&&!s.user){const o=await br(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Ee(this.storage,this.storageKey+"-user"),await Yr(this.storage,this.storageKey,s)):s.user=Ya()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ga;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ga}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Qa(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Je;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ya;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Je;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),L(i)){const o={data:null,error:i};return Qa(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ee(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Yr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Wu(s);await Yr(this.storage,this.storageKey,i)}else{const s=Wu(r);await Yr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ee(this.storage,this.storageKey),await Ee(this.storage,this.storageKey+"-code-verifier"),await Ee(this.storage,this.storageKey+"-user"),this.userStorage&&await Ee(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ce()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Qr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Qr}ms, refresh threshold is ${nl} ticks`),s<=nl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Df)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ce()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Vr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await U(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await U(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?P0(t.webauthn.credential_response):T0(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await U(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await U(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:E0(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:C0(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,s,i;if(t)try{const{payload:x}=ci(t);let y=null;x.aal&&(y=x.aal);let v=y;const{data:{user:b},error:m}=await this.getUser(t);if(m)return this._returnResult({data:null,error:m});((n=(r=b==null?void 0:b.factors)===null||r===void 0?void 0:r.filter(j=>j.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(v="aal2");const g=x.amr||[];return{data:{currentLevel:y,nextLevel:v,currentAuthenticationMethods:g},error:null}}catch(x){if(L(x))return this._returnResult({data:null,error:x});throw x}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=ci(o.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(x=>x.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const f=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await U(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Je})})}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Je});const o=await U(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ce()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Je});const o=await U(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ce()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await U(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Je})})}catch(t){if(L(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await U(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Je})})}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Dy>s)return n;const{data:i,error:o}=await U(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:y}=await this.getSession();if(y||!x.session)return this._returnResult({data:null,error:y});n=x.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=ci(n);r!=null&&r.allowExpired||a0(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:o},error:null}}const d=o0(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Ky(`${l}.${c}`)))throw new al("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}}}Os.nextInstanceID={};const F0=Os,B0="2.94.0";let Kn="";typeof Deno<"u"?Kn="deno":typeof document<"u"?Kn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kn="react-native":Kn="node";const M0={"X-Client-Info":`supabase-js-${Kn}/${B0}`},z0={headers:M0},q0={schema:"public"},W0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},V0={};function Rs(e){"@babel/helpers - typeof";return Rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(e)}function H0(e,t){if(Rs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K0(e){var t=H0(e,"string");return Rs(t)=="symbol"?t:t+""}function G0(e,t,r){return(t=K0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yu(Object(r),!0).forEach(function(n){G0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const J0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Q0=()=>Headers,Y0=(e,t,r)=>{const n=J0(r),s=Q0();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,he(he({},o),{},{headers:u}))}};function X0(e){return e.endsWith("/")?e:e+"/"}function Z0(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:he(he({},c),s),auth:he(he({},u),i),realtime:he(he({},d),o),storage:{},global:he(he(he({},h),l),{},{headers:he(he({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function ev(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(X0(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var tv=class extends F0{constructor(e){super(e)}},rv=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=ev(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:q0,realtime:V0,auth:he(he({},W0),{},{storageKey:o}),global:z0},c=Z0(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=Y0(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(he({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Bx(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new Ay(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Rx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tv({url:this.authUrl.href,headers:he(he({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ny(this.realtimeUrl.href,he(he({},e),{},{params:he(he({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const nv=(e,t,r)=>new rv(e,t,r);function sv(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}sv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iv="https://cchzmumfqnknqicrsaop.supabase.co",av="sb_publishable_C_JZjQMDiz4H6Rp54hVQ1Q_Mf1vZgx9",F=nv(iv,av),Xu=new Map,Zu=(e,t=5,r=15*60*1e3)=>{const n=Date.now(),s=Xu.get(e);return!s||n>s.resetTime?(Xu.set(e,{count:1,resetTime:n+r}),!0):s.count>=t?!1:(s.count++,!0)},ed=(e,t)=>`${e}:${t}`,Mf=w.createContext(null),Ot=()=>{const e=w.useContext(Mf);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},ov=({children:e})=>{const[t,r]=w.useState({user:null,isAuthenticated:!1,isAdmin:!1,isSeller:!1,loading:!0});w.useEffect(()=>{F.auth.getSession().then(async({data:{session:l}})=>{if(l!=null&&l.user){const{data:c}=await F.from("sellers").select("status").eq("user_id",l.user.id).single(),u=(c==null?void 0:c.status)==="active";r({user:{id:l.user.id,email:l.user.email,name:l.user.user_metadata.name||l.user.email,role:l.user.user_metadata.role||"customer",created_at:l.user.created_at},isAuthenticated:!0,isAdmin:l.user.user_metadata.role==="admin",isSeller:u,loading:!1})}else r(c=>({...c,loading:!1}))});const{data:{subscription:o}}=F.auth.onAuthStateChange(async(l,c)=>{if(c!=null&&c.user){const{data:u}=await F.from("sellers").select("status").eq("user_id",c.user.id).single(),d=(u==null?void 0:u.status)==="active";r({user:{id:c.user.id,email:c.user.email,name:c.user.user_metadata.name||c.user.email,role:c.user.user_metadata.role||"customer",created_at:c.user.created_at},isAuthenticated:!0,isAdmin:c.user.user_metadata.role==="admin",isSeller:d,loading:!1})}else r({user:null,isAuthenticated:!1,isAdmin:!1,isSeller:!1,loading:!1})});return()=>o.unsubscribe()},[]);const n=async(o,l)=>{const c=ed("login",o);if(!Zu(c,5,15*60*1e3))throw new Error("Too many login attempts. Please try again in 15 minutes.");const{error:u}=await F.auth.signInWithPassword({email:o,password:l});if(u)throw u},s=async()=>{const{error:o}=await F.auth.signOut();if(o)throw o},i=async(o,l,c)=>{const u=ed("register",o);if(!Zu(u,3,60*60*1e3))throw new Error("Too many registration attempts. Please try again later.");const{data:d,error:h}=await F.auth.signUp({email:o,password:l,options:{data:{name:c,role:"customer"},emailRedirectTo:window.location.origin}});if(h)throw h;if(!d.user)throw new Error("Registration failed - no user returned")};return a.jsx(Mf.Provider,{value:{auth:t,login:n,logout:s,register:i},children:e})},zf=w.createContext(null),An=()=>{const e=w.useContext(zf);if(!e)throw new Error("useCart must be used within CartProvider");return e},lv=({children:e})=>{const[t,r]=w.useState([]);w.useEffect(()=>{const c=localStorage.getItem("cart");c&&r(JSON.parse(c))},[]),w.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(t))},[t]);const n=(c,u=1)=>{r(d=>d.find(f=>f.id===c.id)?d.map(f=>f.id===c.id?{...f,quantity:f.quantity+u}:f):[...d,{id:c.id,name:c.name,price:c.price,quantity:u,image:c.image,product_type:c.product_type,stock_quantity:c.stock_quantity,seller_id:c.seller_id}])},s=c=>{r(u=>u.filter(d=>d.id!==c))},i=(c,u)=>{if(u<=0){s(c);return}r(d=>d.map(h=>h.id===c?{...h,quantity:u}:h))},o=()=>{r([])},l={subtotal:t.reduce((c,u)=>c+u.price*u.quantity,0),shipping:t.length>0?9.99:0,tax:t.reduce((c,u)=>c+u.price*u.quantity,0)*.15,total:0,itemCount:t.reduce((c,u)=>c+u.quantity,0)};return l.total=l.subtotal+l.shipping+l.tax,a.jsx(zf.Provider,{value:{cart:t,cartSummary:l,addToCart:n,removeFromCart:s,updateQuantity:i,clearCart:o},children:e})},qf=w.createContext(void 0),cv=({children:e})=>{const[t,r]=w.useState([]);w.useEffect(()=>{const l=localStorage.getItem("wishlist");l&&r(JSON.parse(l))},[]),w.useEffect(()=>{localStorage.setItem("wishlist",JSON.stringify(t))},[t]);const n=l=>{r(c=>c.find(u=>u.id===l.id)?c:[...c,l])},s=l=>{r(c=>c.filter(u=>u.id!==l))},i=l=>t.some(c=>c.id===l),o=()=>{r([])};return a.jsx(qf.Provider,{value:{wishlist:t,addToWishlist:n,removeFromWishlist:s,isInWishlist:i,clearWishlist:o},children:e})},Wf=()=>{const e=w.useContext(qf);if(!e)throw new Error("useWishlist must be used within WishlistProvider");return e},Vf=w.createContext(void 0),Mr=()=>{const e=w.useContext(Vf);if(!e)throw new Error("useToast must be used within ToastProvider");return e},uv=({children:e})=>{const[t,r]=w.useState([]),n=w.useCallback((d,h)=>{const f=Date.now().toString();r(x=>[...x,{id:f,message:d,type:h}]),setTimeout(()=>{r(x=>x.filter(y=>y.id!==f))},5e3)},[]),s=w.useCallback(d=>n(d,"success"),[n]),i=w.useCallback(d=>n(d,"error"),[n]),o=w.useCallback(d=>n(d,"warning"),[n]),l=w.useCallback(d=>n(d,"info"),[n]),c=d=>{switch(d){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";case"info":return"bg-blue-500 text-white"}},u=d=>{switch(d){case"success":return"";case"error":return"";case"warning":return"";case"info":return""}};return a.jsxs(Vf.Provider,{value:{showToast:n,showSuccess:s,showError:i,showWarning:o,showInfo:l},children:[e,a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(d=>a.jsxs("div",{className:`${c(d.type)} px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 animate-slide-in`,children:[a.jsx("span",{className:"text-xl",children:u(d.type)}),a.jsx("span",{children:d.message})]},d.id))})]})},dv=()=>{var c;const{auth:e,logout:t}=Ot(),{cartSummary:r}=An(),[n,s]=w.useState(!1),[i,o]=w.useState(""),l=u=>{u.key==="Enter"&&i.trim()&&(window.location.href=`/products?search=${encodeURIComponent(i.trim())}`)};return a.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"flex justify-between items-center py-4",children:[a.jsxs(V,{to:"/",className:"flex items-center space-x-3",children:[a.jsx("i",{className:"fas fa-shopping-bag text-3xl text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-dark",children:"Yegna Market"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Premium E-commerce"})]})]}),a.jsx("div",{className:"hidden md:flex flex-1 max-w-lg mx-8",children:a.jsx("div",{className:"relative w-full",children:a.jsx("input",{type:"text",value:i,onChange:u=>o(u.target.value),onKeyPress:l,placeholder:"Search products...",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})})}),a.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[a.jsxs(V,{to:"/",className:"text-gray-700 hover:text-primary transition font-medium",children:[a.jsx("i",{className:"fas fa-home mr-2"}),"Home"]}),a.jsxs(V,{to:"/products",className:"text-gray-700 hover:text-primary transition font-medium",children:[a.jsx("i",{className:"fas fa-box mr-2"}),"Products"]}),e.isAuthenticated?a.jsxs(a.Fragment,{children:[!e.isSeller&&a.jsxs(a.Fragment,{children:[a.jsxs(V,{to:"/wishlist",className:"text-gray-700 hover:text-primary transition font-medium",children:[a.jsx("i",{className:"fas fa-heart mr-2"}),"Wishlist"]}),a.jsxs(V,{to:"/my-orders",className:"text-gray-700 hover:text-primary transition font-medium",children:[a.jsx("i",{className:"fas fa-receipt mr-2"}),"My Orders"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:["Hi, ",(c=e.user)==null?void 0:c.name]}),a.jsxs("button",{onClick:t,className:"text-gray-700 hover:text-primary transition font-medium",children:[a.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),"Logout"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(V,{to:"/login",className:"text-gray-700 hover:text-primary transition font-medium",children:[a.jsx("i",{className:"fas fa-user mr-2"}),"Login"]}),a.jsx(V,{to:"/register",className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition",children:"Sign Up"})]}),!e.isSeller&&a.jsxs(V,{to:"/cart",className:"relative text-gray-700 hover:text-primary transition",children:[a.jsx("i",{className:"fas fa-shopping-cart text-xl"}),r.itemCount>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:r.itemCount})]}),e.isAdmin&&a.jsxs(V,{to:"/admin",className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition",children:[a.jsx("i",{className:"fas fa-cog mr-2"}),"Admin"]}),e.isSeller&&a.jsxs(V,{to:"/seller",className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition",children:[a.jsx("i",{className:"fas fa-store mr-2"}),"My Shop"]}),e.isAuthenticated&&!e.isSeller&&!e.isAdmin&&a.jsxs(V,{to:"/become-seller",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition",children:[a.jsx("i",{className:"fas fa-store mr-2"}),"Sell"]})]}),a.jsx("button",{onClick:()=>s(!n),className:"md:hidden text-gray-700 hover:text-primary",children:a.jsx("i",{className:"fas fa-bars text-xl"})})]}),n&&a.jsx("div",{className:"md:hidden border-t border-gray-200 py-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"relative",children:a.jsx("input",{type:"text",value:i,onChange:u=>o(u.target.value),onKeyPress:l,placeholder:"Search products...",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(V,{to:"/",className:"block py-2 text-gray-700 hover:text-primary transition",children:[a.jsx("i",{className:"fas fa-home mr-3"}),"Home"]}),a.jsxs(V,{to:"/products",className:"block py-2 text-gray-700 hover:text-primary transition",children:[a.jsx("i",{className:"fas fa-box mr-3"}),"Products"]}),!e.isSeller&&a.jsxs(V,{to:"/cart",className:"block py-2 text-gray-700 hover:text-primary transition",children:[a.jsx("i",{className:"fas fa-shopping-cart mr-3"}),"Cart (",r.itemCount,")"]}),e.isAuthenticated?a.jsxs(a.Fragment,{children:[!e.isSeller&&a.jsxs(a.Fragment,{children:[a.jsxs(V,{to:"/wishlist",className:"block py-2 text-gray-700 hover:text-primary transition",children:[a.jsx("i",{className:"fas fa-heart mr-3"}),"Wishlist"]}),a.jsxs(V,{to:"/my-orders",className:"block py-2 text-gray-700 hover:text-primary transition",children:[a.jsx("i",{className:"fas fa-receipt mr-3"}),"My Orders"]})]}),a.jsxs("button",{onClick:t,className:"block w-full text-left py-2 text-gray-700 hover:text-primary transition",children:[a.jsx("i",{className:"fas fa-sign-out-alt mr-3"}),"Logout"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(V,{to:"/login",className:"block w-full text-left py-2 text-gray-700 hover:text-primary transition",children:[a.jsx("i",{className:"fas fa-user mr-3"}),"Login"]}),a.jsxs(V,{to:"/register",className:"block w-full text-left py-2 text-primary font-semibold",children:[a.jsx("i",{className:"fas fa-user-plus mr-3"}),"Sign Up"]})]}),e.isAdmin&&a.jsxs(V,{to:"/admin",className:"block py-2 text-primary font-semibold",children:[a.jsx("i",{className:"fas fa-cog mr-3"}),"Admin Panel"]}),e.isSeller&&a.jsxs(V,{to:"/seller",className:"block py-2 text-green-600 font-semibold",children:[a.jsx("i",{className:"fas fa-store mr-3"}),"My Shop"]}),e.isAuthenticated&&!e.isSeller&&!e.isAdmin&&a.jsxs(V,{to:"/become-seller",className:"block py-2 text-purple-600 font-semibold",children:[a.jsx("i",{className:"fas fa-store mr-3"}),"Become a Seller"]})]})]})})]})})},hv=()=>a.jsx("footer",{className:"bg-gray-900 text-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("i",{className:"fas fa-shopping-bag text-2xl text-blue-400"}),a.jsx("h3",{className:"text-xl font-bold",children:"Yegna Market"})]}),a.jsx("p",{className:"text-gray-400",children:"Your premium e-commerce destination for quality products and exceptional service."}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:a.jsx("i",{className:"fab fa-facebook-f"})}),a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:a.jsx("i",{className:"fab fa-twitter"})}),a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:a.jsx("i",{className:"fab fa-instagram"})}),a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:a.jsx("i",{className:"fab fa-linkedin-in"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(V,{to:"/",className:"text-gray-400 hover:text-white transition",children:"Home"})}),a.jsx("li",{children:a.jsx(V,{to:"/products",className:"text-gray-400 hover:text-white transition",children:"Products"})}),a.jsx("li",{children:a.jsx(V,{to:"/cart",className:"text-gray-400 hover:text-white transition",children:"Cart"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:"About Us"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Customer Service"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:"Contact Us"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:"Shipping Info"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:"Returns"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:"FAQ"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Newsletter"}),a.jsx("p",{className:"text-gray-400 mb-4",children:"Subscribe to get updates on new products and offers."}),a.jsxs("div",{className:"flex",children:[a.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-2 rounded-l-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-blue-500"}),a.jsx("button",{className:"bg-blue-600 px-4 py-2 rounded-r-lg hover:bg-blue-700 transition",children:a.jsx("i",{className:"fas fa-paper-plane"})})]})]})]}),a.jsxs("div",{className:"border-t border-gray-800 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center",children:[a.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",new Date().getFullYear()," Yegna Market. All rights reserved."]}),a.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition",children:"Privacy Policy"}),a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition",children:"Terms of Service"}),a.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition",children:"Cookie Policy"})]})]})]})}),fv=()=>{const{pathname:e}=On();return w.useEffect(()=>{window.scrollTo(0,0)},[e]),null},Hf=({product:e,viewMode:t="grid"})=>{const{addToCart:r}=An(),{addToWishlist:n,removeFromWishlist:s,isInWishlist:i}=Wf(),{auth:o}=Ot(),l=i(e.id),c=()=>{l?s(e.id):n(e)},u=f=>f>20?"bg-green-100 text-green-800":f>5?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",d=f=>f>20?"In Stock":f>5?"Low Stock":f>0?"Very Low Stock":"Out of Stock",h=(f=0)=>{let x="";for(let y=1;y<=5;y++)y<=Math.floor(f)?x+="":(y===Math.ceil(f)&&Number.isInteger(f),x+="");return x};return t==="list"?a.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden card-hover fade-in",children:a.jsxs("div",{className:"p-6 flex items-center space-x-6",children:[a.jsx("div",{className:"text-6xl",children:e.image}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.name}),a.jsx("p",{className:"text-gray-600 mb-3",children:e.description}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[a.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e.category_name}),a.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded",children:e.product_type}),a.jsx("span",{className:`${u(e.stock_quantity)} px-2 py-1 rounded`,children:d(e.stock_quantity)})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-3xl font-bold text-primary mb-3",children:[e.price," Birr"]}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[!o.isSeller&&a.jsxs("button",{onClick:()=>r(e),className:"bg-primary text-white px-6 py-3 rounded-lg hover:bg-secondary transition font-semibold",children:[a.jsx("i",{className:"fas fa-cart-plus mr-2"}),"Add to Cart"]}),a.jsx(V,{to:`/product/${e.id}`,className:"bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition text-center",children:"View Details"})]})]})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden card-hover fade-in group relative",children:[!o.isSeller&&a.jsx("button",{onClick:c,className:`absolute top-4 right-4 z-10 w-10 h-10 bg-white rounded-full shadow-md flex items-center justify-center transition-all transform hover:scale-110 ${l?"text-red-500":"text-gray-400 hover:text-red-500"}`,children:a.jsx("i",{className:`fas fa-heart ${l?"fas":"far"}`})}),a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:e.image}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.name}),a.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:[e.description.substring(0,80),"..."]}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("span",{className:"text-2xl font-bold text-primary",children:[e.price," Birr"]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${u(e.stock_quantity)}`,children:d(e.stock_quantity)})]}),a.jsxs("div",{className:"flex items-center justify-center mb-4",children:[a.jsx("div",{className:"flex text-yellow-400 text-sm mr-2",children:h(e.rating)}),a.jsxs("span",{className:"text-gray-600 text-sm",children:["(",e.review_count||0,")"]})]}),a.jsxs("div",{className:"flex space-x-2",children:[!o.isSeller&&a.jsxs("button",{onClick:()=>r(e),className:"flex-1 bg-primary text-white py-3 rounded-lg hover:bg-secondary transition font-semibold",children:[a.jsx("i",{className:"fas fa-cart-plus mr-2"}),"Add to Cart"]}),a.jsx(V,{to:`/product/${e.id}`,className:`${o.isSeller?"flex-1":"w-12"} bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition flex items-center justify-center`,children:a.jsx("i",{className:"fas fa-eye"})})]})]})]})};class mv{constructor(){lc(this,"isDevelopment",!1)}formatLog(t){return`[${t.timestamp}] [${t.level.toUpperCase()}] ${t.context?`[${t.context}] `:""}${t.message}`}createEntry(t,r,n,s,i){return{timestamp:new Date().toISOString(),level:t,message:r,context:n,data:s,error:i}}info(t,r,n){const s=this.createEntry("info",t,r,n);console.log(this.formatLog(s),n||"")}warn(t,r,n){const s=this.createEntry("warn",t,r,n);console.warn(this.formatLog(s),n||"")}error(t,r,n,s){const i=this.createEntry("error",t,n,s,r);console.error(this.formatLog(i),r||"",s||""),!this.isDevelopment&&r&&this.sendToErrorTracking(i)}debug(t,r,n){if(this.isDevelopment){const s=this.createEntry("debug",t,r,n);console.debug(this.formatLog(s),n||"")}}sendToErrorTracking(t){}}const I=new mv;class vn extends Error{constructor(t,r,n=500,s=!0){super(t),this.code=r,this.statusCode=n,this.isOperational=s,this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}class tr extends vn{constructor(t,r){super(t,"VALIDATION_ERROR",400),this.field=r}}class vt extends vn{constructor(t,r){super(t,"DATABASE_ERROR",500),this.originalError=r}}class Kf extends vn{constructor(t){super(`${t} not found`,"NOT_FOUND",404)}}const it=e=>e instanceof vn?e:e instanceof Error?new vn(e.message,"UNKNOWN_ERROR",500):new vn("An unknown error occurred","UNKNOWN_ERROR",500);class Lt{static async getProducts(t){try{I.debug("Fetching products","ProductService",{filters:t});let r=F.from("products").select(`
          *,
          categories (name, icon),
          sellers (shop_name, rating, total_sales)
        `).eq("status","active");t!=null&&t.category&&(r=r.eq("categories.name",t.category)),t!=null&&t.seller_id&&(r=r.eq("seller_id",t.seller_id));const{data:n,error:s}=await r;if(s)throw I.error("Failed to fetch products",s,"ProductService",{filters:t}),new vt("Failed to load products",s);const o=n.map(l=>{var c,u,d,h;return{...l,category_name:((c=l.categories)==null?void 0:c.name)||"Uncategorized",seller_name:((u=l.sellers)==null?void 0:u.shop_name)||"Unknown Seller",seller_rating:((d=l.sellers)==null?void 0:d.rating)||0,seller_sales:((h=l.sellers)==null?void 0:h.total_sales)||0}}).sort((l,c)=>l.stock_quantity>0&&c.stock_quantity===0?-1:l.stock_quantity===0&&c.stock_quantity>0?1:l.seller_rating!==c.seller_rating?c.seller_rating-l.seller_rating:l.seller_sales!==c.seller_sales?c.seller_sales-l.seller_sales:new Date(c.created_at).getTime()-new Date(l.created_at).getTime());return I.info(`Fetched ${o.length} products`,"ProductService"),o}catch(r){throw it(r)}}static async getProduct(t){var r,n;try{I.debug("Fetching product","ProductService",{id:t});const{data:s,error:i}=await F.from("products").select(`
          *,
          categories (name, icon),
          sellers (shop_name)
        `).eq("id",t).eq("status","active").single();if(i)throw I.error("Failed to fetch product",i,"ProductService",{id:t}),new Kf("Product");return I.info(`Fetched product: ${s.name}`,"ProductService"),{...s,category_name:((r=s.categories)==null?void 0:r.name)||"Uncategorized",seller_name:((n=s.sellers)==null?void 0:n.shop_name)||"Unknown Seller"}}catch(s){throw it(s)}}static async getFeaturedProducts(t=4){try{I.debug("Fetching featured products","ProductService",{limit:t});const{data:r,error:n}=await F.from("products").select(`
          *,
          categories (name, icon),
          sellers (shop_name)
        `).eq("status","active").limit(t);if(n)throw I.error("Failed to fetch featured products",n,"ProductService"),new vt("Failed to load featured products",n);return I.info(`Fetched ${r.length} featured products`,"ProductService"),r.map(s=>{var i,o;return{...s,category_name:((i=s.categories)==null?void 0:i.name)||"Uncategorized",seller_name:((o=s.sellers)==null?void 0:o.shop_name)||"Unknown Seller"}})}catch(r){throw it(r)}}static async getCategories(){try{I.debug("Fetching categories","ProductService");const{data:t,error:r}=await F.from("categories").select("*").order("name");if(r)throw I.error("Failed to fetch categories",r,"ProductService"),new vt("Failed to load categories",r);return I.info(`Fetched ${t.length} categories`,"ProductService"),t}catch(t){throw it(t)}}static async createProduct(t){try{if(I.info("Creating product","ProductService",{name:t.name}),!t.name||!t.price||!t.seller_id)throw new tr("Missing required product fields");const{data:r,error:n}=await F.from("products").insert(t).select().single();if(n)throw I.error("Failed to create product",n,"ProductService",t),new vt("Failed to create product",n);return I.info(`Product created: ${r.name} (ID: ${r.id})`,"ProductService"),r}catch(r){throw it(r)}}}class Gn{static async getSeller(t){try{I.debug("Fetching seller","SellerService",{userId:t});const{data:r,error:n}=await F.from("sellers").select("*").eq("user_id",t).single();return n?(I.warn("Seller not found","SellerService",{userId:t}),null):(I.info(`Fetched seller: ${r.shop_name}`,"SellerService"),r)}catch(r){return I.error("Error fetching seller",r,"SellerService",{userId:t}),null}}static async createSeller(t){try{if(I.info("Creating seller","SellerService",{shop_name:t.shop_name}),!t.user_id||!t.shop_name)throw new tr("Missing required seller fields");const{data:r,error:n}=await F.from("sellers").insert(t).select().single();if(n)throw I.error("Failed to create seller",n,"SellerService",t),new vt("Failed to create seller",n);return I.info(`Seller created: ${r.shop_name} (ID: ${r.id})`,"SellerService"),r}catch(r){throw it(r)}}static async getSellerProducts(t){try{I.debug("Fetching seller products","SellerService",{sellerId:t});const{data:r,error:n}=await F.from("products").select(`
          *,
          categories (name, icon)
        `).eq("seller_id",t);if(n)throw I.error("Failed to fetch seller products",n,"SellerService",{sellerId:t}),new vt("Failed to load seller products",n);return I.info(`Fetched ${r.length} products for seller ${t}`,"SellerService"),r.map(s=>{var i;return{...s,category_name:((i=s.categories)==null?void 0:i.name)||"Uncategorized"}})}catch(r){throw it(r)}}static async isSellerEmail(t){try{I.debug("Checking if email is seller","SellerService",{email:t});const{count:r,error:n}=await F.from("sellers").select("id",{count:"exact",head:!0}).eq("email",t.trim()).eq("status","active");if(n)return I.warn("Error checking seller email","SellerService",{email:t,error:n.message}),!1;const s=(r||0)>0;return I.debug(`Email ${t} is ${s?"":"not "}a seller`,"SellerService"),s}catch(r){return I.error("Error checking seller email",r,"SellerService",{email:t}),!1}}static async updateOrderStatus(t,r){try{if(I.info("Updating order status","SellerService",{orderId:t,status:r}),r==="delivered"){const{data:s,error:i}=await F.from("order_items").select("product_id, quantity").eq("seller_order_id",t);if(i)I.error("Failed to fetch order items for stock reduction",i,"SellerService",{orderId:t});else if(s)for(const o of s){const{error:l}=await F.rpc("reduce_product_stock",{p_product_id:o.product_id,p_quantity:o.quantity});l&&I.warn("Failed to reduce stock","SellerService",{product_id:o.product_id,error:l})}}const{error:n}=await F.from("seller_orders").update({status:r}).eq("id",t);if(n)throw I.error("Failed to update order status",n,"SellerService",{orderId:t,status:r}),new vt("Failed to update order status",n);I.info(`Order ${t} status updated to ${r}`,"SellerService")}catch(n){throw it(n)}}}class Jn{static async createOrder(t){try{if(I.info("Creating order","OrderService",{customer:t.customer_name,total:t.total_amount,items_count:t.items.length}),!t.customer_name||!t.customer_email||!t.items.length)throw new tr("Missing required order fields");const r=t.items.reduce((i,o)=>(i[o.seller_id]||(i[o.seller_id]=[]),i[o.seller_id].push(o),i),{});I.debug("Items grouped by seller","OrderService",{seller_count:Object.keys(r).length});const{data:n,error:s}=await F.from("orders").insert({customer_name:t.customer_name,customer_email:t.customer_email,total_amount:t.total_amount,payment_method:t.payment_method,shipping_address:t.shipping_address,payment_status:"paid"}).select().single();if(s)throw I.error("Failed to create main order",s,"OrderService",t),new vt("Failed to create order",s);I.info(`Main order created (ID: ${n.id})`,"OrderService");for(const[i,o]of Object.entries(r)){const l=o.reduce((f,x)=>f+x.price*x.quantity,0);I.debug("Creating seller order","OrderService",{sellerId:i,subtotal:l,items_count:o.length});const{data:c,error:u}=await F.from("seller_orders").insert({order_id:n.id,seller_id:parseInt(i),subtotal:l,status:"pending"}).select().single();if(u)throw I.error("Failed to create seller order",u,"OrderService",{sellerId:i,order_id:n.id}),new vt("Failed to create seller order",u);const d=o.map(f=>({seller_order_id:c.id,product_id:f.product_id,product_name:f.product_name,product_image:f.product_image,quantity:f.quantity,price:f.price})),{error:h}=await F.from("order_items").insert(d);if(h)throw I.error("Failed to create order items",h,"OrderService",{seller_order_id:c.id}),new vt("Failed to create order items",h);I.info(`Seller order created for seller ${i} (ID: ${c.id})`,"OrderService")}return I.info(`Order ${n.id} created successfully`,"OrderService"),{order_id:n.id}}catch(r){throw it(r)}}static async getOrder(t){var r;try{I.debug("Fetching order","OrderService",{id:t});const{data:n,error:s}=await F.from("orders").select(`
          *,
          seller_orders (
            *,
            sellers (shop_name),
            order_items (*)
          )
        `).eq("id",t).single();if(s)throw I.error("Failed to fetch order",s,"OrderService",{id:t}),new Kf("Order");return I.info(`Fetched order ${t}`,"OrderService"),{...n,seller_orders:(r=n.seller_orders)==null?void 0:r.map(i=>{var o;return{...i,seller_name:(o=i.sellers)==null?void 0:o.shop_name,items:i.order_items}})}}catch(n){throw it(n)}}static async getOrders(){try{I.debug("Fetching all orders","OrderService");const{data:t,error:r}=await F.from("orders").select("*").order("created_at",{ascending:!1});return r?(I.error("Failed to fetch orders",r,"OrderService"),[]):(I.info(`Fetched ${(t==null?void 0:t.length)||0} orders`,"OrderService"),t||[])}catch(t){return I.error("Error fetching orders",t,"OrderService"),[]}}static async getSellerOrders(t){try{I.debug("Fetching seller orders","OrderService",{sellerId:t});const{data:r,error:n}=await F.from("seller_orders").select(`
          *,
          orders (customer_name, customer_email, shipping_address),
          order_items (*)
        `).eq("seller_id",t).order("created_at",{ascending:!1});if(n)throw I.error("Failed to fetch seller orders",n,"OrderService",{sellerId:t}),new vt("Failed to load seller orders",n);return I.info(`Fetched ${r.length} orders for seller ${t}`,"OrderService"),r.map(s=>({...s,items:s.order_items}))}catch(r){throw it(r)}}}const yt={getProducts:Lt.getProducts,getProduct:Lt.getProduct,getFeaturedProducts:Lt.getFeaturedProducts,getCategories:Lt.getCategories,createProduct:Lt.createProduct,getSeller:Gn.getSeller,createSeller:Gn.createSeller,getSellerProducts:Gn.getSellerProducts,isSellerEmail:Gn.isSellerEmail,createOrder:Jn.createOrder,getOrder:Jn.getOrder,getOrders:Jn.getOrders,getSellerOrders:Jn.getSellerOrders},pv=()=>{const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState({products:0,customers:0,orders:0});w.useEffect(()=>{c(),u()},[]);const c=async()=>{try{const[d,h]=await Promise.all([Lt.getFeaturedProducts(4),Lt.getCategories()]);t(d),n(h)}catch(d){console.error("Failed to load homepage data:",d)}finally{i(!1)}},u=()=>{const f=33.333333333333336;Object.entries({products:587,customers:12456,orders:51234}).forEach(([y,v])=>{let b=0;const m=v/60,p=setInterval(()=>{b+=m,b>=v&&(b=v,clearInterval(p)),l(g=>({...g,[y]:Math.floor(b)}))},f)})};return a.jsxs("div",{className:"bg-light font-inter",children:[a.jsxs("section",{className:"hero-gradient text-white relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-white/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute -bottom-32 -left-32 w-80 h-80 bg-accent/20 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-primary/10 rounded-full blur-3xl"})]}),a.jsx("div",{className:"container mx-auto px-4 py-32 relative z-10",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center fade-in",children:[a.jsxs("h1",{className:"text-6xl md:text-7xl font-bold mb-6 leading-tight",children:["Elevate Your",a.jsx("span",{className:"bg-gradient-to-r from-yellow-300 to-pink-300 bg-clip-text text-transparent",children:" Shopping"}),"Experience"]}),a.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90 leading-relaxed",children:"Discover curated products with intelligent recommendations. Fast, secure, and personalized just for you."}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[a.jsxs(V,{to:"/products",className:"group bg-white text-primary px-8 py-4 rounded-2xl font-semibold hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[a.jsx("i",{className:"fas fa-rocket mr-3 group-hover:animate-bounce"}),"Start Shopping Now"]}),a.jsxs("a",{href:"#features",className:"group border-2 border-white text-white px-8 py-4 rounded-2xl font-semibold hover:bg-white hover:text-primary transition-all duration-300",children:[a.jsx("i",{className:"fas fa-play-circle mr-3 group-hover:animate-pulse"}),"Watch Demo"]})]}),a.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8 mt-12 opacity-80",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("i",{className:"fas fa-shield-alt text-green-300"}),a.jsx("span",{className:"text-sm",children:"Secure Payments"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("i",{className:"fas fa-shipping-fast text-blue-300"}),a.jsx("span",{className:"text-sm",children:"Free Shipping"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("i",{className:"fas fa-star text-yellow-300"}),a.jsx("span",{className:"text-sm",children:"5-Star Reviews"})]})]})]})}),a.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:a.jsx("i",{className:"fas fa-chevron-down text-white text-2xl"})})]}),a.jsx("section",{className:"bg-white py-8 shadow-sm",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[a.jsxs("div",{className:"fade-in",children:[a.jsxs("div",{className:"text-3xl font-bold text-primary mb-2",children:[o.products,"+"]}),a.jsx("div",{className:"text-gray-600 text-sm font-medium",children:"Premium Products"})]}),a.jsxs("div",{className:"fade-in",children:[a.jsxs("div",{className:"text-3xl font-bold text-accent mb-2",children:[o.customers.toLocaleString(),"+"]}),a.jsx("div",{className:"text-gray-600 text-sm font-medium",children:"Happy Customers"})]}),a.jsxs("div",{className:"fade-in",children:[a.jsxs("div",{className:"text-3xl font-bold text-green-500 mb-2",children:[o.orders.toLocaleString(),"+"]}),a.jsx("div",{className:"text-gray-600 text-sm font-medium",children:"Orders Delivered"})]}),a.jsxs("div",{className:"fade-in",children:[a.jsx("div",{className:"text-3xl font-bold text-orange-500 mb-2",children:"24/7"}),a.jsx("div",{className:"text-gray-600 text-sm font-medium",children:"Customer Support"})]})]})})}),a.jsx("section",{id:"features",className:"py-20 bg-light",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-16 fade-in",children:[a.jsx("h2",{className:"text-5xl font-bold text-dark mb-4",children:"Why Choose Yegna Market?"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"We're redefining e-commerce with cutting-edge technology and unparalleled customer experience."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 stagger-animation",children:[a.jsxs("div",{className:"card-hover bg-white rounded-3xl p-8 text-center relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300",children:a.jsx("i",{className:"fas fa-brain text-2xl text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-dark mb-3",children:"AI Personalization"}),a.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Smart recommendations tailored to your preferences and browsing behavior."})]})]}),a.jsxs("div",{className:"card-hover bg-white rounded-3xl p-8 text-center relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-50 to-emerald-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300",children:a.jsx("i",{className:"fas fa-bolt text-2xl text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-dark mb-3",children:"Lightning Fast"}),a.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Instant loading and seamless navigation for the best shopping experience."})]})]}),a.jsxs("div",{className:"card-hover bg-white rounded-3xl p-8 text-center relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-violet-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-accent to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300",children:a.jsx("i",{className:"fas fa-lock text-2xl text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-dark mb-3",children:"Bank-Level Security"}),a.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Your data and payments are protected with military-grade encryption."})]})]}),a.jsxs("div",{className:"card-hover bg-white rounded-3xl p-8 text-center relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50 to-amber-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300",children:a.jsx("i",{className:"fas fa-headset text-2xl text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-dark mb-3",children:"24/7 Support"}),a.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Round-the-clock customer support with instant chat and callback options."})]})]})]})]})}),a.jsx("section",{className:"py-20 bg-white",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-12",children:[a.jsxs("div",{className:"fade-in",children:[a.jsx("h2",{className:"text-4xl font-bold text-dark mb-3",children:"Featured Products"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Handpicked selections just for you"})]}),a.jsxs(V,{to:"/products",className:"group flex items-center space-x-2 text-primary hover:text-secondary font-semibold fade-in",children:[a.jsx("span",{children:"View All Products"}),a.jsx("i",{className:"fas fa-arrow-right group-hover:translate-x-1 transition-transform"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 stagger-animation",children:s?a.jsxs("div",{className:"col-span-4 text-center py-12",children:[a.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-primary mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading products..."})]}):e.map(d=>a.jsx(Hf,{product:d},d.id))})]})}),a.jsx("section",{id:"categories",className:"py-20 bg-gradient-to-br from-gray-50 to-blue-50",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-12 fade-in",children:[a.jsx("h2",{className:"text-4xl font-bold text-dark mb-3",children:"Shop by Category"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Explore our carefully curated collections"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 stagger-animation",children:r.map(d=>a.jsxs(V,{to:`/products?category=${encodeURIComponent(d.name)}`,className:"card-hover bg-white rounded-3xl p-6 text-center group",children:[a.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform",children:d.icon}),a.jsx("h3",{className:"font-semibold text-gray-800",children:d.name})]},d.id))})]})}),a.jsx("section",{className:"py-20 bg-white",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-12 fade-in",children:[a.jsx("h2",{className:"text-4xl font-bold text-dark mb-3",children:"What Our Customers Say"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Join thousands of satisfied shoppers"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 stagger-animation",children:[a.jsxs("div",{className:"card-hover bg-light rounded-3xl p-8",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:"SG"}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h4",{className:"font-semibold text-dark",children:"Surafel Girma"}),a.jsxs("div",{className:"flex text-yellow-400",children:[a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"})]})]})]}),a.jsx("p",{className:"text-gray-600 italic",children:`"The AI recommendations are spot-on! Found products I didn't even know I needed."`})]}),a.jsxs("div",{className:"card-hover bg-light rounded-3xl p-8",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-accent to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:"TA"}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h4",{className:"font-semibold text-dark",children:"Tesfaye Ayenew"}),a.jsxs("div",{className:"flex text-yellow-400",children:[a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star-half-alt"})]})]})]}),a.jsx("p",{className:"text-gray-600 italic",children:'"Lightning fast delivery and excellent customer support. Will shop again!"'})]}),a.jsxs("div",{className:"card-hover bg-light rounded-3xl p-8",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:"YA"}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h4",{className:"font-semibold text-dark",children:"Yoseph Aderaw"}),a.jsxs("div",{className:"flex text-yellow-400",children:[a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"}),a.jsx("i",{className:"fas fa-star"})]})]})]}),a.jsx("p",{className:"text-gray-600 italic",children:'"The user interface is incredibly intuitive. Best shopping experience online!"'})]})]})]})}),a.jsxs("section",{id:"deals",className:"py-20 bg-gradient-to-r from-primary to-accent text-white relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-white/5 rounded-full translate-y-32 -translate-x-32"})]}),a.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[a.jsxs("div",{className:"text-center mb-12 fade-in",children:[a.jsx("h2",{className:"text-4xl font-bold mb-3",children:"Limited Time Offers"}),a.jsx("p",{className:"text-xl opacity-90",children:"Don't miss these exclusive deals"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto stagger-animation",children:[a.jsxs("div",{className:"glass-effect rounded-3xl p-8 text-center card-hover",children:[a.jsx("i",{className:"fas fa-bolt text-5xl mb-6 text-yellow-300"}),a.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Flash Sale"}),a.jsx("p",{className:"mb-6 opacity-90",children:"Up to 60% off on premium electronics. Limited stock available!"}),a.jsx("div",{className:"text-4xl font-bold text-yellow-300 mb-4",children:"60% OFF"}),a.jsxs("div",{className:"flex justify-center items-center space-x-2 text-sm opacity-80",children:[a.jsx("i",{className:"fas fa-clock"}),a.jsx("span",{children:"Ends in 24:00:00"})]})]}),a.jsxs("div",{className:"glass-effect rounded-3xl p-8 text-center card-hover",children:[a.jsx("i",{className:"fas fa-shipping-fast text-5xl mb-6 text-green-300"}),a.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Free Shipping"}),a.jsx("p",{className:"mb-6 opacity-90",children:"Free express shipping on all orders over 2000 Birr. No code needed!"}),a.jsx("div",{className:"text-4xl font-bold text-green-300 mb-4",children:"FREE"}),a.jsx("div",{className:"text-sm opacity-80",children:"On orders over 2000 Birr"})]})]})]})]}),a.jsx("section",{className:"py-16 bg-dark text-white",children:a.jsxs("div",{className:"container mx-auto px-4 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Stay in the Loop"}),a.jsx("p",{className:"text-gray-300 mb-8 text-lg",children:"Get exclusive deals and product updates before anyone else"}),a.jsxs("div",{className:"max-w-md mx-auto flex flex-col sm:flex-row rounded-2xl overflow-hidden shadow-2xl",children:[a.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-6 py-4 border-0 focus:outline-none focus:ring-2 focus:ring-primary text-gray-800 rounded-t-2xl sm:rounded-l-2xl sm:rounded-tr-none"}),a.jsxs("button",{className:"bg-primary px-8 py-4 font-semibold hover:bg-secondary transition-all duration-300 rounded-b-2xl sm:rounded-r-2xl sm:rounded-bl-none",children:[a.jsx("i",{className:"fas fa-paper-plane mr-2"}),"Subscribe"]})]})]})})]})},gv=()=>{var E;const[e,t]=w.useState([]),[r,n]=w.useState([]),[s,i]=w.useState(!0),[o,l]=Cx(),[c,u]=w.useState(o.get("search")||""),[d,h]=w.useState(o.get("sortBy")||"name"),[f,x]=w.useState("grid"),[y,v]=w.useState({category:o.get("category")||void 0,priceRange:o.get("price")?(E=o.get("price"))==null?void 0:E.split("-").map(Number):void 0,productType:o.get("type"),inStock:o.get("inStock")==="true"||void 0,lowStock:o.get("lowStock")==="true"||void 0});w.useEffect(()=>{b(),m()},[]),w.useEffect(()=>{const _=new URLSearchParams;c&&_.set("search",c),d!=="name"&&_.set("sortBy",d),y.category&&_.set("category",y.category),y.productType&&_.set("type",y.productType),y.inStock&&_.set("inStock","true"),y.lowStock&&_.set("lowStock","true"),y.priceRange&&_.set("price",`${y.priceRange[0]}-${y.priceRange[1]}`),l(_)},[c,d,y,l]);const b=async()=>{i(!0);try{const _=await Lt.getProducts();t(_)}catch(_){console.error("Failed to load products:",_)}finally{i(!1)}},m=async()=>{try{const _=await Lt.getCategories();n(_)}catch(_){console.error("Failed to load categories:",_)}},p=w.useMemo(()=>{let _=[...e];if(c&&(_=_.filter(C=>C.name.toLowerCase().includes(c.toLowerCase())||C.description.toLowerCase().includes(c.toLowerCase()))),y.category&&(_=_.filter(C=>C.category_name===y.category)),y.priceRange){const[C,O]=y.priceRange;_=_.filter(B=>B.price>=C&&(O===1/0||B.price<=O))}return y.productType&&(_=_.filter(C=>C.product_type===y.productType)),y.inStock&&!y.lowStock&&(_=_.filter(C=>C.stock_quantity>10)),y.lowStock&&!y.inStock&&(_=_.filter(C=>C.stock_quantity<=10&&C.stock_quantity>0)),y.inStock&&y.lowStock&&(_=_.filter(C=>C.stock_quantity>0)),_.sort((C,O)=>{switch(d){case"price-low":return C.price-O.price;case"price-high":return O.price-C.price;case"newest":return new Date(O.created_at).getTime()-new Date(C.created_at).getTime();default:return C.name.localeCompare(O.name)}}),_},[e,y,c,d]),g=(_,C)=>{v(O=>({...O,[_]:C}))},j=_=>{const C={"0-50":[0,50],"50-100":[50,100],"100-500":[100,500],"500+":[500,1/0]};v(O=>({...O,priceRange:C[_]}))},k=()=>{u(""),h("name"),v({category:void 0,priceRange:void 0,productType:void 0,inStock:void 0,lowStock:void 0})},S=()=>{if(!y.priceRange)return"";const _=`${y.priceRange[0]}-${y.priceRange[1]}`;return{"0-50":"0-50","50-100":"50-100","100-500":"100-500","500-Infinity":"500+"}[_]};return a.jsx("div",{className:"bg-gray-50 font-inter",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[a.jsx("div",{className:"lg:w-1/4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 md:p-6 lg:sticky lg:top-24",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Filters"}),a.jsx("button",{onClick:k,className:"lg:hidden text-sm text-gray-500 hover:text-gray-700",children:"Clear"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Categories"}),a.jsx("div",{className:"space-y-2",children:r.map(_=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",className:"mr-2",checked:y.category===_.name,onChange:C=>g("category",C.target.checked?_.name:void 0)}),a.jsx("span",{children:_.name})]},_.id))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Price Range"}),a.jsx("div",{className:"space-y-2",children:["0-50","50-100","100-500","500+"].map(_=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"price",value:_,className:"mr-2",checked:S()===_,onChange:C=>j(C.target.value)}),a.jsx("span",{children:_==="500+"?"500+ Birr":`${_.replace("-"," - ")} Birr`})]},_))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Product Type"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",className:"mr-2",checked:y.productType==="physical",onChange:_=>g("productType",_.target.checked?"physical":void 0)}),a.jsx("span",{children:"Physical Products"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",className:"mr-2",checked:y.productType==="digital",onChange:_=>g("productType",_.target.checked?"digital":void 0)}),a.jsx("span",{children:"Digital Products"})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-3",children:"Stock Status"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",className:"mr-2",checked:y.inStock||!1,onChange:_=>g("inStock",_.target.checked)}),a.jsx("span",{children:"In Stock"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",className:"mr-2",checked:y.lowStock||!1,onChange:_=>g("lowStock",_.target.checked)}),a.jsx("span",{children:"Low Stock"})]})]})]}),a.jsx("button",{onClick:k,className:"hidden lg:block w-full mt-6 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition",children:"Clear All Filters"})]})}),a.jsxs("div",{className:"lg:w-3/4",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 md:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"All Products"}),a.jsxs("p",{className:"text-sm md:text-base text-gray-600 mt-1",children:["Showing ",p.length," of ",e.length," products"]})]}),a.jsx("div",{className:"w-full",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:c,onChange:_=>u(_.target.value),placeholder:"Search products...",className:"w-full px-4 py-2 md:py-3 pl-10 md:pl-12 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm md:text-base"}),a.jsx("i",{className:"fas fa-search absolute left-3 md:left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm md:text-base"})]})}),a.jsxs("div",{className:"flex items-center justify-between space-x-2 md:space-x-4",children:[a.jsxs("select",{value:d,onChange:_=>h(_.target.value),className:"flex-1 px-2 md:px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm md:text-base",children:[a.jsx("option",{value:"name",children:"Name"}),a.jsx("option",{value:"price-low",children:"Price: Low"}),a.jsx("option",{value:"price-high",children:"Price: High"}),a.jsx("option",{value:"newest",children:"Newest"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>x("grid"),className:`p-2 rounded-lg ${f==="grid"?"bg-primary text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:a.jsx("i",{className:"fas fa-th text-sm"})}),a.jsx("button",{onClick:()=>x("list"),className:`p-2 rounded-lg ${f==="list"?"bg-primary text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:a.jsx("i",{className:"fas fa-list text-sm"})})]})]})]})}),s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-primary mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading products..."})]}):p.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("i",{className:"fas fa-search text-4xl text-gray-300 mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No products found"}),a.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or search terms"})]}):a.jsx("div",{className:f==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"grid grid-cols-1 gap-6",children:p.map(_=>a.jsx(Hf,{product:_,viewMode:f},_.id))})]})]})})})},xv=()=>{const{id:e}=ex(),t=Tt(),{addToCart:r}=An(),{auth:n}=Ot(),[s,i]=w.useState(null),[o,l]=w.useState(1),[c,u]=w.useState(!0),[d,h]=w.useState(""),[f,x]=w.useState(!1);w.useEffect(()=>{e&&y(parseInt(e))},[e]);const y=async m=>{try{const p=await yt.getProduct(m);if(i(p),n.isAuthenticated){const{data:g}=await F.from("wishlist").select("id").eq("user_id",n.user.id).eq("product_id",m).single();x(!!g)}}catch{h("Product not found")}finally{u(!1)}},v=async()=>{if(!n.isAuthenticated){t("/login");return}try{f?(await F.from("wishlist").delete().eq("user_id",n.user.id).eq("product_id",s.id),x(!1)):(await F.from("wishlist").insert({user_id:n.user.id,product_id:s.id}),x(!0))}catch(m){console.error("Wishlist error:",m)}},b=()=>{s&&r(s,o)};return c?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):d||!s?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Product Not Found"}),a.jsx("button",{onClick:()=>t("/products"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Back to Products"})]})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("button",{onClick:()=>t(-1),className:"mb-6 text-blue-600 hover:text-blue-800 flex items-center",children:[a.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back"]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx("div",{children:a.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-96 object-cover rounded-lg shadow-lg"})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.name}),a.jsxs("p",{className:"text-2xl font-semibold text-blue-600 mt-2",children:[s.price," Birr"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Description"}),a.jsx("p",{className:"text-gray-600",children:s.description})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Stock:"}),a.jsx("span",{className:`text-sm font-medium ${s.stock_quantity>0?"text-green-600":"text-red-600"}`,children:s.stock_quantity>0?`${s.stock_quantity} available`:"Out of stock"})]}),s.stock_quantity>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),a.jsx("select",{value:o,onChange:m=>l(parseInt(m.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:Math.min(10,s.stock_quantity)},(m,p)=>a.jsx("option",{value:p+1,children:p+1},p+1))})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:b,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[a.jsx("i",{className:"fas fa-shopping-cart mr-2"}),"Add to Cart"]}),a.jsx("button",{onClick:v,className:`px-6 py-3 rounded-lg border-2 transition-colors ${f?"bg-red-50 border-red-500 text-red-600 hover:bg-red-100":"border-gray-300 text-gray-600 hover:border-red-500 hover:text-red-600"}`,children:a.jsx("i",{className:`fas fa-heart ${f?"":"far"}`})})]})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Product Details"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Category:"}),a.jsx("span",{children:s.category_name})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Type:"}),a.jsx("span",{className:"capitalize",children:s.product_type})]}),s.product_type==="physical"&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Shipping:"}),a.jsx("span",{children:"Standard shipping available"})]})]})]})]})]})]})},yv=()=>{const{cart:e,cartSummary:t,updateQuantity:r,removeFromCart:n}=An();w.useState("9.99");const s=Tt(),{showWarning:i}=Mr(),o=()=>{if(e.length===0){i("Your cart is empty!");return}s("/checkout")};return a.jsx("div",{className:"bg-gray-50 font-inter",children:a.jsxs("div",{className:"container mx-auto p-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Shopping Cart"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-gray-500 text-lg",children:"Your cart is empty"}),a.jsx(V,{to:"/products",className:"text-blue-600 hover:text-blue-800 mt-4 inline-block",children:"Continue Shopping"})]}):a.jsx("div",{children:e.map(l=>a.jsxs("div",{className:"flex items-center justify-between py-4 border-b",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"text-4xl",children:l.image||""}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:l.name}),a.jsx("p",{className:"text-gray-500 text-sm",children:l.product_type}),a.jsxs("p",{className:"text-blue-600 font-bold",children:[l.price," Birr"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>r(l.id,l.quantity-1),className:"w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300",children:"-"}),a.jsx("span",{className:"w-8 text-center",children:l.quantity}),a.jsx("button",{onClick:()=>r(l.id,l.quantity+1),className:"w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300",children:"+"})]}),a.jsx("button",{onClick:()=>n(l.id),className:"text-red-600 hover:text-red-800",children:"Remove"})]})]},l.id))})})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 h-fit",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("span",{children:[t.subtotal.toFixed(2)," Birr"]})]}),a.jsxs("div",{className:"pt-2",children:[a.jsx("span",{className:"font-semibold",children:"Shipping Method:"}),a.jsx("div",{className:"mt-2 space-y-2",children:a.jsxs("label",{className:"flex items-center p-3 border rounded-lg border-blue-600 bg-blue-50",children:[a.jsx("input",{type:"radio",name:"shippingMethod",value:"9.99",className:"mr-2",checked:!0,readOnly:!0}),a.jsx("span",{children:"Standard Shipping (9.99 Birr)"})]})})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Shipping:"}),a.jsxs("span",{children:[t.shipping.toFixed(2)," Birr"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Tax:"}),a.jsxs("span",{children:[t.tax.toFixed(2)," Birr"]})]}),a.jsx("hr",{}),a.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{children:[t.total.toFixed(2)," Birr"]})]})]}),a.jsx("button",{onClick:o,className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition font-semibold",children:"Proceed to Checkout"})]})]})]})})},vv=()=>{const{cart:e,cartSummary:t,clearCart:r}=An(),{showError:n}=Mr(),{auth:s}=Ot(),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[u,d]=w.useState(null),[h,f]=w.useState("");w.useState("receipt");const[x,y]=w.useState(null),[v,b]=w.useState(""),[m,p]=w.useState({first_name:"",last_name:"",email:"",phone:"",address:"",city:"",state:"",zipcode:"",country:"Ethiopia",shipping_method:"standard"}),[g,j]=w.useState({phone:"",email:"",zipcode:""}),k=C=>{var B;const O=(B=C.target.files)==null?void 0:B[0];if(O){y(O);const J=new FileReader;J.onloadend=()=>{b(J.result)},J.readAsDataURL(O)}},S=C=>{const{name:O,value:B}=C.target;p({...m,[O]:B}),g[O]&&j({...g,[O]:""})},E=()=>{const C={phone:"",email:"",zipcode:""},O=/^(\+251|0)[79]\d{8}$/;m.phone?O.test(m.phone.replace(/\s/g,""))||(C.phone="Invalid phone number (e.g., +251912345678 or 0912345678)"):C.phone="Phone number is required";const B=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return m.email?B.test(m.email)||(C.email="Invalid email address"):C.email="Email is required",m.zipcode?m.zipcode.length<4&&(C.zipcode="Invalid ZIP code"):C.zipcode="ZIP code is required",j(C),Object.values(C).some(re=>re!=="")?!1:["first_name","last_name","email","phone","address","city","state","zipcode"].every(re=>m[re].trim()!=="")&&x!==null},_=async C=>{var O;C.preventDefault(),f("");try{if(I.info("Starting checkout process","CheckoutPage",{cart_items:e.length}),s.isAuthenticated&&s.isSeller){const W="Sellers cannot place orders. Please logout and use a customer account.";throw I.warn("Logged in seller attempted to place order","CheckoutPage",{email:(O=s.user)==null?void 0:O.email}),n(W),f(W),new tr(W)}if(!E())throw x?new tr("Please fill in all required fields"):new tr("Please upload payment receipt");if(e.length===0)throw new tr("Your cart is empty");if(!s.isAuthenticated&&await yt.isSellerEmail(m.email)){const re="This email is registered as a seller. Sellers cannot place orders.";throw I.warn("Seller email used at checkout","CheckoutPage",{email:m.email}),n(re),f(re),new tr(re)}o(!0);const B={street:m.address,city:m.city,state:m.state,zipcode:m.zipcode,country:m.country},J={customer_name:`${m.first_name} ${m.last_name}`,customer_email:m.email,total_amount:t.total,payment_method:"receipt_upload",shipping_address:JSON.stringify(B),items:e.map(W=>({product_id:W.id,seller_id:W.seller_id||1,quantity:W.quantity,price:W.price,product_name:W.name,product_image:W.image}))};I.debug("Creating order","CheckoutPage",{total:t.total});const z=await Jn.createOrder(J);if(I.info(`Order created successfully (ID: ${z.order_id})`,"CheckoutPage"),x&&v){I.debug("Saving receipt to order","CheckoutPage",{order_id:z.order_id});const{error:W}=await F.from("orders").update({receipt_image:v}).eq("id",z.order_id);W&&I.warn("Failed to save receipt","CheckoutPage",{error:W})}r(),d(z.order_id),c(!0),I.info("Receipt payment completed","CheckoutPage",{order_id:z.order_id})}catch(B){const J=it(B);I.error("Checkout failed",B,"CheckoutPage",{error_code:J.code}),f(J.message),o(!1)}};return l?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("i",{className:"fas fa-check text-2xl text-green-600"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Order Confirmed!"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Thank you for your purchase. Your order has been placed successfully."}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[a.jsxs("p",{className:"font-semibold",children:["Order #",u]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Tracking number will be sent to your email"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(V,{to:"/my-orders",className:"flex-1 bg-primary text-white py-3 rounded-xl font-semibold hover:bg-secondary transition text-center",children:"View Order"}),a.jsx(V,{to:"/products",className:"flex-1 border border-primary text-primary py-3 rounded-xl font-semibold hover:bg-primary hover:text-white transition text-center",children:"Continue Shopping"})]})]})}):a.jsx("div",{className:"min-h-screen py-8 bg-gray-50",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("div",{className:"max-w-6xl mx-auto mb-8",children:a.jsxs("div",{className:"flex justify-center items-center space-x-8",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center font-semibold",children:"1"}),a.jsx("span",{className:"font-semibold text-primary",children:"Cart"})]}),a.jsx("div",{className:"w-16 h-1 bg-primary"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center font-semibold",children:"2"}),a.jsx("span",{className:"font-semibold text-primary",children:"Information"})]}),a.jsx("div",{className:"w-16 h-1 bg-primary"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center font-semibold",children:"3"}),a.jsx("span",{className:"font-semibold text-gray-500",children:"Payment"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Shipping Information"}),a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[h&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("i",{className:"fas fa-exclamation-circle text-red-600 mt-1 mr-3"}),a.jsxs("div",{className:"text-sm text-red-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Error"}),a.jsx("p",{children:h})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),a.jsx("input",{type:"text",name:"first_name",value:m.first_name,onChange:S,placeholder:"Abebe",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),a.jsx("input",{type:"text",name:"last_name",value:m.last_name,onChange:S,placeholder:"Kebede",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),a.jsx("input",{type:"email",name:"email",value:m.email,onChange:S,placeholder:"abebe@example.com",required:!0,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${g.email?"border-red-500":"border-gray-300"}`}),g.email&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),a.jsx("input",{type:"tel",name:"phone",value:m.phone,onChange:S,placeholder:"+251912345678 or 0912345678",required:!0,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${g.phone?"border-red-500":"border-gray-300"}`}),g.phone&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.phone})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Shipping Address"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),a.jsx("input",{type:"text",name:"address",value:m.address,onChange:S,placeholder:"Bole, Addis Ababa",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),a.jsx("input",{type:"text",name:"city",value:m.city,onChange:S,placeholder:"Addis Ababa",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),a.jsx("input",{type:"text",name:"state",value:m.state,onChange:S,placeholder:"Addis Ababa",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code *"}),a.jsx("input",{type:"text",name:"zipcode",value:m.zipcode,onChange:S,placeholder:"1000",required:!0,className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${g.zipcode?"border-red-500":"border-gray-300"}`}),g.zipcode&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.zipcode})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),a.jsx("input",{type:"text",name:"country",value:"Ethiopia",readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-100 cursor-not-allowed"})]})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Payment Method"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("i",{className:"fas fa-info-circle text-blue-600 mt-1 mr-3"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Bank Transfer Instructions"}),a.jsx("p",{className:"mb-2",children:"Please transfer the amount to:"}),a.jsxs("div",{className:"bg-white rounded p-2 mb-2",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Bank:"})," Commercial Bank of Ethiopia"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," 1000528053438"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Account Name:"})," Yegna Market"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Amount:"})," ",a.jsxs("span",{className:"font-bold",children:[t.total.toFixed(2)," ETB"]})]})]}),a.jsx("p",{children:"After payment, upload your receipt below."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Payment Receipt *"}),a.jsx("input",{type:"file",accept:"image/*",onChange:k,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),v&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Receipt Preview:"}),a.jsx("img",{src:v,alt:"Receipt preview",className:"max-w-full h-auto max-h-64 rounded-lg border border-gray-300"})]})]})]}),a.jsx("button",{type:"submit",disabled:i,className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-800 transition shadow-lg disabled:opacity-50",children:i?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Processing Order..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-lock mr-2"}),"Place Order"]})})]})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Order Summary"}),a.jsx("div",{className:"space-y-3 mb-4",children:e.map(C=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"text-2xl",children:C.image}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:C.name}),a.jsxs("p",{className:"text-gray-600 text-xs",children:["Qty: ",C.quantity]})]})]}),a.jsxs("span",{className:"font-semibold",children:[(C.price*C.quantity).toFixed(2)," Birr"]})]},C.id))}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal"}),a.jsxs("span",{children:[t.subtotal.toFixed(2)," Birr"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Shipping"}),a.jsxs("span",{children:[t.shipping.toFixed(2)," Birr"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Tax"}),a.jsxs("span",{children:[t.tax.toFixed(2)," Birr"]})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[a.jsx("span",{children:"Total"}),a.jsxs("span",{children:[t.total.toFixed(2)," Birr"]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[a.jsxs("div",{className:"flex justify-center space-x-6 mb-4",children:[a.jsx("i",{className:"fas fa-lock text-2xl text-green-500"}),a.jsx("i",{className:"fas fa-shield-alt text-2xl text-blue-500"}),a.jsx("i",{className:"fas fa-credit-card text-2xl text-purple-500"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Your payment information is secure and encrypted"})]}),a.jsxs(V,{to:"/cart",className:"block text-center text-primary hover:text-secondary font-semibold",children:[a.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Return to Cart"]})]})]})]})})},wv=()=>{const[e,t]=w.useState(""),[r,n]=w.useState(""),[s,i]=w.useState(!1),[o,l]=w.useState(""),{login:c}=Ot(),u=Tt(),d=async h=>{h.preventDefault(),i(!0),l("");try{await c(e,r),u("/")}catch(f){l(f.message||"Invalid credentials")}finally{i(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsx("div",{className:"text-center",children:a.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})}),a.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-xl shadow-lg",onSubmit:d,children:[o&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:o}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:e,onChange:h=>t(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsx("input",{type:"password",value:r,onChange:h=>n(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:s?"Signing in...":"Sign in"}),a.jsx("div",{className:"text-center",children:a.jsx(V,{to:"/register",className:"text-blue-600 hover:text-blue-500",children:"Don't have an account? Sign up"})})]})]})})},bv=()=>{const[e,t]=w.useState({name:"",email:"",password:"",confirmPassword:""}),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(""),{register:c}=Ot(),u=Tt(),d=f=>{t(x=>({...x,[f.target.name]:f.target.value}))},h=async f=>{var x;if(f.preventDefault(),n(!0),i(""),l(""),e.password!==e.confirmPassword){i("Passwords do not match"),n(!1);return}try{await c(e.email,e.password,e.name),l("Registration successful! Please check your email to verify your account."),setTimeout(()=>u("/login"),3e3)}catch(y){(x=y.message)!=null&&x.includes("rate limit")?i("Too many registration attempts. Please try again later or contact support."):i(y.message||"Registration failed. Please try again.")}finally{n(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsx("div",{className:"text-center",children:a.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Create your account"})}),a.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-xl shadow-lg",onSubmit:h,children:[s&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:s}),o&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-lg",children:o}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",name:"name",value:e.name,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:e.email,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsx("input",{type:"password",name:"password",value:e.password,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),a.jsx("input",{type:"password",name:"confirmPassword",value:e.confirmPassword,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),a.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:r?"Creating account...":"Create account"}),a.jsx("div",{className:"text-center",children:a.jsx(V,{to:"/login",className:"text-blue-600 hover:text-blue-500",children:"Already have an account? Sign in"})})]})]})})},_v=()=>{var Kt;const{auth:e,logout:t}=Ot(),r=Tt(),{showSuccess:n,showError:s}=Mr(),[i,o]=w.useState("dashboard"),[l,c]=w.useState([]),[u,d]=w.useState([]),[h,f]=w.useState([]),[x,y]=w.useState([]),[v,b]=w.useState([]),[m,p]=w.useState([]),[g,j]=w.useState([]);w.useState("week");const[k,S]=w.useState(!0);w.useState(!1);const[E,_]=w.useState(!1);w.useState(null);const[C,O]=w.useState(null),[B,J]=w.useState(!1),[z,W]=w.useState({products:1,orders:1,customers:1,sellers:1,payouts:1}),re=20,[Le,Ht]=w.useState({totalProducts:0,totalOrders:0,totalCustomers:0,totalRevenue:0,totalSellers:0});w.useEffect(()=>{if(!e.isAuthenticated||!e.isAdmin){r("/login");return}R()},[e,r]);const R=async()=>{try{console.log("Loading dashboard data...");const[N,$,Z]=await Promise.all([yt.getProducts(),yt.getOrders(),yt.getCategories()]),{data:de}=await F.from("sellers").select("*");b(de||[]),await M();const{data:ut}=await F.from("seller_payouts").select(`
          *,
          sellers (shop_name, bank_name, account_number)
        `).order("created_at",{ascending:!1});j(ut||[]);const{data:xe}=await F.from("orders").select(`
          *,
          seller_orders (
            id,
            seller_id,
            status,
            subtotal,
            tracking_number,
            sellers (shop_name)
          )
        `).order("created_at",{ascending:!1});console.log("Products loaded:",N.length),console.log("Orders loaded:",$.length),console.log("Categories loaded:",Z.length),c(N),d(xe||$),f(Z);const Ue=new Map;$.forEach(Y=>{if(Y.customer_email){Ue.has(Y.customer_email)||Ue.set(Y.customer_email,{email:Y.customer_email,name:Y.customer_name,totalOrders:0,totalSpent:0,lastOrder:Y.created_at});const De=Ue.get(Y.customer_email);De.totalOrders++,De.totalSpent+=Y.total_amount||0,new Date(Y.created_at)>new Date(De.lastOrder)&&(De.lastOrder=Y.created_at)}}),y(Array.from(Ue.values()));const Q=$.reduce((Y,De)=>Y+(De.total_amount||0),0);Ht({totalProducts:N.length,totalOrders:$.length,totalCustomers:Ue.size,totalRevenue:Q,totalSellers:(de==null?void 0:de.length)||0})}catch(N){console.error("Error loading data:",N)}finally{S(!1)}},M=async()=>{try{const{data:N}=await F.from("seller_orders").select(`
          *,
          sellers (id, shop_name, bank_name, account_number, account_holder_name),
          orders (id, customer_name, created_at)
        `).eq("status","delivered");if(!N)return;const{data:$}=await F.from("seller_payouts").select("seller_order_id"),Z=new Set(($==null?void 0:$.map(xe=>xe.seller_order_id))||[]),ut=N.filter(xe=>!Z.has(xe.id)).reduce((xe,Ue)=>{var Y,De,ac,oc;const Q=Ue.seller_id;return xe[Q]||(xe[Q]={seller_id:Q,seller_name:(Y=Ue.sellers)==null?void 0:Y.shop_name,bank_name:(De=Ue.sellers)==null?void 0:De.bank_name,account_number:(ac=Ue.sellers)==null?void 0:ac.account_number,account_holder_name:(oc=Ue.sellers)==null?void 0:oc.account_holder_name,orders:[],total_amount:0,commission_rate:10,commission_amount:0,net_amount:0}),xe[Q].orders.push(Ue),xe[Q].total_amount+=Ue.subtotal,xe},{});Object.values(ut).forEach(xe=>{xe.commission_amount=xe.total_amount*(xe.commission_rate/100),xe.net_amount=xe.total_amount-xe.commission_amount}),p(Object.values(ut))}catch(N){console.error("Error loading pending payouts:",N)}},q=async(N,$)=>{try{const Z=N.orders.map(ut=>({seller_id:N.seller_id,seller_order_id:ut.id,amount:ut.subtotal,commission_rate:N.commission_rate,commission_amount:ut.subtotal*(N.commission_rate/100),net_amount:ut.subtotal*(1-N.commission_rate/100),status:"completed",payment_method:"bank_transfer",transaction_reference:$,paid_at:new Date().toISOString()})),{error:de}=await F.from("seller_payouts").insert(Z);if(de)throw de;n(`Payout marked as paid for ${N.seller_name}`),R()}catch(Z){console.error("Error marking payout as paid:",Z),s("Failed to mark payout as paid")}},ne=async N=>{try{const{error:$}=await F.from("products").delete().eq("id",N);if($)throw $;R(),n("Product deleted successfully!")}catch($){console.error("Error deleting product:",$),s("Error deleting product")}},ue=async N=>{try{const{error:$}=await F.from("orders").delete().eq("id",N);if($)throw $;R(),n("Order deleted successfully!")}catch($){console.error("Error deleting order:",$),s("Error deleting order")}},Rt=async N=>{try{const{error:$}=await F.from("categories").insert({name:N.name,icon:N.icon});if($)throw $;_(!1),R(),n("Category added successfully!")}catch($){console.error("Error adding category:",$),s("Error adding category")}},P=async N=>{if(C)try{const{error:$}=await F.from("categories").update({name:N.name,icon:N.icon}).eq("id",parseInt(C.id.toString()));if($)throw $;O(null),R(),n("Category updated successfully!")}catch($){console.error("Error updating category:",$),s("Error updating category")}},me=async N=>{try{const{error:$}=await F.from("categories").delete().eq("id",parseInt(N.toString()));if($)throw $;R(),n("Category deleted successfully!")}catch($){console.error("Error deleting category:",$),s("Error deleting category")}},K=async(N,$)=>{try{const{error:Z}=await F.from("sellers").update({status:$}).eq("id",N);if(Z)throw Z;R(),n(`Seller ${$==="active"?"approved":"suspended"} successfully!`)}catch(Z){console.error("Error updating seller:",Z),s("Error updating seller status")}},jt=async()=>{await t(),r("/")},Ne=N=>{o(N),W($=>({...$,[N]:1}))},Nt=(N,$)=>{const Z=($-1)*re;return N.slice(Z,Z+re)},ge=N=>Math.ceil(N.length/re);return k?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"bg-gray-50 font-inter min-h-screen",children:[a.jsx("nav",{className:"bg-gradient-to-r from-primary to-secondary text-white shadow-lg",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"flex justify-between items-center py-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("i",{className:"fas fa-shopping-bag text-2xl"}),a.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"Yegna Market Pro"}),a.jsx("span",{className:"hidden sm:inline bg-white/20 px-2 py-1 rounded text-sm",children:"Admin Panel"})]}),a.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[a.jsxs("div",{className:"hidden md:block text-right",children:[a.jsx("p",{className:"font-semibold",children:((Kt=e.user)==null?void 0:Kt.name)||"Administrator"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Super Admin"})]}),a.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx("i",{className:"fas fa-user"})}),a.jsxs("button",{onClick:jt,className:"bg-white/20 hover:bg-white/30 px-3 md:px-4 py-2 rounded-lg transition text-sm md:text-base",children:[a.jsx("i",{className:"fas fa-sign-out-alt md:mr-2"}),a.jsx("span",{className:"hidden md:inline",children:"Logout"})]}),a.jsx("button",{onClick:()=>J(!B),className:"md:hidden bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg",children:a.jsx("i",{className:"fas fa-bars"})})]})]})})}),a.jsxs("div",{className:"flex",children:[a.jsxs("div",{className:"hidden md:block w-64 bg-white shadow-lg min-h-screen",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Navigation"})}),a.jsxs("nav",{className:"p-4 space-y-2",children:[a.jsxs("button",{onClick:()=>Ne("dashboard"),className:`nav-item w-full text-left ${i==="dashboard"?"active":""}`,children:[a.jsx("i",{className:"fas fa-tachometer-alt mr-3"}),"Dashboard"]}),a.jsxs("button",{onClick:()=>Ne("orders"),className:`nav-item w-full text-left ${i==="orders"?"active":""}`,children:[a.jsx("i",{className:"fas fa-shopping-cart mr-3"}),"Orders"]}),a.jsxs("button",{onClick:()=>Ne("sellers"),className:`nav-item w-full text-left ${i==="sellers"?"active":""}`,children:[a.jsx("i",{className:"fas fa-store mr-3"}),"Sellers"]}),a.jsxs("button",{onClick:()=>Ne("payouts"),className:`nav-item w-full text-left ${i==="payouts"?"active":""}`,children:[a.jsx("i",{className:"fas fa-money-bill-wave mr-3"}),"Payouts"]}),a.jsxs("button",{onClick:()=>Ne("categories"),className:`nav-item w-full text-left ${i==="categories"?"active":""}`,children:[a.jsx("i",{className:"fas fa-tags mr-3"}),"Categories"]}),a.jsxs("button",{onClick:()=>Ne("products"),className:`nav-item w-full text-left ${i==="products"?"active":""}`,children:[a.jsx("i",{className:"fas fa-box mr-3"}),"Products"]}),a.jsxs("button",{onClick:()=>Ne("customers"),className:`nav-item w-full text-left ${i==="customers"?"active":""}`,children:[a.jsx("i",{className:"fas fa-users mr-3"}),"Customers"]})]})]}),B&&a.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>J(!1),children:a.jsxs("div",{className:"w-64 bg-white h-full shadow-lg",onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Navigation"}),a.jsx("button",{onClick:()=>J(!1),className:"text-gray-500",children:a.jsx("i",{className:"fas fa-times"})})]}),a.jsxs("nav",{className:"p-4 space-y-2",children:[a.jsxs("button",{onClick:()=>{Ne("dashboard"),J(!1)},className:`nav-item w-full text-left ${i==="dashboard"?"active":""}`,children:[a.jsx("i",{className:"fas fa-tachometer-alt mr-3"}),"Dashboard"]}),a.jsxs("button",{onClick:()=>{Ne("orders"),J(!1)},className:`nav-item w-full text-left ${i==="orders"?"active":""}`,children:[a.jsx("i",{className:"fas fa-shopping-cart mr-3"}),"Orders"]}),a.jsxs("button",{onClick:()=>{Ne("sellers"),J(!1)},className:`nav-item w-full text-left ${i==="sellers"?"active":""}`,children:[a.jsx("i",{className:"fas fa-store mr-3"}),"Sellers"]}),a.jsxs("button",{onClick:()=>{Ne("payouts"),J(!1)},className:`nav-item w-full text-left ${i==="payouts"?"active":""}`,children:[a.jsx("i",{className:"fas fa-money-bill-wave mr-3"}),"Payouts"]}),a.jsxs("button",{onClick:()=>{Ne("categories"),J(!1)},className:`nav-item w-full text-left ${i==="categories"?"active":""}`,children:[a.jsx("i",{className:"fas fa-tags mr-3"}),"Categories"]}),a.jsxs("button",{onClick:()=>{Ne("products"),J(!1)},className:`nav-item w-full text-left ${i==="products"?"active":""}`,children:[a.jsx("i",{className:"fas fa-box mr-3"}),"Products"]}),a.jsxs("button",{onClick:()=>{Ne("customers"),J(!1)},className:`nav-item w-full text-left ${i==="customers"?"active":""}`,children:[a.jsx("i",{className:"fas fa-users mr-3"}),"Customers"]})]})]})}),a.jsxs("div",{className:"flex-1 p-4 md:p-6",children:[i==="dashboard"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Dashboard Overview"}),a.jsxs("button",{onClick:R,className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition",children:[a.jsx("i",{className:"fas fa-sync-alt mr-2"}),"Refresh"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[a.jsx("div",{className:"card-hover bg-white p-6 rounded-xl shadow-md border-l-4 border-blue-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:a.jsx("i",{className:"fas fa-box text-blue-600 text-2xl"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Le.totalProducts})]})]})}),a.jsx("div",{className:"card-hover bg-white p-6 rounded-xl shadow-md border-l-4 border-green-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:a.jsx("i",{className:"fas fa-shopping-cart text-green-600 text-2xl"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Orders"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Le.totalOrders})]})]})}),a.jsx("div",{className:"card-hover bg-white p-6 rounded-xl shadow-md border-l-4 border-purple-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:a.jsx("i",{className:"fas fa-users text-purple-600 text-2xl"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Customers"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Le.totalCustomers})]})]})}),a.jsx("div",{className:"card-hover bg-white p-6 rounded-xl shadow-md border-l-4 border-yellow-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:a.jsx("i",{className:"fas fa-coins text-yellow-600 text-2xl"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[Le.totalRevenue.toFixed(2)," Birr"]})]})]})}),a.jsx("div",{className:"card-hover bg-white p-6 rounded-xl shadow-md border-l-4 border-orange-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:a.jsx("i",{className:"fas fa-store text-orange-600 text-2xl"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Sellers"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Le.totalSellers})]})]})})]}),a.jsxs("div",{className:"card-hover bg-white rounded-xl shadow-md p-6",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Recent Orders"}),a.jsx("div",{className:"space-y-3",children:u.slice(0,5).map(N=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold",children:["Order #",N.id]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[N.customer_name,"  ",N.total_amount||0," Birr"]})]}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${N.status==="pending"?"bg-yellow-100 text-yellow-800":N.status==="processing"?"bg-blue-100 text-blue-800":N.status==="shipped"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:N.status})]},N.id))})]})]}),i==="products"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Product Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"View all products (sellers manage their own)"})]}),a.jsxs("div",{className:"card-hover bg-white rounded-xl shadow-md overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Seller"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Price"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:Nt(l,z.products).map(N=>{var $;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-xl mr-2",children:N.image}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:N.name}),a.jsxs("div",{className:"text-xs text-gray-500",children:[($=N.description)==null?void 0:$.substring(0,30),"..."]})]})]})}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:a.jsx("span",{className:"font-medium text-gray-900",children:N.seller_name})}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:N.category_name})}),a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap font-semibold",children:[N.price," Birr"]}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${N.stock_quantity>10?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.stock_quantity})}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:a.jsx("button",{onClick:()=>ne(N.id),className:"text-red-600 hover:text-red-900 text-xs",children:a.jsx("i",{className:"fas fa-trash"})})})]},N.id)})})]})}),ge(l)>1&&a.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(z.products-1)*re+1," to ",Math.min(z.products*re,l.length)," of ",l.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>W(N=>({...N,products:N.products-1})),disabled:z.products===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"px-3 py-1",children:["Page ",z.products," of ",ge(l)]}),a.jsx("button",{onClick:()=>W(N=>({...N,products:N.products+1})),disabled:z.products===ge(l),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]})]}),i==="orders"&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Order Management"}),a.jsxs("div",{className:"card-hover bg-white rounded-xl shadow-md overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Order ID"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:Nt(u,z.orders).map(N=>{var $;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap font-semibold",children:["#",N.id]}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:N.customer_name}),a.jsx("div",{className:"text-xs text-gray-500",children:N.customer_email})]})}),a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap font-semibold",children:[N.total_amount," Birr"]}),a.jsx("td",{className:"px-3 py-2",children:(($=N.seller_orders)==null?void 0:$.length)>0?a.jsx("div",{className:"space-y-1",children:N.seller_orders.map(Z=>{var de;return a.jsxs("div",{className:"text-xs",children:[a.jsxs("span",{className:"font-medium",children:[(de=Z.sellers)==null?void 0:de.shop_name,":"]}),a.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full ${Z.status==="pending"?"bg-yellow-100 text-yellow-800":Z.status==="processing"?"bg-blue-100 text-blue-800":Z.status==="shipped"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:Z.status})]},Z.id)})}):a.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800",children:N.status||"pending"})}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:new Date(N.created_at).toLocaleDateString()}),a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap space-x-1",children:[N.receipt_url&&a.jsxs("a",{href:`https://lkwlescmmvjqlcpheenj.supabase.co/storage/v1/object/public/${N.receipt_url}`,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-900",children:[a.jsx("i",{className:"fas fa-receipt mr-1"}),"Receipt"]}),a.jsx("button",{className:"text-primary hover:text-secondary text-xs",children:a.jsx("i",{className:"fas fa-eye"})}),a.jsx("button",{onClick:()=>ue(N.id),className:"text-red-600 hover:text-red-800 text-xs",children:a.jsx("i",{className:"fas fa-trash"})})]})]},N.id)})})]})}),ge(u)>1&&a.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(z.orders-1)*re+1," to ",Math.min(z.orders*re,u.length)," of ",u.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>W(N=>({...N,orders:N.orders-1})),disabled:z.orders===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"px-3 py-1",children:["Page ",z.orders," of ",ge(u)]}),a.jsx("button",{onClick:()=>W(N=>({...N,orders:N.orders+1})),disabled:z.orders===ge(u),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]})]}),i==="customers"&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:"Customer Management"}),a.jsxs("div",{className:"card-hover bg-white rounded-xl shadow-md overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Orders"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Spent"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Last Order"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:Nt(x,z.customers).map((N,$)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-3 py-2",children:[a.jsx("div",{className:"font-medium text-gray-900",children:N.name}),a.jsx("div",{className:"text-xs text-gray-500",children:N.email})]}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:N.totalOrders}),a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap font-semibold",children:[N.totalSpent.toFixed(2)," Birr"]}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500 hidden md:table-cell",children:new Date(N.lastOrder).toLocaleDateString()})]},$))})]})}),ge(x)>1&&a.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(z.customers-1)*re+1," to ",Math.min(z.customers*re,x.length)," of ",x.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>W(N=>({...N,customers:N.customers-1})),disabled:z.customers===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"px-3 py-1",children:["Page ",z.customers," of ",ge(x)]}),a.jsx("button",{onClick:()=>W(N=>({...N,customers:N.customers+1})),disabled:z.customers===ge(x),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]})]}),i==="sellers"&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:"Seller Management"}),a.jsxs("div",{className:"card-hover bg-white rounded-xl shadow-md overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Shop"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Rating"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Sales"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Joined"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:Nt(v,z.sellers).map(N=>{var $;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-3 py-2",children:[a.jsx("div",{className:"font-medium text-gray-900",children:N.shop_name}),a.jsx("div",{className:"text-xs text-gray-500",children:($=N.shop_description)==null?void 0:$.substring(0,30)})]}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${N.status==="active"?"bg-green-100 text-green-800":N.status==="suspended"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:N.status})}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:a.jsxs("span",{className:"text-yellow-600 font-semibold",children:[N.rating.toFixed(1)," "]})}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap font-semibold",children:N.total_sales}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500 hidden md:table-cell",children:new Date(N.created_at).toLocaleDateString()}),a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[N.status==="pending"&&a.jsx("button",{onClick:()=>K(N.id,"active"),className:"text-green-600 hover:text-green-800 text-xs",children:"Approve"}),N.status==="active"&&a.jsx("button",{onClick:()=>K(N.id,"suspended"),className:"text-red-600 hover:text-red-800 text-xs",children:"Suspend"}),N.status==="suspended"&&a.jsx("button",{onClick:()=>K(N.id,"active"),className:"text-green-600 hover:text-green-800 text-xs",children:"Activate"})]})]},N.id)})})]})}),ge(v)>1&&a.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(z.sellers-1)*re+1," to ",Math.min(z.sellers*re,v.length)," of ",v.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>W(N=>({...N,sellers:N.sellers-1})),disabled:z.sellers===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"px-3 py-1",children:["Page ",z.sellers," of ",ge(v)]}),a.jsx("button",{onClick:()=>W(N=>({...N,sellers:N.sellers+1})),disabled:z.sellers===ge(v),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]})]}),i==="categories"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Category Management"}),a.jsxs("button",{onClick:()=>_(!0),className:"bg-primary text-white px-3 md:px-4 py-2 rounded-lg hover:bg-secondary transition text-sm md:text-base",children:[a.jsx("i",{className:"fas fa-plus mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Add Category"}),a.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),a.jsx("div",{className:"card-hover bg-white rounded-xl shadow-md p-4 md:p-6",children:a.jsx("div",{className:"space-y-2",children:h.map(N=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-xl md:text-2xl",children:N.icon}),a.jsx("span",{className:"font-medium",children:N.name})]}),a.jsxs("div",{className:"space-x-2",children:[a.jsx("button",{onClick:()=>O(N),className:"text-blue-600 hover:text-blue-800",children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{onClick:()=>me(N.id),className:"text-red-600 hover:text-red-800",children:a.jsx("i",{className:"fas fa-trash"})})]})]},N.id))})})]}),i==="payouts"&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Seller Payouts"}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Pending Payouts"}),a.jsxs("button",{onClick:M,className:"text-primary hover:text-secondary",children:[a.jsx("i",{className:"fas fa-sync-alt mr-2"}),"Refresh"]})]}),m.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 text-center text-gray-500",children:[a.jsx("i",{className:"fas fa-check-circle text-4xl mb-2"}),a.jsx("p",{children:"No pending payouts"})]}):a.jsx("div",{className:"space-y-4",children:m.map(N=>a.jsx(jv,{payout:N,onMarkAsPaid:q},N.seller_id))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Payout History"}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Seller"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Commission"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Net Paid"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:Nt(g,z.payouts).map(N=>{var $;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:new Date(N.paid_at).toLocaleDateString()}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:($=N.sellers)==null?void 0:$.shop_name}),a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap font-semibold",children:[N.amount.toFixed(2)," Birr"]}),a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-red-600",children:["-",N.commission_amount.toFixed(2)," Birr"]}),a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap font-bold text-green-600",children:[N.net_amount.toFixed(2)," Birr"]}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:N.transaction_reference})]},N.id)})})]})}),ge(g)>1&&a.jsxs("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(z.payouts-1)*re+1," to ",Math.min(z.payouts*re,g.length)," of ",g.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>W(N=>({...N,payouts:N.payouts-1})),disabled:z.payouts===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"px-3 py-1",children:["Page ",z.payouts," of ",ge(g)]}),a.jsx("button",{onClick:()=>W(N=>({...N,payouts:N.payouts+1})),disabled:z.payouts===ge(g),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]})]})]})]})]}),E&&a.jsx(td,{onSave:Rt,onClose:()=>_(!1)}),C&&a.jsx(td,{category:C,onSave:P,onClose:()=>O(null)})]})},jv=({payout:e,onMarkAsPaid:t})=>{const[r,n]=w.useState(!1),[s,i]=w.useState(""),{showError:o}=Mr(),l=()=>{if(!s.trim()){o("Please enter transaction reference");return}t(e,s),n(!1)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold",children:e.seller_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:[e.orders.length," delivered order(s)"]})]}),a.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium",children:"Pending"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),a.jsxs("p",{className:"text-lg font-bold",children:[e.total_amount.toFixed(2)," Birr"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Commission (10%)"}),a.jsxs("p",{className:"text-lg font-bold text-red-600",children:["-",e.commission_amount.toFixed(2)," Birr"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Net Payout"}),a.jsxs("p",{className:"text-lg font-bold text-green-600",children:[e.net_amount.toFixed(2)," Birr"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Bank Account"}),a.jsx("p",{className:"text-sm font-medium",children:e.bank_name||"Not provided"}),a.jsx("p",{className:"text-xs text-gray-500",children:e.account_number||"N/A"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>n(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition",disabled:!e.bank_name||!e.account_number,children:[a.jsx("i",{className:"fas fa-check mr-2"}),"Mark as Paid"]}),(!e.bank_name||!e.account_number)&&a.jsxs("span",{className:"text-sm text-red-600 flex items-center",children:[a.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),"Seller needs to add bank details"]})]})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Confirm Payout"}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Seller: ",a.jsx("span",{className:"font-semibold",children:e.seller_name})]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Amount to transfer: ",a.jsxs("span",{className:"font-bold text-green-600",children:[e.net_amount.toFixed(2)," Birr"]})]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Bank: ",e.bank_name]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Account: ",e.account_number]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Transaction Reference *"}),a.jsx("input",{type:"text",value:s,onChange:c=>i(c.target.value),placeholder:"e.g., TXN123456",className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:l,className:"flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700",children:"Confirm Payment"}),a.jsx("button",{onClick:()=>n(!1),className:"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600",children:"Cancel"})]})]})})]})},td=({category:e,onSave:t,onClose:r})=>{const[n,s]=w.useState({name:(e==null?void 0:e.name)||"",icon:(e==null?void 0:e.icon)||""}),i=l=>{l.preventDefault(),t(n)},o=l=>{s(c=>({...c,[l.target.name]:l.target.value}))};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 md:p-8 max-w-lg w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-bold",children:e?"Edit Category":"Add New Category"}),a.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:a.jsx("i",{className:"fas fa-times text-2xl"})})]}),a.jsxs("form",{onSubmit:i,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name"}),a.jsx("input",{type:"text",name:"name",value:n.name,onChange:o,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Icon"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",name:"icon",value:n.icon,onChange:o,placeholder:"",className:"w-20 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-center text-2xl"}),a.jsxs("select",{onChange:l=>s(c=>({...c,icon:l.target.value})),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[a.jsx("option",{value:"",children:"Select or type emoji"}),a.jsx("option",{value:"",children:" Tag"}),a.jsx("option",{value:"",children:" Electronics"}),a.jsx("option",{value:"",children:" Books"}),a.jsx("option",{value:"",children:" Clothing"}),a.jsx("option",{value:"",children:" Shoes"}),a.jsx("option",{value:"",children:" Home"}),a.jsx("option",{value:"",children:" Garden"}),a.jsx("option",{value:"",children:" Beauty"}),a.jsx("option",{value:"",children:" Sports"}),a.jsx("option",{value:"",children:" Gaming"}),a.jsx("option",{value:"",children:" Package"}),a.jsx("option",{value:"",children:" Art"}),a.jsx("option",{value:"",children:" Food"}),a.jsx("option",{value:"",children:" Auto"}),a.jsx("option",{value:"",children:" Music"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 pt-4",children:[a.jsxs("button",{type:"submit",className:"flex-1 bg-primary text-white py-3 rounded-lg hover:bg-secondary transition font-semibold",children:[a.jsx("i",{className:"fas fa-plus mr-2"}),e?"Update Category":"Add Category"]}),a.jsx("button",{type:"button",onClick:r,className:"flex-1 bg-gray-500 text-white py-3 rounded-lg hover:bg-gray-600 transition font-semibold",children:"Cancel"})]})]})]})})},Nv=()=>{var Rt;const{auth:e,logout:t}=Ot(),r=Tt(),{showSuccess:n,showError:s}=Mr(),[i,o]=w.useState(null),[l,c]=w.useState([]),[u,d]=w.useState([]),[h,f]=w.useState([]),[x,y]=w.useState("products"),[v,b]=w.useState(!0),[m,p]=w.useState(!1),[g,j]=w.useState(null),[k,S]=w.useState(!1),[E,_]=w.useState({orders:1,payouts:1}),C=20,[O,B]=w.useState({shop_name:"",shop_description:"",bank_name:"",account_number:"",account_holder_name:""}),[J,z]=w.useState({pending:0,available:0,paid:0,commission:0}),[W,re]=w.useState([]);w.useEffect(()=>{if(!e.isAuthenticated){r("/login");return}Le()},[e,r]);const Le=async()=>{try{const P=await yt.getSeller(e.user.id);if(!P){r("/become-seller");return}const[me,K,jt]=await Promise.all([yt.getSellerProducts(P.id),yt.getSellerOrders(P.id),yt.getCategories()]),Nt=K.filter(Q=>Q.status==="delivered").reduce((Q,Y)=>Q+Y.subtotal,0),ge=P.rating||0;P.total_sales=Nt,P.rating=ge,o(P),B({shop_name:P.shop_name,shop_description:P.shop_description||"",bank_name:P.bank_name||"",account_number:P.account_number||"",account_holder_name:P.account_holder_name||""});const Kt=K.map(Q=>Q.order_id);if(Kt.length>0){const{data:Q}=await F.from("orders").select("id, receipt_image").in("id",Kt),Y=new Map((Q==null?void 0:Q.map(De=>[De.id,De.receipt_image]))||[]);K.forEach(De=>{De.receipt_image=Y.get(De.order_id)})}c(me),d(K),f(jt);const N=K.filter(Q=>Q.status!=="delivered").reduce((Q,Y)=>Q+Y.subtotal,0),Z=K.filter(Q=>Q.status==="delivered").reduce((Q,Y)=>Q+Y.subtotal,0),{data:de}=await F.from("seller_payouts").select("*").eq("seller_id",P.id),ut=(de==null?void 0:de.reduce((Q,Y)=>Q+Y.net_amount,0))||0,xe=(de==null?void 0:de.reduce((Q,Y)=>Q+Y.commission_amount,0))||0,Ue=Z-((de==null?void 0:de.reduce((Q,Y)=>Q+Y.amount,0))||0);z({pending:N,available:Ue,paid:ut,commission:xe}),re(de||[])}catch(P){console.error("Error loading seller data:",P)}finally{b(!1)}},Ht=(P,me)=>{const K=(me-1)*C;return P.slice(K,K+C)},R=P=>Math.ceil(P.length/C),M=async P=>{try{await yt.createProduct({seller_id:i.id,name:P.name,description:P.description,price:parseFloat(P.price),category_id:parseInt(P.category_id),stock_quantity:parseInt(P.stock_quantity),product_type:P.product_type,image:P.image}),p(!1),Le(),n("Product added successfully!")}catch(me){console.error("Error adding product:",me),s("Failed to add product")}},q=async(P,me)=>{try{await Gn.updateOrderStatus(P,me),Le(),n("Order status updated!")}catch(K){console.error("Error updating order:",K),s("Failed to update order")}},ne=async(P,me)=>{try{await F.from("products").update({stock_quantity:me}).eq("id",P),Le(),n("Stock updated!")}catch(K){console.error("Error updating stock:",K),s("Failed to update stock")}},ue=async()=>{try{await F.from("sellers").update({shop_name:O.shop_name,shop_description:O.shop_description,bank_name:O.bank_name,account_number:O.account_number,account_holder_name:O.account_holder_name}).eq("id",i.id),S(!1),Le(),n("Profile updated successfully!")}catch(P){console.error("Error updating profile:",P),s("Failed to update profile")}};return v?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-white shadow-sm",children:a.jsx("div",{className:"container mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:i==null?void 0:i.shop_name}),a.jsx("p",{className:"text-sm text-gray-600",children:"Seller Dashboard"})]}),a.jsx("button",{onClick:()=>{t(),r("/")},className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",children:"Logout"})]})})}),a.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600",children:l.length}),a.jsx("div",{className:"text-gray-600",children:"Total Products"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600",children:u.length}),a.jsx("div",{className:"text-gray-600",children:"Total Orders"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:i!=null&&i.rating&&i.rating>0?i.rating.toFixed(1):"N/A"}),a.jsx("div",{className:"text-gray-600",children:"Shop Rating"}),(!(i!=null&&i.rating)||i.rating===0)&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"No ratings yet"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[((Rt=i==null?void 0:i.total_sales)==null?void 0:Rt.toFixed(2))||"0.00"," Birr"]}),a.jsx("div",{className:"text-gray-600",children:"Total Sales"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[a.jsx("div",{className:"border-b",children:a.jsxs("div",{className:"flex",children:[a.jsx("button",{onClick:()=>y("products"),className:`px-6 py-3 font-medium ${x==="products"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600"}`,children:"Products"}),a.jsx("button",{onClick:()=>y("orders"),className:`px-6 py-3 font-medium ${x==="orders"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600"}`,children:"Orders"}),a.jsx("button",{onClick:()=>y("earnings"),className:`px-6 py-3 font-medium ${x==="earnings"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600"}`,children:"Earnings"}),a.jsx("button",{onClick:()=>y("profile"),className:`px-6 py-3 font-medium ${x==="profile"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600"}`,children:"Profile"})]})}),a.jsxs("div",{className:"p-6",children:[x==="products"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"My Products"}),a.jsx("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"+ Add Product"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l.map(P=>{var me;return a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("div",{className:"text-4xl mb-2",children:P.image}),a.jsx("h3",{className:"font-bold",children:P.name}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[(me=P.description)==null?void 0:me.substring(0,50),"..."]}),a.jsx("div",{className:"flex justify-between items-center mb-2",children:a.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[P.price," Birr"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Stock:"}),a.jsx("input",{type:"number",value:P.stock_quantity,onChange:K=>ne(P.id,parseInt(K.target.value)||0),className:"border rounded px-2 py-1 w-20 text-sm",min:"0"}),P.stock_quantity<10&&a.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Low Stock!"})]})]},P.id)})})]}),x==="orders"&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"My Orders"}),u.length===0?a.jsx("p",{className:"text-gray-600",children:"No orders yet"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100 border-b",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Product"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Price"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Quantity"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Buyer"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Receipt"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Order Total"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Status"})]})}),a.jsx("tbody",{children:Ht(u,E.orders).map(P=>{var me;return a.jsx(Xi.Fragment,{children:(me=P.items)==null?void 0:me.map((K,jt)=>{var Ne,Nt,ge,Kt,N,$;return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:K.product_image}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:K.product_name}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Order #",P.id]})]})]})}),a.jsxs("td",{className:"py-3 px-4",children:[K.price," Birr"]}),a.jsx("td",{className:"py-3 px-4",children:K.quantity}),jt===0?a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"py-3 px-4",rowSpan:((Ne=P.items)==null?void 0:Ne.length)||1,children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:(Nt=P.orders)==null?void 0:Nt.customer_name}),a.jsx("div",{className:"text-xs text-gray-500",children:(ge=P.orders)==null?void 0:ge.customer_email})]})}),a.jsx("td",{className:"py-3 px-4",rowSpan:((Kt=P.items)==null?void 0:Kt.length)||1,children:P.receipt_image?a.jsx("button",{onClick:()=>j(P.receipt_image),className:"text-blue-600 hover:text-blue-800 underline text-sm",children:"View Receipt"}):a.jsx("span",{className:"text-gray-400 text-sm",children:"No receipt"})}),a.jsxs("td",{className:"py-3 px-4 font-bold text-blue-600",rowSpan:((N=P.items)==null?void 0:N.length)||1,children:[P.subtotal," Birr"]}),a.jsx("td",{className:"py-3 px-4",rowSpan:(($=P.items)==null?void 0:$.length)||1,children:a.jsxs("select",{value:P.status,onChange:Z=>q(P.id,Z.target.value),className:"border rounded px-2 py-1 text-sm w-full",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"processing",children:"Processing"}),a.jsx("option",{value:"packed",children:"Packed"}),a.jsx("option",{value:"shipped",children:"Shipped"}),a.jsx("option",{value:"delivered",children:"Delivered"})]})})]}):null]},K.id)})},P.id)})})]})}),R(u)>1&&a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(E.orders-1)*C+1," to ",Math.min(E.orders*C,u.length)," of ",u.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>_(P=>({...P,orders:P.orders-1})),disabled:E.orders===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"px-3 py-1",children:["Page ",E.orders," of ",R(u)]}),a.jsx("button",{onClick:()=>_(P=>({...P,orders:P.orders+1})),disabled:E.orders===R(u),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]}),x==="earnings"&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Earnings Overview"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pending Earnings"}),a.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[J.pending.toFixed(2)," Birr"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Orders not delivered yet"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Available for Payout"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[J.available.toFixed(2)," Birr"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Delivered, awaiting payout"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Paid Out"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[J.paid.toFixed(2)," Birr"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Already received"})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Platform Commission"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[J.commission.toFixed(2)," Birr"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"10% of sales"})]})]}),a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Payout History"}),W.length===0?a.jsxs("div",{className:"bg-white border rounded-lg p-8 text-center text-gray-500",children:[a.jsx("i",{className:"fas fa-history text-4xl mb-2"}),a.jsx("p",{children:"No payouts yet"})]}):a.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Commission"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Net Received"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"})]})}),a.jsx("tbody",{className:"divide-y",children:Ht(W,E.payouts).map(P=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(P.paid_at).toLocaleDateString()}),a.jsxs("td",{className:"px-4 py-3 font-semibold",children:[P.amount.toFixed(2)," Birr"]}),a.jsxs("td",{className:"px-4 py-3 text-red-600",children:["-",P.commission_amount.toFixed(2)," Birr"]}),a.jsxs("td",{className:"px-4 py-3 font-bold text-green-600",children:[P.net_amount.toFixed(2)," Birr"]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:P.transaction_reference})]},P.id))})]})}),R(W)>1&&a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(E.payouts-1)*C+1," to ",Math.min(E.payouts*C,W.length)," of ",W.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>_(P=>({...P,payouts:P.payouts-1})),disabled:E.payouts===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"px-3 py-1",children:["Page ",E.payouts," of ",R(W)]}),a.jsx("button",{onClick:()=>_(P=>({...P,payouts:P.payouts+1})),disabled:E.payouts===R(W),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]}),x==="profile"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Shop Profile"}),k?a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:ue,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Save"}),a.jsx("button",{onClick:()=>{S(!1),B({shop_name:i.shop_name,shop_description:i.shop_description||"",bank_name:i.bank_name||"",account_number:i.account_number||"",account_holder_name:i.account_holder_name||""})},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600",children:"Cancel"})]}):a.jsx("button",{onClick:()=>S(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Edit Profile"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Shop Name"}),a.jsx("input",{type:"text",value:k?O.shop_name:i==null?void 0:i.shop_name,onChange:P=>B({...O,shop_name:P.target.value}),className:"w-full border rounded px-3 py-2",readOnly:!k})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),a.jsx("textarea",{value:k?O.shop_description:(i==null?void 0:i.shop_description)||"",onChange:P=>B({...O,shop_description:P.target.value}),className:"w-full border rounded px-3 py-2",rows:4,readOnly:!k})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Bank Account for Payouts"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bank Name"}),a.jsx("input",{type:"text",value:k?O.bank_name:(i==null?void 0:i.bank_name)||"Not provided",onChange:P=>B({...O,bank_name:P.target.value}),placeholder:"e.g., Commercial Bank of Ethiopia",className:"w-full border rounded px-3 py-2",readOnly:!k})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Number"}),a.jsx("input",{type:"text",value:k?O.account_number:(i==null?void 0:i.account_number)||"Not provided",onChange:P=>B({...O,account_number:P.target.value}),placeholder:"e.g., 1000123456789",className:"w-full border rounded px-3 py-2",readOnly:!k})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Holder Name"}),a.jsx("input",{type:"text",value:k?O.account_holder_name:(i==null?void 0:i.account_holder_name)||"Not provided",onChange:P=>B({...O,account_holder_name:P.target.value}),placeholder:"e.g., John Doe",className:"w-full border rounded px-3 py-2",readOnly:!k})]}),!k&&(!(i!=null&&i.bank_name)||!(i!=null&&i.account_number))&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3 text-sm text-yellow-800",children:[a.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),"Please add your bank account details to receive payouts from your sales."]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rating"}),a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i!=null&&i.rating&&i.rating>0?`${i.rating.toFixed(1)} `:"No ratings yet"})]})]})]})]})]})]}),m&&a.jsx(Sv,{categories:h,onSave:M,onClose:()=>p(!1)}),g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>j(null),children:a.jsxs("div",{className:"bg-white rounded-xl p-4 max-w-4xl max-h-[90vh] overflow-auto",onClick:P=>P.stopPropagation(),children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold",children:"Payment Receipt"}),a.jsx("button",{onClick:()=>j(null),className:"text-gray-500 hover:text-gray-700",children:a.jsx("i",{className:"fas fa-times text-2xl"})})]}),a.jsx("img",{src:g,alt:"Receipt",className:"w-full h-auto rounded"})]})})]})},Sv=({categories:e,onSave:t,onClose:r})=>{const[n,s]=w.useState({name:"",description:"",price:"",category_id:"",stock_quantity:"",product_type:"physical",image:""}),i=o=>{o.preventDefault(),t(n)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Add New Product"}),a.jsxs("form",{onSubmit:i,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Name"}),a.jsx("input",{type:"text",value:n.name,onChange:o=>s({...n,name:o.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),a.jsx("textarea",{value:n.description,onChange:o=>s({...n,description:o.target.value}),className:"w-full border rounded px-3 py-2",rows:3,required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price"}),a.jsx("input",{type:"number",step:"0.01",value:n.price,onChange:o=>s({...n,price:o.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Stock"}),a.jsx("input",{type:"number",value:n.stock_quantity,onChange:o=>s({...n,stock_quantity:o.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),a.jsxs("select",{value:n.category_id,onChange:o=>s({...n,category_id:o.target.value}),className:"w-full border rounded px-3 py-2",required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),e.map(o=>a.jsx("option",{value:o.id,children:o.name},o.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Icon"}),a.jsxs("select",{value:n.image,onChange:o=>s({...n,image:o.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:" Package"}),a.jsx("option",{value:"",children:" Laptop"}),a.jsx("option",{value:"",children:" Phone"}),a.jsx("option",{value:"",children:" Headphones"}),a.jsx("option",{value:"",children:" Watch"}),a.jsx("option",{value:"",children:" Clothing"}),a.jsx("option",{value:"",children:" Shoes"}),a.jsx("option",{value:"",children:" Book"})]})]}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700",children:"Add Product"}),a.jsx("button",{type:"button",onClick:r,className:"flex-1 bg-gray-500 text-white py-3 rounded-lg hover:bg-gray-600",children:"Cancel"})]})]})]})})},kv=()=>{const{auth:e}=Ot(),t=Tt(),{showSuccess:r}=Mr(),[n,s]=w.useState({shop_name:"",shop_description:""}),[i,o]=w.useState(!1),[l,c]=w.useState(""),u=async d=>{d.preventDefault(),o(!0),c("");try{await yt.createSeller({user_id:e.user.id,shop_name:n.shop_name,shop_description:n.shop_description}),r("Seller application submitted! Please wait for admin approval."),t("/")}catch(h){c(h.message||"Failed to create seller account")}finally{o(!1)}};return e.isAuthenticated?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4",children:a.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-xl shadow-lg p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Become a Seller"}),a.jsx("p",{className:"text-gray-600",children:"Start selling your products on our marketplace"})]}),l&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg mb-6",children:l}),a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shop Name *"}),a.jsx("input",{type:"text",value:n.shop_name,onChange:d=>s({...n,shop_name:d.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your shop name",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shop Description"}),a.jsx("textarea",{value:n.shop_description,onChange:d=>s({...n,shop_description:d.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tell customers about your shop",rows:4})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Seller Benefits:"}),a.jsxs("ul",{className:"space-y-1 text-sm text-blue-800",children:[a.jsx("li",{children:" List unlimited products"}),a.jsx("li",{children:" Manage your own inventory"}),a.jsx("li",{children:" Track orders and shipments"}),a.jsx("li",{children:" Build your brand"})]})]}),a.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-semibold disabled:opacity-50",children:i?"Creating Account...":"Create Seller Account"})]})]})}):(t("/login"),null)},Ev=()=>{const{auth:e}=Ot(),t=Tt(),{showSuccess:r,showError:n}=Mr(),[s,i]=w.useState([]),[o,l]=w.useState(!0),[c,u]=w.useState(null),[d,h]=w.useState(5),[f,x]=w.useState(""),[y,v]=w.useState(1),b=10;w.useEffect(()=>{if(!e.isAuthenticated){t("/login");return}m()},[e,t]);const m=async()=>{try{const{data:S,error:E}=await F.from("orders").select(`
          *,
          seller_orders (
            *,
            sellers (shop_name),
            order_items (*)
          )
        `).eq("customer_email",e.user.email).order("created_at",{ascending:!1});if(E)throw E;i(S||[])}catch(S){console.error("Error loading orders:",S)}finally{l(!1)}},p=(S,E,_)=>{u({sellerOrderId:S,sellerId:E,shopName:_}),h(5),x("")},g=async()=>{if(c)try{const{error:S}=await F.from("seller_ratings").insert({seller_id:c.sellerId,customer_email:e.user.email,seller_order_id:c.sellerOrderId,rating:d,comment:f});if(S)throw S;await F.rpc("update_seller_rating",{p_seller_id:c.sellerId}),r("Thank you for your rating!"),u(null),m()}catch(S){S.code==="23505"?n("You have already rated this order"):n("Failed to submit rating")}},j=(S,E)=>{const _=(E-1)*b;return S.slice(_,_+b)},k=Math.ceil(s.length/b);return o?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"My Orders"}),s.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't placed any orders yet"}),a.jsx("button",{onClick:()=>t("/products"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Start Shopping"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-6",children:j(s,y).map(S=>{var E;return a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-lg",children:["Order #",S.id]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Placed on ",new Date(S.created_at).toLocaleDateString()]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[S.total_amount," ETB"]}),a.jsx("p",{className:"text-sm text-gray-600",children:S.payment_status})]})]})}),a.jsx("div",{className:"p-6",children:(E=S.seller_orders)==null?void 0:E.map(_=>{var C,O;return a.jsxs("div",{className:"mb-6 last:mb-0",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[" ",(C=_.sellers)==null?void 0:C.shop_name]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Subtotal: ",_.subtotal," ETB"]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${_.status==="pending"?"bg-yellow-100 text-yellow-800":_.status==="processing"?"bg-blue-100 text-blue-800":_.status==="shipped"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:_.status})]}),a.jsx("div",{className:"space-y-2",children:(O=_.order_items)==null?void 0:O.map(B=>a.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded",children:[a.jsx("span",{className:"text-3xl",children:B.product_image}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:B.product_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",B.quantity]})]}),a.jsxs("p",{className:"font-semibold",children:[B.price," ETB"]})]},B.id))}),_.tracking_number&&a.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[" Tracking: ",a.jsx("span",{className:"font-mono",children:_.tracking_number})]})}),_.status==="delivered"&&a.jsx("div",{className:"mt-3",children:a.jsx("button",{onClick:()=>{var B;return p(_.id,_.seller_id,(B=_.sellers)==null?void 0:B.shop_name)},className:"bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 text-sm",children:" Rate Seller"})})]},_.id)})}),a.jsx("div",{className:"bg-gray-50 px-6 py-3 border-t",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Shipping to: ",S.shipping_address]})})]},S.id)})}),k>1&&a.jsxs("div",{className:"mt-6 flex items-center justify-between bg-white rounded-lg shadow p-4",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(y-1)*b+1," to ",Math.min(y*b,s.length)," of ",s.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>v(S=>S-1),disabled:y===1,className:"px-4 py-2 border rounded disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"px-4 py-2",children:["Page ",y," of ",k]}),a.jsx("button",{onClick:()=>v(S=>S+1),disabled:y===k,className:"px-4 py-2 border rounded disabled:opacity-50",children:"Next"})]})]})]})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Rate ",c.shopName]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your Rating"}),a.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(S=>a.jsx("button",{onClick:()=>h(S),className:"text-3xl transition-colors",children:S<=d?"":""},S))})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Comment (Optional)"}),a.jsx("textarea",{value:f,onChange:S=>x(S.target.value),className:"w-full border rounded px-3 py-2",rows:3,placeholder:"Share your experience..."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:g,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"Submit Rating"}),a.jsx("button",{onClick:()=>u(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})})]})},Cv=()=>{const{addToCart:e}=An(),{wishlist:t,removeFromWishlist:r}=Wf(),[n,s]=Xi.useState(1),i=12,o=(u,d)=>{const h=(d-1)*i;return u.slice(h,h+i)},l=Math.ceil(t.length/i),c=u=>{e(u)};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"My Wishlist"}),t.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[a.jsx("i",{className:"fas fa-heart text-6xl text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Your wishlist is empty"}),a.jsx(V,{to:"/products",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Browse Products"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o(t,n).map(u=>a.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition",children:[a.jsxs("div",{className:"relative",children:[a.jsx(V,{to:`/product/${u.id}`,children:a.jsx("div",{className:"text-6xl flex items-center justify-center h-48 bg-gray-50",children:u.image})}),a.jsx("button",{onClick:()=>r(u.id),className:"absolute top-2 right-2 bg-white rounded-full p-2 shadow hover:bg-red-50",children:a.jsx("i",{className:"fas fa-times text-red-500"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx(V,{to:`/product/${u.id}`,children:a.jsx("h3",{className:"font-semibold text-gray-800 mb-1 hover:text-blue-600",children:u.name})}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.seller_name}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-xl font-bold text-blue-600",children:[u.price," Birr"]}),a.jsxs("button",{onClick:()=>c(u),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm",children:[a.jsx("i",{className:"fas fa-shopping-cart mr-1"}),"Add to Cart"]})]})]})]},u.id))}),l>1&&a.jsxs("div",{className:"mt-6 flex items-center justify-between bg-white rounded-lg shadow p-4",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(n-1)*i+1," to ",Math.min(n*i,t.length)," of ",t.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>s(u=>u-1),disabled:n===1,className:"px-4 py-2 border rounded disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"px-4 py-2",children:["Page ",n," of ",l]}),a.jsx("button",{onClick:()=>s(u=>u+1),disabled:n===l,className:"px-4 py-2 border rounded disabled:opacity-50",children:"Next"})]})]})]})]})})};function Pv(){return a.jsx(uv,{children:a.jsx(ov,{children:a.jsx(lv,{children:a.jsx(cv,{children:a.jsxs(Nx,{children:[a.jsx(fv,{}),a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[a.jsx(dv,{}),a.jsx("main",{className:"flex-1",children:a.jsxs(gx,{children:[a.jsx(Ge,{path:"/",element:a.jsx(pv,{})}),a.jsx(Ge,{path:"/products",element:a.jsx(gv,{})}),a.jsx(Ge,{path:"/product/:id",element:a.jsx(xv,{})}),a.jsx(Ge,{path:"/cart",element:a.jsx(yv,{})}),a.jsx(Ge,{path:"/checkout",element:a.jsx(vv,{})}),a.jsx(Ge,{path:"/login",element:a.jsx(wv,{})}),a.jsx(Ge,{path:"/register",element:a.jsx(bv,{})}),a.jsx(Ge,{path:"/admin",element:a.jsx(_v,{})}),a.jsx(Ge,{path:"/seller",element:a.jsx(Nv,{})}),a.jsx(Ge,{path:"/become-seller",element:a.jsx(kv,{})}),a.jsx(Ge,{path:"/my-orders",element:a.jsx(Ev,{})}),a.jsx(Ge,{path:"/wishlist",element:a.jsx(Cv,{})})]})}),a.jsx(hv,{})]})]})})})})})}Za.createRoot(document.getElementById("root")).render(a.jsx(Xi.StrictMode,{children:a.jsx(Pv,{})}));
